var si=Object.create;var At=Object.defineProperty;var ai=Object.getOwnPropertyDescriptor;var fi=Object.getOwnPropertyNames;var ui=Object.getPrototypeOf,li=Object.prototype.hasOwnProperty;var Co=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Mo=(e,t)=>{for(var n in t)At(e,n,{get:t[n],enumerable:!0})},Po=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of fi(t))!li.call(e,a)&&a!==n&&At(e,a,{get:()=>t[a],enumerable:!(i=ai(t,a))||i.enumerable});return e};var pi=(e,t,n)=>(n=e!=null?si(ui(e)):{},Po(t||!e||!e.__esModule?At(n,"default",{value:e,enumerable:!0}):n,e)),ci=e=>Po(At({},"__esModule",{value:!0}),e);var qn=Co(()=>{});var On=Co((exports,module)=>{(function(e,t,n){typeof module<"u"&&module.exports?module.exports=n():typeof define=="function"&&define.amd?define(n):t[e]=n()})("reqwest",exports,function(){var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=qn()}catch{throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}else return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){if(e._aborted)return n(e.request);if(e._timedOut)return n(e.request,"Request is aborted: timeout");e.request&&e.request[readyState]==4&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request))}}function setHeaders(e,t){var n=t.headers||{},i;n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var a=typeof FormData<"u"&&t.data instanceof FormData;!t.crossOrigin&&!n[requestedWith]&&(n[requestedWith]=defaultHeaders.requestedWith),!n[contentType]&&!a&&(n[contentType]=t.contentType||defaultHeaders.contentType);for(i in n)n.hasOwnProperty(i)&&"setRequestHeader"in e&&e.setRequestHeader(i,n[i])}function setCredentials(e,t){typeof t.withCredentials<"u"&&typeof e.withCredentials<"u"&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,i){var a=uniqid++,s=e.jsonpCallback||"callback",f=e.jsonpCallbackName||reqwest.getcallbackPrefix(a),l=new RegExp("((^|\\?|&)"+s+")=([^&]+)"),d=i.match(l),c=doc.createElement("script"),E=0,S=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return d?d[3]==="?"?i=i.replace(l,"$1="+f):f=d[3]:i=urlappend(i,s+"="+f),context[f]=generalCallback,c.type="text/javascript",c.src=i,c.async=!0,typeof c.onreadystatechange<"u"&&!S&&(c.htmlFor=c.id="_reqwest_"+a),c.onload=c.onreadystatechange=function(){if(c[readyState]&&c[readyState]!=="complete"&&c[readyState]!=="loaded"||E)return!1;c.onload=c.onreadystatechange=null,c.onclick&&c.onclick(),t(lastValue),lastValue=void 0,head.removeChild(c),E=1},head.appendChild(c),{abort:function(){c.onload=c.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(c),E=1}}}function getRequest(e,t){var n=this.o,i=(n.method||"GET").toUpperCase(),a=typeof n=="string"?n:n.url,s=n.processData!==!1&&n.data&&typeof n.data!="string"?reqwest.toQueryString(n.data):n.data||null,f,l=!1;return(n.type=="jsonp"||i=="GET")&&s&&(a=urlappend(a,s),s=null),n.type=="jsonp"?handleJsonp(n,e,t,a):(f=n.xhr&&n.xhr(n)||xhr(n),f.open(i,a,n.async!==!1),setHeaders(f,n),setCredentials(f,n),context[xDomainRequest]&&f instanceof context[xDomainRequest]?(f.onload=e,f.onerror=t,f.onprogress=function(){},l=!0):f.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(f),l?setTimeout(function(){f.send(s)},200):f.send(s),f)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(e!==null){if(e.match("json"))return"json";if(e.match("javascript"))return"js";if(e.match("text"))return"html";if(e.match("xml"))return"xml"}}function init(o,fn){this.url=typeof o=="string"?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)});function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp=type!=="jsonp"?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML;break}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.request=getRequest.call(this,success,error)}Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}};function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,`\r
`):""}function serial(e,t){var n=e.name,i=e.tagName.toLowerCase(),a=function(c){c&&!c.disabled&&t(n,normalize(c.attributes.value&&c.attributes.value.specified?c.value:c.text))},s,f,l,d;if(!(e.disabled||!n))switch(i){case"input":/reset|button|image|file/i.test(e.type)||(s=/checkbox/i.test(e.type),f=/radio/i.test(e.type),l=e.value,(!(s||f)||e.checked)&&t(n,normalize(s&&l===""?"on":l)));break;case"textarea":t(n,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one")a(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(d=0;e.length&&d<e.length;d++)e.options[d].selected&&a(e.options[d]);break}}function eachFormElement(){var e=this,t,n,i=function(a,s){var f,l,d;for(f=0;f<s.length;f++)for(d=a[byTag](s[f]),l=0;l<d.length;l++)serial(d[l],e)};for(n=0;n<arguments.length;n++)t=arguments[n],/input|select|textarea/i.test(t.tagName)&&serial(t,e),i(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(arguments.length===0)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),e=="map"?t=serializeHash:e=="array"?t=reqwest.serializeArray:t=serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,i,a=t||!1,s=[],f=encodeURIComponent,l=function(d,c){c=typeof c=="function"?c():c??"",s[s.length]=f(d)+"="+f(c)};if(isArray(e))for(i=0;e&&i<e.length;i++)l(e[i].name,e[i].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],a,l);return s.join("&").replace(/%20/g,"+")};function buildParams(e,t,n,i){var a,s,f,l=/\[\]$/;if(isArray(t))for(s=0;t&&s<t.length;s++)f=t[s],n||l.test(e)?i(e,f):buildParams(e+"["+(typeof f=="object"?s:"")+"]",f,n,i);else if(t&&t.toString()==="[object Object]")for(a in t)buildParams(e+"["+a+"]",t[a],n,i);else i(e,t)}return reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})});var Yi={};Mo(Yi,{Pride:()=>Cn});module.exports=ci(Yi);var mi={array:[],get(e){return this.array.find(t=>t.get("uid")===e)}},Re=mi;var fo={};Mo(fo,{VERSION:()=>qt,after:()=>Xr,all:()=>It,allKeys:()=>G,any:()=>kt,assign:()=>xe,before:()=>nt,bind:()=>Dt,bindAll:()=>un,chain:()=>Br,chunk:()=>ao,clone:()=>br,collect:()=>V,compact:()=>ro,compose:()=>Vr,constant:()=>Qe,contains:()=>B,countBy:()=>gn,create:()=>Sr,debounce:()=>kr,default:()=>An,defaults:()=>Mt,defer:()=>ln,delay:()=>Lt,detect:()=>Ne,difference:()=>Vt,drop:()=>qe,each:()=>N,escape:()=>on,every:()=>It,extend:()=>Ct,extendOwn:()=>xe,filter:()=>J,find:()=>Ne,findIndex:()=>Pe,findKey:()=>it,findLastIndex:()=>Bt,findWhere:()=>Qr,first:()=>dt,flatten:()=>oo,foldl:()=>zt,foldr:()=>Wr,forEach:()=>N,functions:()=>$e,get:()=>je,groupBy:()=>dn,has:()=>Fr,head:()=>dt,identity:()=>ve,include:()=>B,includes:()=>B,indexBy:()=>hn,indexOf:()=>Ht,initial:()=>mt,inject:()=>zt,intersection:()=>no,invert:()=>Ye,invoke:()=>mn,isArguments:()=>Te,isArray:()=>k,isArrayBuffer:()=>bt,isBoolean:()=>Ve,isDataView:()=>de,isDate:()=>ko,isElement:()=>gr,isEmpty:()=>_r,isEqual:()=>Ar,isError:()=>Vo,isFinite:()=>vr,isFunction:()=>T,isMap:()=>jo,isMatch:()=>Ke,isNaN:()=>Xe,isNull:()=>hr,isNumber:()=>Rt,isObject:()=>L,isRegExp:()=>Uo,isSet:()=>tn,isString:()=>Se,isSymbol:()=>St,isTypedArray:()=>Ft,isUndefined:()=>Ue,isWeakMap:()=>en,isWeakSet:()=>rn,iteratee:()=>Ce,keys:()=>w,last:()=>to,lastIndexOf:()=>cn,map:()=>V,mapObject:()=>$r,matcher:()=>ee,matches:()=>ee,max:()=>lt,memoize:()=>zr,methods:()=>$e,min:()=>Kr,mixin:()=>ht,negate:()=>we,noop:()=>tt,now:()=>ae,object:()=>io,omit:()=>yn,once:()=>pn,pairs:()=>Rr,partial:()=>fe,partition:()=>xn,pick:()=>Ut,pluck:()=>Ae,property:()=>_e,propertyOf:()=>Cr,random:()=>Me,range:()=>so,reduce:()=>zt,reduceRight:()=>Wr,reject:()=>Jr,rest:()=>qe,restArguments:()=>b,result:()=>Dr,sample:()=>ct,select:()=>J,shuffle:()=>Yr,size:()=>jr,some:()=>kt,sortBy:()=>Zr,sortedIndex:()=>at,tail:()=>qe,take:()=>dt,tap:()=>Tr,template:()=>Nr,templateSettings:()=>an,throttle:()=>Ir,times:()=>Mr,toArray:()=>pt,toPath:()=>Pt,transpose:()=>Le,unescape:()=>sn,union:()=>_n,uniq:()=>De,unique:()=>De,uniqueId:()=>Lr,unzip:()=>Le,values:()=>X,where:()=>Gr,without:()=>vn,wrap:()=>Ur,zip:()=>wn});var qt="1.13.6",fr=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},ke=Array.prototype,Ot=Object.prototype,ur=typeof Symbol<"u"?Symbol.prototype:null,No=ke.push,j=ke.slice,re=Ot.toString,Do=Ot.hasOwnProperty,lr=typeof ArrayBuffer<"u",Lo=typeof DataView<"u",Bo=Array.isArray,pr=Object.keys,cr=Object.create,mr=lr&&ArrayBuffer.isView,Ho=isNaN,zo=isFinite,Et=!{toString:null}.propertyIsEnumerable("toString"),dr=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Io=Math.pow(2,53)-1;function b(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),i=Array(n),a=0;a<n;a++)i[a]=arguments[a+t];switch(t){case 0:return e.call(this,i);case 1:return e.call(this,arguments[0],i);case 2:return e.call(this,arguments[0],arguments[1],i)}var s=Array(t+1);for(a=0;a<t;a++)s[a]=arguments[a];return s[t]=i,e.apply(this,s)}}function L(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function hr(e){return e===null}function Ue(e){return e===void 0}function Ve(e){return e===!0||e===!1||re.call(e)==="[object Boolean]"}function gr(e){return!!(e&&e.nodeType===1)}function q(e){var t="[object "+e+"]";return function(n){return re.call(n)===t}}var Se=q("String");var Rt=q("Number");var ko=q("Date");var Uo=q("RegExp");var Vo=q("Error");var St=q("Symbol");var bt=q("ArrayBuffer");var Xo=q("Function"),di=fr.document&&fr.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof di!="function"&&(Xo=function(e){return typeof e=="function"||!1});var T=Xo;var xr=q("Object");var Tt=Lo&&xr(new DataView(new ArrayBuffer(8))),be=typeof Map<"u"&&xr(new Map);var hi=q("DataView");function gi(e){return e!=null&&T(e.getInt8)&&bt(e.buffer)}var de=Tt?gi:hi;var k=Bo||q("Array");function P(e,t){return e!=null&&Do.call(e,t)}var yr=q("Arguments");(function(){yr(arguments)||(yr=function(e){return P(e,"callee")})})();var Te=yr;function vr(e){return!St(e)&&zo(e)&&!isNaN(parseFloat(e))}function Xe(e){return Rt(e)&&Ho(e)}function Qe(e){return function(){return e}}function We(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=Io}}function Je(e){return function(t){return t?.[e]}}var he=Je("byteLength");var Qo=We(he);var xi=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function yi(e){return mr?mr(e)&&!de(e):Qo(e)&&xi.test(re.call(e))}var Ft=lr?yi:Qe(!1);var F=Je("length");function vi(e){for(var t={},n=e.length,i=0;i<n;++i)t[e[i]]=!0;return{contains:function(a){return t[a]===!0},push:function(a){return t[a]=!0,e.push(a)}}}function Ge(e,t){t=vi(t);var n=dr.length,i=e.constructor,a=T(i)&&i.prototype||Ot,s="constructor";for(P(e,s)&&!t.contains(s)&&t.push(s);n--;)s=dr[n],s in e&&e[s]!==a[s]&&!t.contains(s)&&t.push(s)}function w(e){if(!L(e))return[];if(pr)return pr(e);var t=[];for(var n in e)P(e,n)&&t.push(n);return Et&&Ge(e,t),t}function _r(e){if(e==null)return!0;var t=F(e);return typeof t=="number"&&(k(e)||Se(e)||Te(e))?t===0:F(w(e))===0}function Ke(e,t){var n=w(t),i=n.length;if(e==null)return!i;for(var a=Object(e),s=0;s<i;s++){var f=n[s];if(t[f]!==a[f]||!(f in a))return!1}return!0}function x(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e}x.VERSION=qt;x.prototype.value=function(){return this._wrapped};x.prototype.valueOf=x.prototype.toJSON=x.prototype.value;x.prototype.toString=function(){return String(this._wrapped)};function $t(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,he(e))}var Wo="[object DataView]";function wr(e,t,n,i){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var a=typeof e;return a!=="function"&&a!=="object"&&typeof t!="object"?!1:Jo(e,t,n,i)}function Jo(e,t,n,i){e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var a=re.call(e);if(a!==re.call(t))return!1;if(Tt&&a=="[object Object]"&&de(e)){if(!de(t))return!1;a=Wo}switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return ur.valueOf.call(e)===ur.valueOf.call(t);case"[object ArrayBuffer]":case Wo:return Jo($t(e),$t(t),n,i)}var s=a==="[object Array]";if(!s&&Ft(e)){var f=he(e);if(f!==he(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;s=!0}if(!s){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,d=t.constructor;if(l!==d&&!(T(l)&&l instanceof l&&T(d)&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],i=i||[];for(var c=n.length;c--;)if(n[c]===e)return i[c]===t;if(n.push(e),i.push(t),s){if(c=e.length,c!==t.length)return!1;for(;c--;)if(!wr(e[c],t[c],n,i))return!1}else{var E=w(e),S;if(c=E.length,w(t).length!==c)return!1;for(;c--;)if(S=E[c],!(P(t,S)&&wr(e[S],t[S],n,i)))return!1}return n.pop(),i.pop(),!0}function Ar(e,t){return wr(e,t)}function G(e){if(!L(e))return[];var t=[];for(var n in e)t.push(n);return Et&&Ge(e,t),t}function Fe(e){var t=F(e);return function(n){if(n==null)return!1;var i=G(n);if(F(i))return!1;for(var a=0;a<t;a++)if(!T(n[e[a]]))return!1;return e!==Er||!T(n[qr])}}var qr="forEach",Go="has",Or=["clear","delete"],Ko=["get",Go,"set"],Yo=Or.concat(qr,Ko),Er=Or.concat(Ko),Zo=["add"].concat(Or,qr,Go);var jo=be?Fe(Yo):q("Map");var en=be?Fe(Er):q("WeakMap");var tn=be?Fe(Zo):q("Set");var rn=q("WeakSet");function X(e){for(var t=w(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=e[t[a]];return i}function Rr(e){for(var t=w(e),n=t.length,i=Array(n),a=0;a<n;a++)i[a]=[t[a],e[t[a]]];return i}function Ye(e){for(var t={},n=w(e),i=0,a=n.length;i<a;i++)t[e[n[i]]]=n[i];return t}function $e(e){var t=[];for(var n in e)T(e[n])&&t.push(n);return t.sort()}function ge(e,t){return function(n){var i=arguments.length;if(t&&(n=Object(n)),i<2||n==null)return n;for(var a=1;a<i;a++)for(var s=arguments[a],f=e(s),l=f.length,d=0;d<l;d++){var c=f[d];(!t||n[c]===void 0)&&(n[c]=s[c])}return n}}var Ct=ge(G);var xe=ge(w);var Mt=ge(G,!0);function _i(){return function(){}}function Ze(e){if(!L(e))return{};if(cr)return cr(e);var t=_i();t.prototype=e;var n=new t;return t.prototype=null,n}function Sr(e,t){var n=Ze(e);return t&&xe(n,t),n}function br(e){return L(e)?k(e)?e.slice():Ct({},e):e}function Tr(e,t){return t(e),e}function Pt(e){return k(e)?e:[e]}x.toPath=Pt;function K(e){return x.toPath(e)}function ye(e,t){for(var n=t.length,i=0;i<n;i++){if(e==null)return;e=e[t[i]]}return n?e:void 0}function je(e,t,n){var i=ye(e,K(t));return Ue(i)?n:i}function Fr(e,t){t=K(t);for(var n=t.length,i=0;i<n;i++){var a=t[i];if(!P(e,a))return!1;e=e[a]}return!!n}function ve(e){return e}function ee(e){return e=xe({},e),function(t){return Ke(t,e)}}function _e(e){return e=K(e),function(t){return ye(t,e)}}function Y(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(i){return e.call(t,i)};case 3:return function(i,a,s){return e.call(t,i,a,s)};case 4:return function(i,a,s,f){return e.call(t,i,a,s,f)}}return function(){return e.apply(t,arguments)}}function et(e,t,n){return e==null?ve:T(e)?Y(e,t,n):L(e)&&!k(e)?ee(e):_e(e)}function Ce(e,t){return et(e,t,1/0)}x.iteratee=Ce;function R(e,t,n){return x.iteratee!==Ce?x.iteratee(e,t):et(e,t,n)}function $r(e,t,n){t=R(t,n);for(var i=w(e),a=i.length,s={},f=0;f<a;f++){var l=i[f];s[l]=t(e[l],l,e)}return s}function tt(){}function Cr(e){return e==null?tt:function(t){return je(e,t)}}function Mr(e,t,n){var i=Array(Math.max(0,e));t=Y(t,n,1);for(var a=0;a<e;a++)i[a]=t(a);return i}function Me(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var ae=Date.now||function(){return new Date().getTime()};function rt(e){var t=function(s){return e[s]},n="(?:"+w(e).join("|")+")",i=RegExp(n),a=RegExp(n,"g");return function(s){return s=s==null?"":""+s,i.test(s)?s.replace(a,t):s}}var Nt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var on=rt(Nt);var nn=Ye(Nt);var sn=rt(nn);var an=x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Pr=/(.)^/,wi={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Ai=/\\|'|\r|\n|\u2028|\u2029/g;function qi(e){return"\\"+wi[e]}var Oi=/^\s*(\w|\$)+\s*$/;function Nr(e,t,n){!t&&n&&(t=n),t=Mt({},t,x.templateSettings);var i=RegExp([(t.escape||Pr).source,(t.interpolate||Pr).source,(t.evaluate||Pr).source].join("|")+"|$","g"),a=0,s="__p+='";e.replace(i,function(c,E,S,v,y){return s+=e.slice(a,y).replace(Ai,qi),a=y+c.length,E?s+=`'+
((__t=(`+E+`))==null?'':_.escape(__t))+
'`:S?s+=`'+
((__t=(`+S+`))==null?'':__t)+
'`:v&&(s+=`';
`+v+`
__p+='`),c}),s+=`';
`;var f=t.variable;if(f){if(!Oi.test(f))throw new Error("variable is not a bare identifier: "+f)}else s=`with(obj||{}){
`+s+`}
`,f="obj";s=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+s+`return __p;
`;var l;try{l=new Function(f,"_",s)}catch(c){throw c.source=s,c}var d=function(c){return l.call(this,c,x)};return d.source="function("+f+`){
`+s+"}",d}function Dr(e,t,n){t=K(t);var i=t.length;if(!i)return T(n)?n.call(e):n;for(var a=0;a<i;a++){var s=e?.[t[a]];s===void 0&&(s=n,a=i),e=T(s)?s.call(e):s}return e}var Ei=0;function Lr(e){var t=++Ei+"";return e?e+t:t}function Br(e){var t=x(e);return t._chain=!0,t}function ot(e,t,n,i,a){if(!(i instanceof t))return e.apply(n,a);var s=Ze(e.prototype),f=e.apply(s,a);return L(f)?f:s}var Hr=b(function(e,t){var n=Hr.placeholder,i=function(){for(var a=0,s=t.length,f=Array(s),l=0;l<s;l++)f[l]=t[l]===n?arguments[a++]:t[l];for(;a<arguments.length;)f.push(arguments[a++]);return ot(e,i,this,this,f)};return i});Hr.placeholder=x;var fe=Hr;var Dt=b(function(e,t,n){if(!T(e))throw new TypeError("Bind must be called on a function");var i=b(function(a){return ot(e,i,t,this,n.concat(a))});return i});var $=We(F);function U(e,t,n,i){if(i=i||[],!t&&t!==0)t=1/0;else if(t<=0)return i.concat(e);for(var a=i.length,s=0,f=F(e);s<f;s++){var l=e[s];if($(l)&&(k(l)||Te(l)))if(t>1)U(l,t-1,n,i),a=i.length;else for(var d=0,c=l.length;d<c;)i[a++]=l[d++];else n||(i[a++]=l)}return i}var un=b(function(e,t){t=U(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var i=t[n];e[i]=Dt(e[i],e)}return e});function zr(e,t){var n=function(i){var a=n.cache,s=""+(t?t.apply(this,arguments):i);return P(a,s)||(a[s]=e.apply(this,arguments)),a[s]};return n.cache={},n}var Lt=b(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)});var ln=fe(Lt,x,1);function Ir(e,t,n){var i,a,s,f,l=0;n||(n={});var d=function(){l=n.leading===!1?0:ae(),i=null,f=e.apply(a,s),i||(a=s=null)},c=function(){var E=ae();!l&&n.leading===!1&&(l=E);var S=t-(E-l);return a=this,s=arguments,S<=0||S>t?(i&&(clearTimeout(i),i=null),l=E,f=e.apply(a,s),i||(a=s=null)):!i&&n.trailing!==!1&&(i=setTimeout(d,S)),f};return c.cancel=function(){clearTimeout(i),l=0,i=a=s=null},c}function kr(e,t,n){var i,a,s,f,l,d=function(){var E=ae()-a;t>E?i=setTimeout(d,t-E):(i=null,n||(f=e.apply(l,s)),i||(s=l=null))},c=b(function(E){return l=this,s=E,a=ae(),i||(i=setTimeout(d,t),n&&(f=e.apply(l,s))),f});return c.cancel=function(){clearTimeout(i),i=s=l=null},c}function Ur(e,t){return fe(t,e)}function we(e){return function(){return!e.apply(this,arguments)}}function Vr(){var e=arguments,t=e.length-1;return function(){for(var n=t,i=e[t].apply(this,arguments);n--;)i=e[n].call(this,i);return i}}function Xr(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function nt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var pn=fe(nt,2);function it(e,t,n){t=R(t,n);for(var i=w(e),a,s=0,f=i.length;s<f;s++)if(a=i[s],t(e[a],a,e))return a}function st(e){return function(t,n,i){n=R(n,i);for(var a=F(t),s=e>0?0:a-1;s>=0&&s<a;s+=e)if(n(t[s],s,t))return s;return-1}}var Pe=st(1);var Bt=st(-1);function at(e,t,n,i){n=R(n,i,1);for(var a=n(t),s=0,f=F(e);s<f;){var l=Math.floor((s+f)/2);n(e[l])<a?s=l+1:f=l}return s}function ft(e,t,n){return function(i,a,s){var f=0,l=F(i);if(typeof s=="number")e>0?f=s>=0?s:Math.max(s+l,f):l=s>=0?Math.min(s+1,l):s+l+1;else if(n&&s&&l)return s=n(i,a),i[s]===a?s:-1;if(a!==a)return s=t(j.call(i,f,l),Xe),s>=0?s+f:-1;for(s=e>0?f:l-1;s>=0&&s<l;s+=e)if(i[s]===a)return s;return-1}}var Ht=ft(1,Pe,at);var cn=ft(-1,Bt);function Ne(e,t,n){var i=$(e)?Pe:it,a=i(e,t,n);if(a!==void 0&&a!==-1)return e[a]}function Qr(e,t){return Ne(e,ee(t))}function N(e,t,n){t=Y(t,n);var i,a;if($(e))for(i=0,a=e.length;i<a;i++)t(e[i],i,e);else{var s=w(e);for(i=0,a=s.length;i<a;i++)t(e[s[i]],s[i],e)}return e}function V(e,t,n){t=R(t,n);for(var i=!$(e)&&w(e),a=(i||e).length,s=Array(a),f=0;f<a;f++){var l=i?i[f]:f;s[f]=t(e[l],l,e)}return s}function ut(e){var t=function(n,i,a,s){var f=!$(n)&&w(n),l=(f||n).length,d=e>0?0:l-1;for(s||(a=n[f?f[d]:d],d+=e);d>=0&&d<l;d+=e){var c=f?f[d]:d;a=i(a,n[c],c,n)}return a};return function(n,i,a,s){var f=arguments.length>=3;return t(n,Y(i,s,4),a,f)}}var zt=ut(1);var Wr=ut(-1);function J(e,t,n){var i=[];return t=R(t,n),N(e,function(a,s,f){t(a,s,f)&&i.push(a)}),i}function Jr(e,t,n){return J(e,we(R(t)),n)}function It(e,t,n){t=R(t,n);for(var i=!$(e)&&w(e),a=(i||e).length,s=0;s<a;s++){var f=i?i[s]:s;if(!t(e[f],f,e))return!1}return!0}function kt(e,t,n){t=R(t,n);for(var i=!$(e)&&w(e),a=(i||e).length,s=0;s<a;s++){var f=i?i[s]:s;if(t(e[f],f,e))return!0}return!1}function B(e,t,n,i){return $(e)||(e=X(e)),(typeof n!="number"||i)&&(n=0),Ht(e,t,n)>=0}var mn=b(function(e,t,n){var i,a;return T(t)?a=t:(t=K(t),i=t.slice(0,-1),t=t[t.length-1]),V(e,function(s){var f=a;if(!f){if(i&&i.length&&(s=ye(s,i)),s==null)return;f=s[t]}return f==null?f:f.apply(s,n)})});function Ae(e,t){return V(e,_e(t))}function Gr(e,t){return J(e,ee(t))}function lt(e,t,n){var i=-1/0,a=-1/0,s,f;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=$(e)?e:X(e);for(var l=0,d=e.length;l<d;l++)s=e[l],s!=null&&s>i&&(i=s)}else t=R(t,n),N(e,function(c,E,S){f=t(c,E,S),(f>a||f===-1/0&&i===-1/0)&&(i=c,a=f)});return i}function Kr(e,t,n){var i=1/0,a=1/0,s,f;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=$(e)?e:X(e);for(var l=0,d=e.length;l<d;l++)s=e[l],s!=null&&s<i&&(i=s)}else t=R(t,n),N(e,function(c,E,S){f=t(c,E,S),(f<a||f===1/0&&i===1/0)&&(i=c,a=f)});return i}var Ri=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function pt(e){return e?k(e)?j.call(e):Se(e)?e.match(Ri):$(e)?V(e,ve):X(e):[]}function ct(e,t,n){if(t==null||n)return $(e)||(e=X(e)),e[Me(e.length-1)];var i=pt(e),a=F(i);t=Math.max(Math.min(t,a),0);for(var s=a-1,f=0;f<t;f++){var l=Me(f,s),d=i[f];i[f]=i[l],i[l]=d}return i.slice(0,t)}function Yr(e){return ct(e,1/0)}function Zr(e,t,n){var i=0;return t=R(t,n),Ae(V(e,function(a,s,f){return{value:a,index:i++,criteria:t(a,s,f)}}).sort(function(a,s){var f=a.criteria,l=s.criteria;if(f!==l){if(f>l||f===void 0)return 1;if(f<l||l===void 0)return-1}return a.index-s.index}),"value")}function oe(e,t){return function(n,i,a){var s=t?[[],[]]:{};return i=R(i,a),N(n,function(f,l){var d=i(f,l,n);e(s,f,d)}),s}}var dn=oe(function(e,t,n){P(e,n)?e[n].push(t):e[n]=[t]});var hn=oe(function(e,t,n){e[n]=t});var gn=oe(function(e,t,n){P(e,n)?e[n]++:e[n]=1});var xn=oe(function(e,t,n){e[n?0:1].push(t)},!0);function jr(e){return e==null?0:$(e)?e.length:w(e).length}function eo(e,t,n){return t in n}var Ut=b(function(e,t){var n={},i=t[0];if(e==null)return n;T(i)?(t.length>1&&(i=Y(i,t[1])),t=G(e)):(i=eo,t=U(t,!1,!1),e=Object(e));for(var a=0,s=t.length;a<s;a++){var f=t[a],l=e[f];i(l,f,e)&&(n[f]=l)}return n});var yn=b(function(e,t){var n=t[0],i;return T(n)?(n=we(n),t.length>1&&(i=t[1])):(t=V(U(t,!1,!1),String),n=function(a,s){return!B(t,s)}),Ut(e,n,i)});function mt(e,t,n){return j.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function dt(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:mt(e,e.length-t)}function qe(e,t,n){return j.call(e,t==null||n?1:t)}function to(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:qe(e,Math.max(0,e.length-t))}function ro(e){return J(e,Boolean)}function oo(e,t){return U(e,t,!1)}var Vt=b(function(e,t){return t=U(t,!0,!0),J(e,function(n){return!B(t,n)})});var vn=b(function(e,t){return Vt(e,t)});function De(e,t,n,i){Ve(t)||(i=n,n=t,t=!1),n!=null&&(n=R(n,i));for(var a=[],s=[],f=0,l=F(e);f<l;f++){var d=e[f],c=n?n(d,f,e):d;t&&!n?((!f||s!==c)&&a.push(d),s=c):n?B(s,c)||(s.push(c),a.push(d)):B(a,d)||a.push(d)}return a}var _n=b(function(e){return De(U(e,!0,!0))});function no(e){for(var t=[],n=arguments.length,i=0,a=F(e);i<a;i++){var s=e[i];if(!B(t,s)){var f;for(f=1;f<n&&B(arguments[f],s);f++);f===n&&t.push(s)}}return t}function Le(e){for(var t=e&&lt(e,F).length||0,n=Array(t),i=0;i<t;i++)n[i]=Ae(e,i);return n}var wn=b(Le);function io(e,t){for(var n={},i=0,a=F(e);i<a;i++)t?n[e[i]]=t[i]:n[e[i][0]]=e[i][1];return n}function so(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var i=Math.max(Math.ceil((t-e)/n),0),a=Array(i),s=0;s<i;s++,e+=n)a[s]=e;return a}function ao(e,t){if(t==null||t<1)return[];for(var n=[],i=0,a=e.length;i<a;)n.push(j.call(e,i,i+=t));return n}function Be(e,t){return e._chain?x(t).chain():t}function ht(e){return N($e(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var i=[this._wrapped];return No.apply(i,arguments),Be(this,n.apply(x,i))}}),x}N(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=ke[e];x.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),Be(this,n)}});N(["concat","join","slice"],function(e){var t=ke[e];x.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),Be(this,n)}});var An=x;var uo=ht(fo);uo._=uo;var O=uo;var Si=function(e){return!e||typeof e=="function"?e:JSON.parse(JSON.stringify(e))},H=Si;var bi=["start","count","end","page","index_limit","total_pages","total_available","page_limit"],Xt=bi;var Qt=class{constructor(t){this.values={count:0,end:0,index_limit:1/0,page:0,page_limit:1/0,start:0,total_available:void 0,total_pages:void 0},this.set(t)}set(t){let n=Object.keys(t);if(["index_limit","total_pages"].forEach(i=>{if(n.includes(i))throw new Error(`Cannot set ${i} (it is a calculated value)`)}),n.includes("start")&&n.includes("end")&&n.includes("count"))throw new Error("Cannot set start, end, and count all at the same time");if(n.includes("page")&&(n.includes("start")||n.includes("end")))throw new Error("Cannot set page as well as the start and/or end");if(n.forEach(i=>{i!=="end"&&(this.values[i]=t[i])}),n.includes("page")&&(this.values.start=this.values.count*(this.values.page-1)),n.includes("end")){if(this.values.start>=t.end)throw new Error("The start value cannot be greater than the end value");n.includes("count")?this.values.start=Math.max(0,t.end-(this.values.count-1)):this.values.count=t.end-this.values.start+1,this.values.end=t.end}else{let i=this.values.start+this.values.count-1;this.values.end=i<this.values.start?this.values.end:i}if(typeof this.values.total_available=="number"&&this.values.total_available>0&&(this.values.index_limit=this.values.total_available-1),this.values.count>0&&this.values.start%this.values.count===0&&(this.values.page=Math.floor(this.values.start/this.values.count)+1,typeof this.values.total_available=="number"&&(this.values.total_pages=Math.ceil(this.values.total_available/this.values.count),this.values.page_limit=this.values.total_pages)),!("start"in this.values)||!("count"in this.values))throw new Error("Not enough information given to create Paginator");return this}get(t){return this.values[t]}};Qt.getPossibleKeys=Xt;var gt=Qt;var lo=class e{constructor(t,n){this.start=Math.max(Math.min(t,n),0),this.end=Math.max(Math.max(t,n),0)}inSection(t){return t>=this.start&&t<=this.end}overlaps(t){return this.inSection(t.start)||this.inSection(t.end)}calcLength(){return this.end-this.start+1}shifted(t,n=t){return new e(this.start+t,this.end+n)}expanded(t){return this.shifted(-t,t)}},ue=lo;var po=class e{static paginatorKeys=gt.getPossibleKeys;constructor(t){this.paginator=new gt({start:t.start,count:t.count}),this.queryInfo=H(t),e.paginatorKeys.forEach(n=>{delete this.queryInfo[n]}),this.queryInfo.request_id=this.queryInfo.request_id||0}get(t){return e.paginatorKeys.includes(t)?this.paginator.get(t):this.queryInfo[t]}set(t){let n={...t},i={...t};return e.paginatorKeys.forEach(a=>{a in t?delete i[a]:delete n[a]}),Object.keys(i).length>0&&(this.paginator.set({total_available:void 0}),typeof i.request_id!="number"&&(this.queryInfo.request_id+=1)),this.paginator.set(n),this.queryInfo={...this.queryInfo,...i},this}clone(){let t=H(this.queryInfo);return t.start=this.paginator.get("start"),t.count=this.paginator.get("count"),new e(t)}toSection(){return new ue(this.get("start"),this.get("end"))}toLimitSection(){return new ue(this.get("start"),this.get("index_limit"))}toJSON(){return{uid:this.get("uid"),request_id:this.get("request_id"),start:this.get("start"),count:this.get("count"),field_tree:this.get("field_tree"),facets:this.get("facets"),sort:this.get("sort"),settings:this.get("settings"),raw_query:this.get("raw_query")}}},Wt=po;var Ti={cache_size:{},connection_attempts:3,datastores_url:"",default_cache_size:20,init_attempts:3,message_formats:{failed_init:"Failed to initialize Pride",failed_record_load:"Failed to load $1",failed_search_run:"Failed to search $1"},ms_between_attempts:1500,obnoxious:!1},D=Ti;var Fi=(e,t,...n)=>{D.obnoxious&&console.log(`[Pride: ${e}] ${t}`,...n)},Q=Fi;var $i=function(e){let t={};this.clear=i=>(delete t[i],this),this.clearAll=()=>(t={},this);let n=i=>(t[i]??=[],t[i]);this.add=(i,a)=>(n(a).push(i),this),this.remove=(i,a)=>(t[a]=n(a).filter(s=>i!==s),this),this.apply=(i,a=[])=>(n(i).forEach(s=>{s?.(...a)}),this),this.call=(i,...a)=>(this.apply(i,a),this),typeof e=="function"&&e.call(this)},te=$i;var Ci=new te(function(){this.addObserver=this.add,this.removeObserver=this.remove,this.clearObservers=this.clear,this.add=this.remove=this.clear=void 0,this.sendMessage=e=>(e.summary&&(e.class=e.class||"info",e.details=e.details||"",this.call(e.class,e),Q("Messenger","MESSAGE SENT",e)),this),this.sendMessageArray=e=>(e&&e.length>0&&e.forEach(t=>{this.sendMessage(t)}),this),this.preset=function(e){}}),z=Ci;var Mi=function(e,t){this.datastore=e.datastore,this.query=e.query||this.datastore.baseQuery();let n=this,i=e.requestFunc||this.datastore.runQuery,a=e.starting_results||[],s=e.cache_size||D.cache_size[this.datastore.uid]||D.default_cache_size;this.log=function(...h){let _=["Search ("+n.datastore.get("uid")+")",...h];Q.apply(window,_)},this.set=function(h){return n.query.set(h),n.setDataChanged?.apply(this),O.isEmpty(O.omit(h,Xt))||(a=[]),n},this.run=function(h){return n.resultsChanged?.apply(this),O.isUndefined(h)&&(h=s),f(c(n.query.toSection().expanded(h))),n},this.results=function(){return E(new ue(n.query.get("start"),Math.min(n.query.get("end"),n.query.get("index_limit"))))};let f=function(h){if(n.log("REQUESTING",h),n.log("TOTAL AVAILABLE (pre-request)",n.query.get("total_available")),h&&n.query.toLimitSection().overlaps(h)){n.log("Sending query...");let _=n.query.clone().set({start:h.start,count:h.calcLength()});i({query:_,failure_message:z.preset("failed_search_run",n.datastore.get("metadata").name),success:function(C){if(C.request.request_id===n.query.get("request_id")){d(C),l(C.response,_.get("start"));let W=C.response.length;W!==0&&W<_.get("count")&&f(h.shifted(W,0))}}})}else n.runDataChanged?.apply(this)},l=function(h,_){let C=!1;n.log("NEW RECORDS",h),O.each(h,function(W,ze){let me=ze+_;O.isUndefined(a[me])&&(a[me]=n.createItem?.apply(this,[W]),n.query.toSection().inSection(me)&&(C=!0))}),n.log("CACHE LENGTH",a.length),(C||O.isEmpty(h))&&n.resultsChanged?.apply(this)},d=function(h){n.datastore.update(h.datastore);let _=O.omit(h.new_request,"start","count");_.specialists=h.specialists,_.total_available=h.total_available,n.query.set(_),n.runDataChanged?.apply(this)},c=function(h){let _=E(h),C=O.indexOf(_,void 0);if(C!==-1){let W=h.start+O.lastIndexOf(_,void 0);return C+=h.start,new ue(C,W)}},E=function(h){let _=[];for(let C=h.start;C<=h.end;C++)_.push(a[C]);return _},S=!1,v=[],y=[];this.clearAllObservers=function(){return O.each(v,function(h){h.clearAll()}),n.initialize_observables?.apply(this),n},this.getMute=function(){return S},this.setMute=function(h){return h!==S&&(S=h,n.muteChanged?.apply(this),S||O.each(y,function(_){_.notify()})),n},this.createObservable=function(h,_,C){let W=new te(function(){let ze=this.add,me=this.call;v.push(this),C||y.push(this),this.add=function(ie){return(!n.muted||C)&&ie(_()),ze(ie,"observers"),this},this.notify=function(){if(!n.muted||C){let ie=_();n.log("NOTIFY ("+h+")",ie),me("observers",ie)}return this}});return n[h+"Changed"]=W.notify,t[h+"Observers"]=W,n},this.createObservable("mute",this.getMute,!0).createObservable("setData",function(){t.getData()}).createObservable("runData",function(){t.getData()}).createObservable("results",this.results),t.set=function(h){return n.set(h),t},t.run=function(h){return n.run(h),t},t.nextPage=function(h){let _=n.query.get("page");return O.isNumber(_)&&_<n.query.get("page_limit")&&(t.set({page:_+1}),t.run(h)),t},t.prevPage=function(h){let _=n.query.get("page");return O.isNumber(_)&&_>1&&(t.set({page:_-1}),t.run(h)),t}},Jt=Mi;var En=pi(On());var Rn=function(e){if(Q("Request","Sending HTTP request..."),Q("Request","URL",e.url),Q("Request","CONTENT",JSON.stringify(e.query)),!e.url)throw new Error("No URL given to Pride.Util.request()");let t="get";e.query&&(t="post"),typeof e.attempts!="number"&&(e.attempts=D.connection_attempts),e.attempts-=1,(0,En.default)({url:e.url,data:JSON.stringify(e.query),type:"json",method:t,contentType:"application/json",withCredentials:!0,error:function(n){e.attempts<=0?(Q("Request","ERROR",n),e.failure?.(n),z.sendMessage({summary:e.failure_message,class:"error"})):(Q("Request","Trying request again..."),window.setTimeout(()=>Rn(e),D.ms_between_attempts))},success:function(n){Q("Request","SUCCESS",n),e.success?.(n),z.sendMessage({summary:e.success_message,class:"success"}),z.sendMessageArray(n.messages)}})},le=Rn;var co=class{#e;#o=!1;#n=!1;#i=!1;#t;requestOptions;constructor(t={}){this.#e=new te,this.requestOptions=t}request=t=>(this.#e.add(t.success,"success").add(t.failure,"failure"),this.#o?this.#r():this.#a(),this);#r=t=>{this.#t=t??this.#t,this.#n?this.#s("success"):this.#i&&this.#s("failure")};#a=()=>{this.#o=!0;let t=this.requestOptions;le({url:typeof t.url=="function"?t.url():t.url,attempts:t.attempts?.()||D.connection_attempts,failure_message:t.failure_message?.(),failure:n=>{this.#i=!0,t.before_failure?.(n),this.#r(n),t.after_failure?.(n)},success:n=>{this.#n=!0,t.before_success?.(n),n=typeof t.edit_response=="function"?t.edit_response(n):n,this.#r(n),t.after_success?.(n)}})};#s=t=>{this.#e.call(t,this.#t).clearAll()}},pe=co;var mo=class{constructor(t){this.data=t}getResourceAccess=t=>{let n=t.fields.find(i=>i.uid==="resource_access");return n?.value??n};translateData=t=>[this.getResourceAccess(this.data)].concat(t);getData=t=>{t(this.translateData(this.data.holdings))}},xt=mo;var ho=class{constructor(t,n){this.barcode=t,this.data=n,this.requestBuffer=new pe({url:`${this.getGetThisUrl(n)}/${this.barcode}`,failure_message:z.preset("failed_get_this_load",n.names[0]),edit_response:i=>(this.data=this.translateData(i),this.data)})}getGetThisUrl(t){return t.fields.find(i=>i.uid==="get_this_url")?.value}translateData(t){return t}getData(t){this.requestBuffer.request({success:t})}},yt=ho;var Pi=e=>{let t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},vt=Pi;var Ni={selectedRecords:null,engine:null,updateSelectedRecords(e){return this.selectedRecords||={mirlyn:{},articlesplus:{},databases:{},journals:{},website:{}},Array.isArray(e)?e.forEach(t=>{this.selectedRecords[t.datastore]||={},this.selectedRecords[t.datastore][t.uid]=!0}):Object.keys(e).forEach(t=>{this.selectedRecords[t]={},e[t].forEach(n=>{this.selectedRecords[t][n.uid]=!0})}),this},registerEngine(e){return e?(this.engine=e,this.updateSelectedRecords(this.engine.listRecords()),this.engine.addObserver(t=>{this.updateSelectedRecords(t)}),this):this},selected(e){return!!this.selectedRecords?.[e.datastore]?.[e.uid]}},Gt=Ni;var Di=function(e){let t=new pe({url:e.source,failure_message:z.preset("failed_record_load",e.names[0]),edit_response:function(f){return e=s(f),e}}),n=null,i={};this.placeHold=function(f,l,d,c){this.renderFull(function(E){let v=le({url:[function(){let y;return O.each(E.fields,function(h){h.uid==="holdings_url"&&(y=h.value)}),y}(),f,l,d].join("/"),query:!0,failure:function(y){z.sendMessage({summary:"Failed to place hold",class:"error"})},success:c,failure_message:"placeHold failed",success_message:"placeHold succeeded"});console.log(v)})},this.getHoldings=function(f){n?n.getData(f):e.complete?(n=new xt(e),n.getData(f)):t.request({success:function(l){n=new xt(l),n.getData(f)}})},this.getGetThis=function(f,l){i[f]?i[f].getData(l):e.complete?(i[f]=new yt(f,e),i[f].getData(l)):t.request({success:function(d){i[f]=new yt(f,d),i[f].getData(l)}})},this.renderPart=function(f){a(f)},this.renderPartThenCache=function(f){a(f),t.request()},this.renderFull=function(f){e.complete?a(f):t.request({success:f})},this.renderCSL=function(f){this.renderFull(function(l){let d;O.each(l.fields,function(c){c.uid==="csl"&&(d=c.value)}),f(d)})};let a=function(f){f(O.omit(e,"complete","source"),e.complete)},s=function(f){return f.fields=O.map(f.fields,function(l){return l.value_has_html||(l.value=vt(l.value)),O.omit(l,"value_has_html")}),f.names_have_html||(f.names=O.map(f.names,function(l){return vt(l)})),f.uid?f.status=200:f.status=404,Gt.selected(f)&&(f.selected=!0),O.omit(f,"names_have_html")};e=s(e)},He=Di;var Li=function(e){this.uid=e.data.uid,this.getData=()=>e.data,this.getResults=()=>e.results;let t=!1;this.getMute=()=>t,this.setMute=i=>(t=i,this),this.observables=[];let n=i=>{let a=this;return new te(function(){a.observables.push(this);let f=this.add;this.add=function(l){return a.muted||l(i()),f(l,"observers"),this}})};this.resultsObservers=n(this.getResults),this.setDataObservers=this.runDataObservers=n(this.getData),this.clearAllObservers=()=>(this.observables.forEach(i=>{i.clearAll()}),this)},Kt=Li;var Bi=function(e){let t=this,n=new Jt(e,this);n.createItem=function(s){return new He(s)};let i=[],a=[];this.getFacets=function(){return i},this.uid=n.datastore.get("uid"),this.getData=function(){return{uid:t.uid,metadata:H(n.datastore.get("metadata")),sorts:H(n.datastore.get("sorts")),selected_sort:n.query.get("sort"),facets:H(n.query.get("facets")),fields:H(n.datastore.get("fields")),field_tree:H(n.query.get("field_tree")),settings:H(n.query.get("settings")),page:n.query.get("page"),count:n.query.get("count"),total_available:n.query.get("total_available"),total_pages:n.query.get("total_pages"),page_limit:n.query.get("page_limit"),specialists:H(n.query.get("specialists"))}},this.getResults=n.results,n.initialize_observables=function(){t.runDataObservers.add(function(){let s=n.datastore.get("facets");JSON.stringify(a)!==JSON.stringify(s)&&(O.each(i,function(f){f.clearAllObservers()}),i=O.map(s,function(f){return new Kt({data:O.omit(f,"values"),results:f.values})}),a=s,t.facetsObservers.notify())})},this.getMute=n.getMute,this.setMute=function(s){return O.each(i,function(f){f.setMute(s)}),n.setMute(s),t},n.createObservable("facets",this.getFacets).initialize_observables()},Yt=Bi;var Hi=(e,t=[],n)=>function(i,...a){this.type=e,this.childTypes=t,this.value=i.trim(),this.children=a.length===1&&Array.isArray(a[0])?a[0]:a,this.addChild=s=>{if(!this.childTypes.includes(s.type))throw new Error(`Not a valid child for a ${this.type}`);return this.children.push(s),this},this.contains=s=>this.matches(s)?this:this.children.find(f=>f.contains(s))??!1,this.matches=s=>{let f=Object.keys(s).filter(d=>d!=="children"),{children:l=[]}=s;return f.every(d=>this[d]===s[d])&&l.every(d=>this.children.some(c=>c.matches(d)))},this.serialize=()=>i,this.serializedChildren=()=>this.children.map(s=>s.serialize()),this.toJSON=()=>({type:this.type,value:this.value,children:this.children.map(f=>f.toJSON())}),typeof n=="function"&&n.call(this)},ce=Hi;var zi=ce("field_boolean",["field_boolean","field"],function(){if(!["AND","OR","NOT"].includes(this.value))throw new Error("Not a valid boolean value");this.serializedChildren=()=>this.children.map(e=>e.type===this.type||e.type==="literal"&&e.value.match(/\s/)?`(${e.serialize()})`:e.serialize()),this.serialize=()=>this.serializedChildren().join(` ${this.value} `)}),_t=zi;var Ii=ce("field",["value_boolean","literal","tag","special"],function(){this.serialize=()=>`${this.value}: (${this.serializedChildren().join(" ")})`}),Zt=Ii;var ki=ce("literal"),jt=ki;var Ui=function(e){e=H(e),this.baseQuery=function(){return new Wt({uid:e.uid,sort:e.default_sort,start:0,count:0,settings:{},field_tree:t(),facets:O.reduce(e.facets,function(n,i){return i.required&&!i.fixed&&(n[i.uid]=i.default_value),n},{})})},this.baseSearch=function(){return new Yt({datastore:this})},this.runQuery=function(n){return n.url=e.url,le(n),this},this.get=function(n){return e[n]},this.update=function(n){O.extend(e,n)};let t=function(n){n=n||new _t("AND");let i=O.reduce(e.fields,function(a,s){if((s.required||s.fixed)&&!a.contains({type:"field",value:s.uid})){let f=new Zt(s.uid,new jt(s.default_value));return O.isMatch(a,{type:"field_boolean",value:"AND"})?a.addChild(f):new _t("AND",a,f)}return a},n);return i.matches({type:"field_boolean",children:[]})?{}:i}},er=Ui;var Vi={Datastore:er,DatastoreSearch:Yt,FacetSearch:Kt,GetThis:yt,Holdings:xt,log:Q,nodeFactory:ce,Query:Wt,Record:He,SearchBase:Jt},Sn=Vi;var Xi={Field:Zt,FieldBoolean:_t,Literal:jt},ne=Xi;var Qi=new pe({url:()=>D.datastores_url,attempts:()=>D.init_attempts,failure_message:()=>z.preset("failed_init"),edit_response:()=>{},before_success:e=>{D.default_institution=e.default_institution,D.affiliation=e.affiliation,Re.array=e.response.map(t=>new er(t))}}).request,bn=Qi;var Wi=function(){"use strict";function e(i,a){function s(){this.constructor=i}s.prototype=a.prototype,i.prototype=new s}function t(i,a,s,f){this.message=i,this.expected=a,this.found=s,this.location=f,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(i,a){let s={literal:function(v){return'"'+l(v.text)+'"'},class:function(v){let y="",h;for(h=0;h<v.parts.length;h++)y+=v.parts[h]instanceof Array?d(v.parts[h][0])+"-"+d(v.parts[h][1]):d(v.parts[h]);return"["+(v.inverted?"^":"")+y+"]"},any:function(v){return"any character"},end:function(v){return"end of input"},other:function(v){return v.description}};function f(v){return v.charCodeAt(0).toString(16).toUpperCase()}function l(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+f(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+f(y)})}function d(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(y){return"\\x0"+f(y)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(y){return"\\x"+f(y)})}function c(v){return s[v.type](v)}function E(v){let y=new Array(v.length),h,_;for(h=0;h<v.length;h++)y[h]=c(v[h]);if(y.sort(),y.length>0){for(h=1,_=1;h<y.length;h++)y[h-1]!==y[h]&&(y[_]=y[h],_++);y.length=_}switch(y.length){case 1:return y[0];case 2:return y[0]+" or "+y[1];default:return y.slice(0,-1).join(", ")+", or "+y[y.length-1]}}function S(v){return v?'"'+l(v)+'"':"end of input"}return"Expected "+E(i)+" but "+S(a)+" found."};function n(i,a){a=a!==void 0?a:{};let s={},f={start:qo},l=qo,d=function(u){return u},c=function(u,p,g){return new ne.FieldBoolean(p,u,g)},E=function(u,p){return p?[u,p]:u},S=function(u){return u},v=":",y=Oe(":",!1),h=function(u,p){return new ne.Field(u,p)},_=function(u){return new ne.Field(ii,u)},C=function(u){return u.join("")},W=function(u,p){return p?u.concat(p):u},ze=function(u,p){return[new ne.Literal(u+p.join(""))]},me=function(u){return[new ne.Literal(u.join(""))]},ie=function(u){return[new ne.Literal('"'+u.join("")+'"')]},Mn=function(u){return u},go="AND",Pn=Oe("AND",!1),xo="OR",Nn=Oe("OR",!1),yo="NOT",Dn=Oe("NOT",!1),Ln="'",Bn=Oe("'",!1),Hn=/^[^']/,zn=Ee(["'"],!0,!1),In='"',kn=Oe('"',!1),Un=/^[^"]/,Vn=Ee(['"'],!0,!1),Xn=/^[^ \t\r\n:'"()]/,Qn=Ee([" ","	","\r",`
`,":","'",'"',"(",")"],!0,!1),Wn=/^[^ \t\r\n():]/,Jn=Ee([" ","	","\r",`
`,"(",")",":"],!0,!1),Gn=/^[^ \t\r\n'"():]/,Kn=Ee([" ","	","\r",`
`,"'",'"',"(",")",":"],!0,!1),vo=/^[ \t\r\n]/,_o=Ee([" ","	","\r",`
`],!1,!1),m=0,wt=[{line:1,column:1}],Z=0,tr=[],M=0;if("startRule"in a){if(!(a.startRule in f))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');l=f[a.startRule]}function Oe(u,p){return{type:"literal",text:u,ignoreCase:p}}function Ee(u,p,g){return{type:"class",parts:u,inverted:p,ignoreCase:g}}function Yn(){return{type:"end"}}function wo(u){let p=wt[u],g;if(p)return p;for(g=u-1;!wt[g];)g--;for(p=wt[g],p={line:p.line,column:p.column};g<u;)i.charCodeAt(g)===10?(p.line++,p.column=1):p.column++,g++;return wt[u]=p,p}function Ao(u,p){let g=wo(u),A=wo(p);return{start:{offset:u,line:g.line,column:g.column},end:{offset:p,line:A.line,column:A.column}}}function I(u){m<Z||(m>Z&&(Z=m,tr=[]),tr.push(u))}function Zn(u,p,g){return new t(t.buildMessage(u,p),u,p,g)}function qo(){let u,p,g;return u=m,p=Oo(),p!==s?(g=ni(),g!==s?(p=d(p),u=p):(m=u,u=s)):(m=u,u=s),u}function Oo(){let u,p,g,A,se,ar;return u=m,p=rr(),p!==s?(g=Ie(),g!==s?(A=oi(),A!==s?(se=Ie(),se!==s?(ar=Oo(),ar!==s?(p=c(p,A,ar),u=p):(m=u,u=s)):(m=u,u=s)):(m=u,u=s)):(m=u,u=s)):(m=u,u=s),u===s&&(u=Eo()),u}function Eo(){let u,p,g;return u=rr(),u===s&&(u=m,p=rr(),p!==s?(g=jn(),g===s&&(g=null),g!==s?(p=E(p,g),u=p):(m=u,u=s)):(m=u,u=s)),u}function jn(){let u,p,g;return u=m,p=Ie(),p!==s?(g=Eo(),g!==s?(p=S(g),u=p):(m=u,u=s)):(m=u,u=s),u}function rr(){let u,p,g,A;return u=m,p=ei(),p!==s?(i.charCodeAt(m)===58?(g=v,m++):(g=s,M===0&&I(y)),g!==s?(A=or(),A!==s?(p=h(p,A),u=p):(m=u,u=s)):(m=u,u=s)):(m=u,u=s),u===s&&(u=m,p=or(),p!==s&&(p=_(p)),u=p),u}function ei(){let u,p,g;if(u=m,p=[],g=Fo(),g!==s)for(;g!==s;)p.push(g),g=Fo();else p=s;return p!==s&&(p=C(p)),u=p,u}function or(){let u,p,g;return u=m,p=ri(),p!==s?(g=ti(),g===s&&(g=null),g!==s?(p=W(p,g),u=p):(m=u,u=s)):(m=u,u=s),u}function ti(){let u,p,g;return u=m,p=Ie(),p!==s?(g=or(),g!==s?(p=S(g),u=p):(m=u,u=s)):(m=u,u=s),u}function ri(){let u,p,g,A,se;if(u=m,p=m,M++,g=nr(),M--,g===s?p=void 0:(m=p,p=s),p!==s)if(g=ir(),g!==s){if(A=[],se=$o(),se!==s)for(;se!==s;)A.push(se),se=$o();else A=s;A!==s?(p=ze(g,A),u=p):(m=u,u=s)}else m=u,u=s;else m=u,u=s;if(u===s){if(u=m,p=m,M++,g=nr(),M--,g===s?p=void 0:(m=p,p=s),p!==s){if(g=[],A=ir(),A!==s)for(;A!==s;)g.push(A),A=ir();else g=s;g!==s?(p=me(g),u=p):(m=u,u=s)}else m=u,u=s;if(u===s){if(u=m,p=Ro(),p!==s){for(g=[],A=So();A!==s;)g.push(A),A=So();g!==s?(A=Ro(),A!==s?(p=ie(g),u=p):(m=u,u=s)):(m=u,u=s)}else m=u,u=s;if(u===s)if(u=m,p=bo(),p!==s){for(g=[],A=To();A!==s;)g.push(A),A=To();g!==s?(A=bo(),A!==s?(p=ie(g),u=p):(m=u,u=s)):(m=u,u=s)}else m=u,u=s}}return u}function oi(){let u,p;return u=m,p=nr(),p!==s&&(p=Mn(p)),u=p,u}function nr(){let u;return i.substr(m,3)===go?(u=go,m+=3):(u=s,M===0&&I(Pn)),u===s&&(i.substr(m,2)===xo?(u=xo,m+=2):(u=s,M===0&&I(Nn)),u===s&&(i.substr(m,3)===yo?(u=yo,m+=3):(u=s,M===0&&I(Dn)))),u}function Ro(){let u;return i.charCodeAt(m)===39?(u=Ln,m++):(u=s,M===0&&I(Bn)),u}function So(){let u;return Hn.test(i.charAt(m))?(u=i.charAt(m),m++):(u=s,M===0&&I(zn)),u}function bo(){let u;return i.charCodeAt(m)===34?(u=In,m++):(u=s,M===0&&I(kn)),u}function To(){let u;return Un.test(i.charAt(m))?(u=i.charAt(m),m++):(u=s,M===0&&I(Vn)),u}function Fo(){let u;return Xn.test(i.charAt(m))?(u=i.charAt(m),m++):(u=s,M===0&&I(Qn)),u}function $o(){let u;return Wn.test(i.charAt(m))?(u=i.charAt(m),m++):(u=s,M===0&&I(Jn)),u}function ir(){let u;return Gn.test(i.charAt(m))?(u=i.charAt(m),m++):(u=s,M===0&&I(Kn)),u}function Ie(){let u,p;if(u=[],vo.test(i.charAt(m))?(p=i.charAt(m),m++):(p=s,M===0&&I(_o)),p!==s)for(;p!==s;)u.push(p),vo.test(i.charAt(m))?(p=i.charAt(m),m++):(p=s,M===0&&I(_o));else u=s;return u}function ni(){let u;return u=Ie(),u===s&&(u=null),u}let ii=a.defaultFieldName||"all_fields",sr=l();if(sr!==s&&m===i.length)return sr;throw sr!==s&&m<i.length&&I(Yn()),Zn(tr,Z<i.length?i.charAt(Z):null,Z<i.length?Ao(Z,Z+1):Ao(Z,Z))}return{SyntaxError:t,parse:n}}(),Tn=Wi;var Ji=(e,t,n=()=>{})=>{let i=new He({complete:!1,source:`${Re.get(e)?.get("url")??""}/record/${t}`,names:[void 0]});return i.renderFull(n),i},Fn=Ji;var Gi={deepClone:H,escape:vt,FuncBuffer:te,Paginator:gt,request:le,RequestBuffer:pe,Section:ue},$n=Gi;var Ki={AllDatastores:Re,Core:Sn,FieldTree:ne,init:bn,Messenger:z,Parser:Tn,PreferenceEngine:Gt,requestRecord:Fn,Settings:D,Util:$n},Cn=Ki;
/*! Bundled license information:

reqwest/reqwest.js:
  (*!
    * Reqwest! A general purpose XHR connection manager
    * license MIT (c) Dustin Diaz 2015
    * https://github.com/ded/reqwest
    *)
*/
