var vi=Object.create;var Ot=Object.defineProperty;var _i=Object.getOwnPropertyDescriptor;var wi=Object.getOwnPropertyNames;var Ai=Object.getPrototypeOf,Ri=Object.prototype.hasOwnProperty;var Dn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ln=(e,t)=>{for(var n in t)Ot(e,n,{get:t[n],enumerable:!0})},Bn=(e,t,n,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let a of wi(t))!Ri.call(e,a)&&a!==n&&Ot(e,a,{get:()=>t[a],enumerable:!(s=_i(t,a))||s.enumerable});return e};var Ei=(e,t,n)=>(n=e!=null?vi(Ai(e)):{},Bn(t||!e||!e.__esModule?Ot(n,"default",{value:e,enumerable:!0}):n,e)),qi=e=>Bn(Ot({},"__esModule",{value:!0}),e);var So=Dn(()=>{});var To=Dn((exports,module)=>{(function(e,t,n){typeof module<"u"&&module.exports?module.exports=n():typeof define=="function"&&define.amd?define(n):t[e]=n()})("reqwest",exports,function(){var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=So()}catch{throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}else return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){if(e._aborted)return n(e.request);if(e._timedOut)return n(e.request,"Request is aborted: timeout");e.request&&e.request[readyState]==4&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request))}}function setHeaders(e,t){var n=t.headers||{},s;n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var a=typeof FormData<"u"&&t.data instanceof FormData;!t.crossOrigin&&!n[requestedWith]&&(n[requestedWith]=defaultHeaders.requestedWith),!n[contentType]&&!a&&(n[contentType]=t.contentType||defaultHeaders.contentType);for(s in n)n.hasOwnProperty(s)&&"setRequestHeader"in e&&e.setRequestHeader(s,n[s])}function setCredentials(e,t){typeof t.withCredentials<"u"&&typeof e.withCredentials<"u"&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,s){var a=uniqid++,i=e.jsonpCallback||"callback",f=e.jsonpCallbackName||reqwest.getcallbackPrefix(a),l=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),d=s.match(l),m=doc.createElement("script"),R=0,O=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return d?d[3]==="?"?s=s.replace(l,"$1="+f):f=d[3]:s=urlappend(s,i+"="+f),context[f]=generalCallback,m.type="text/javascript",m.src=s,m.async=!0,typeof m.onreadystatechange<"u"&&!O&&(m.htmlFor=m.id="_reqwest_"+a),m.onload=m.onreadystatechange=function(){if(m[readyState]&&m[readyState]!=="complete"&&m[readyState]!=="loaded"||R)return!1;m.onload=m.onreadystatechange=null,m.onclick&&m.onclick(),t(lastValue),lastValue=void 0,head.removeChild(m),R=1},head.appendChild(m),{abort:function(){m.onload=m.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(m),R=1}}}function getRequest(e,t){var n=this.o,s=(n.method||"GET").toUpperCase(),a=typeof n=="string"?n:n.url,i=n.processData!==!1&&n.data&&typeof n.data!="string"?reqwest.toQueryString(n.data):n.data||null,f,l=!1;return(n.type=="jsonp"||s=="GET")&&i&&(a=urlappend(a,i),i=null),n.type=="jsonp"?handleJsonp(n,e,t,a):(f=n.xhr&&n.xhr(n)||xhr(n),f.open(s,a,n.async!==!1),setHeaders(f,n),setCredentials(f,n),context[xDomainRequest]&&f instanceof context[xDomainRequest]?(f.onload=e,f.onerror=t,f.onprogress=function(){},l=!0):f.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(f),l?setTimeout(function(){f.send(i)},200):f.send(i),f)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(e!==null){if(e.match("json"))return"json";if(e.match("javascript"))return"js";if(e.match("text"))return"html";if(e.match("xml"))return"xml"}}function init(o,fn){this.url=typeof o=="string"?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)});function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp=type!=="jsonp"?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML;break}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.request=getRequest.call(this,success,error)}Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}};function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,`\r
`):""}function serial(e,t){var n=e.name,s=e.tagName.toLowerCase(),a=function(m){m&&!m.disabled&&t(n,normalize(m.attributes.value&&m.attributes.value.specified?m.value:m.text))},i,f,l,d;if(!(e.disabled||!n))switch(s){case"input":/reset|button|image|file/i.test(e.type)||(i=/checkbox/i.test(e.type),f=/radio/i.test(e.type),l=e.value,(!(i||f)||e.checked)&&t(n,normalize(i&&l===""?"on":l)));break;case"textarea":t(n,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one")a(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(d=0;e.length&&d<e.length;d++)e.options[d].selected&&a(e.options[d]);break}}function eachFormElement(){var e=this,t,n,s=function(a,i){var f,l,d;for(f=0;f<i.length;f++)for(d=a[byTag](i[f]),l=0;l<d.length;l++)serial(d[l],e)};for(n=0;n<arguments.length;n++)t=arguments[n],/input|select|textarea/i.test(t.tagName)&&serial(t,e),s(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(arguments.length===0)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),e=="map"?t=serializeHash:e=="array"?t=reqwest.serializeArray:t=serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,s,a=t||!1,i=[],f=encodeURIComponent,l=function(d,m){m=typeof m=="function"?m():m??"",i[i.length]=f(d)+"="+f(m)};if(isArray(e))for(s=0;e&&s<e.length;s++)l(e[s].name,e[s].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],a,l);return i.join("&").replace(/%20/g,"+")};function buildParams(e,t,n,s){var a,i,f,l=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)f=t[i],n||l.test(e)?s(e,f):buildParams(e+"["+(typeof f=="object"?i:"")+"]",f,n,s);else if(t&&t.toString()==="[object Object]")for(a in t)buildParams(e+"["+a+"]",t[a],n,s);else s(e,t)}return reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})});var Cs={};Ln(Cs,{Pride:()=>Qo});module.exports=qi(Cs);var yn={};Ln(yn,{VERSION:()=>Ft,after:()=>jr,all:()=>Qt,allKeys:()=>Z,any:()=>Wt,assign:()=>ve,before:()=>ut,bind:()=>zt,bindAll:()=>co,chain:()=>Wr,chunk:()=>xn,clone:()=>Dr,collect:()=>Q,compact:()=>pn,compose:()=>Zr,constant:()=>Ye,contains:()=>H,countBy:()=>vo,create:()=>$r,debounce:()=>Kr,default:()=>qo,defaults:()=>Lt,defer:()=>po,delay:()=>kt,detect:()=>De,difference:()=>Gt,drop:()=>qe,each:()=>D,escape:()=>ao,every:()=>Qt,extend:()=>Dt,extendOwn:()=>ve,filter:()=>Y,find:()=>De,findIndex:()=>$e,findKey:()=>lt,findLastIndex:()=>It,findWhere:()=>en,first:()=>vt,flatten:()=>mn,foldl:()=>Xt,foldr:()=>tn,forEach:()=>D,functions:()=>Me,get:()=>ot,groupBy:()=>xo,has:()=>Br,head:()=>vt,identity:()=>we,include:()=>H,includes:()=>H,indexBy:()=>yo,indexOf:()=>Ut,initial:()=>yt,inject:()=>Xt,intersection:()=>dn,invert:()=>rt,invoke:()=>go,isArguments:()=>Se,isArray:()=>U,isArrayBuffer:()=>Mt,isBoolean:()=>Je,isDataView:()=>ge,isDate:()=>Wn,isElement:()=>Er,isEmpty:()=>br,isEqual:()=>Sr,isError:()=>Gn,isFinite:()=>Fr,isFunction:()=>C,isMap:()=>no,isMatch:()=>tt,isNaN:()=>Ke,isNull:()=>Rr,isNumber:()=>St,isObject:()=>B,isRegExp:()=>Vn,isSet:()=>io,isString:()=>be,isSymbol:()=>Tt,isTypedArray:()=>Pt,isUndefined:()=>Ge,isWeakMap:()=>oo,isWeakSet:()=>so,iteratee:()=>Ne,keys:()=>w,last:()=>cn,lastIndexOf:()=>ho,map:()=>Q,mapObject:()=>Hr,matcher:()=>ne,matches:()=>ne,max:()=>ht,memoize:()=>Gr,methods:()=>Me,min:()=>on,mixin:()=>_t,negate:()=>Re,noop:()=>st,now:()=>le,object:()=>hn,omit:()=>wo,once:()=>mo,pairs:()=>Pr,partial:()=>ce,partition:()=>_o,pick:()=>Vt,pluck:()=>Ee,property:()=>Ae,propertyOf:()=>zr,random:()=>Pe,range:()=>gn,reduce:()=>Xt,reduceRight:()=>tn,reject:()=>rn,rest:()=>qe,restArguments:()=>b,result:()=>Xr,sample:()=>xt,select:()=>Y,shuffle:()=>sn,size:()=>un,some:()=>Wt,sortBy:()=>an,sortedIndex:()=>pt,tail:()=>qe,take:()=>vt,tap:()=>Lr,template:()=>Ur,templateSettings:()=>lo,throttle:()=>Jr,times:()=>kr,toArray:()=>gt,toPath:()=>Bt,transpose:()=>Be,unescape:()=>uo,union:()=>Ro,uniq:()=>Le,unique:()=>Le,uniqueId:()=>Qr,unzip:()=>Be,values:()=>G,where:()=>nn,without:()=>Ao,wrap:()=>Yr,zip:()=>Eo});var Ft="1.13.6",gr=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},Ve=Array.prototype,bt=Object.prototype,xr=typeof Symbol<"u"?Symbol.prototype:null,Hn=Ve.push,re=Ve.slice,ie=bt.toString,zn=bt.hasOwnProperty,yr=typeof ArrayBuffer<"u",kn=typeof DataView<"u",In=Array.isArray,vr=Object.keys,_r=Object.create,wr=yr&&ArrayBuffer.isView,Un=isNaN,Xn=isFinite,Ct=!{toString:null}.propertyIsEnumerable("toString"),Ar=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Qn=Math.pow(2,53)-1;function b(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),s=Array(n),a=0;a<n;a++)s[a]=arguments[a+t];switch(t){case 0:return e.call(this,s);case 1:return e.call(this,arguments[0],s);case 2:return e.call(this,arguments[0],arguments[1],s)}var i=Array(t+1);for(a=0;a<t;a++)i[a]=arguments[a];return i[t]=s,e.apply(this,i)}}function B(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function Rr(e){return e===null}function Ge(e){return e===void 0}function Je(e){return e===!0||e===!1||ie.call(e)==="[object Boolean]"}function Er(e){return!!(e&&e.nodeType===1)}function q(e){var t="[object "+e+"]";return function(n){return ie.call(n)===t}}var be=q("String");var St=q("Number");var Wn=q("Date");var Vn=q("RegExp");var Gn=q("Error");var Tt=q("Symbol");var Mt=q("ArrayBuffer");var Jn=q("Function"),Oi=gr.document&&gr.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Oi!="function"&&(Jn=function(e){return typeof e=="function"||!1});var C=Jn;var qr=q("Object");var Nt=kn&&qr(new DataView(new ArrayBuffer(8))),Ce=typeof Map<"u"&&qr(new Map);var Fi=q("DataView");function bi(e){return e!=null&&C(e.getInt8)&&Mt(e.buffer)}var ge=Nt?bi:Fi;var U=In||q("Array");function $(e,t){return e!=null&&zn.call(e,t)}var Or=q("Arguments");(function(){Or(arguments)||(Or=function(e){return $(e,"callee")})})();var Se=Or;function Fr(e){return!Tt(e)&&Xn(e)&&!isNaN(parseFloat(e))}function Ke(e){return St(e)&&Un(e)}function Ye(e){return function(){return e}}function Ze(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=Qn}}function je(e){return function(t){return t?.[e]}}var xe=je("byteLength");var Kn=Ze(xe);var Ci=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Si(e){return wr?wr(e)&&!ge(e):Kn(e)&&Ci.test(ie.call(e))}var Pt=yr?Si:Ye(!1);var S=je("length");function Ti(e){for(var t={},n=e.length,s=0;s<n;++s)t[e[s]]=!0;return{contains:function(a){return t[a]===!0},push:function(a){return t[a]=!0,e.push(a)}}}function et(e,t){t=Ti(t);var n=Ar.length,s=e.constructor,a=C(s)&&s.prototype||bt,i="constructor";for($(e,i)&&!t.contains(i)&&t.push(i);n--;)i=Ar[n],i in e&&e[i]!==a[i]&&!t.contains(i)&&t.push(i)}function w(e){if(!B(e))return[];if(vr)return vr(e);var t=[];for(var n in e)$(e,n)&&t.push(n);return Ct&&et(e,t),t}function br(e){if(e==null)return!0;var t=S(e);return typeof t=="number"&&(U(e)||be(e)||Se(e))?t===0:S(w(e))===0}function tt(e,t){var n=w(t),s=n.length;if(e==null)return!s;for(var a=Object(e),i=0;i<s;i++){var f=n[i];if(t[f]!==a[f]||!(f in a))return!1}return!0}function y(e){if(e instanceof y)return e;if(!(this instanceof y))return new y(e);this._wrapped=e}y.VERSION=Ft;y.prototype.value=function(){return this._wrapped};y.prototype.valueOf=y.prototype.toJSON=y.prototype.value;y.prototype.toString=function(){return String(this._wrapped)};function $t(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,xe(e))}var Yn="[object DataView]";function Cr(e,t,n,s){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var a=typeof e;return a!=="function"&&a!=="object"&&typeof t!="object"?!1:Zn(e,t,n,s)}function Zn(e,t,n,s){e instanceof y&&(e=e._wrapped),t instanceof y&&(t=t._wrapped);var a=ie.call(e);if(a!==ie.call(t))return!1;if(Nt&&a=="[object Object]"&&ge(e)){if(!ge(t))return!1;a=Yn}switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return xr.valueOf.call(e)===xr.valueOf.call(t);case"[object ArrayBuffer]":case Yn:return Zn($t(e),$t(t),n,s)}var i=a==="[object Array]";if(!i&&Pt(e)){var f=xe(e);if(f!==xe(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;i=!0}if(!i){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,d=t.constructor;if(l!==d&&!(C(l)&&l instanceof l&&C(d)&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],s=s||[];for(var m=n.length;m--;)if(n[m]===e)return s[m]===t;if(n.push(e),s.push(t),i){if(m=e.length,m!==t.length)return!1;for(;m--;)if(!Cr(e[m],t[m],n,s))return!1}else{var R=w(e),O;if(m=R.length,w(t).length!==m)return!1;for(;m--;)if(O=R[m],!($(t,O)&&Cr(e[O],t[O],n,s)))return!1}return n.pop(),s.pop(),!0}function Sr(e,t){return Cr(e,t)}function Z(e){if(!B(e))return[];var t=[];for(var n in e)t.push(n);return Ct&&et(e,t),t}function Te(e){var t=S(e);return function(n){if(n==null)return!1;var s=Z(n);if(S(s))return!1;for(var a=0;a<t;a++)if(!C(n[e[a]]))return!1;return e!==Nr||!C(n[Tr])}}var Tr="forEach",jn="has",Mr=["clear","delete"],eo=["get",jn,"set"],to=Mr.concat(Tr,eo),Nr=Mr.concat(eo),ro=["add"].concat(Mr,Tr,jn);var no=Ce?Te(to):q("Map");var oo=Ce?Te(Nr):q("WeakMap");var io=Ce?Te(ro):q("Set");var so=q("WeakSet");function G(e){for(var t=w(e),n=t.length,s=Array(n),a=0;a<n;a++)s[a]=e[t[a]];return s}function Pr(e){for(var t=w(e),n=t.length,s=Array(n),a=0;a<n;a++)s[a]=[t[a],e[t[a]]];return s}function rt(e){for(var t={},n=w(e),s=0,a=n.length;s<a;s++)t[e[n[s]]]=n[s];return t}function Me(e){var t=[];for(var n in e)C(e[n])&&t.push(n);return t.sort()}function ye(e,t){return function(n){var s=arguments.length;if(t&&(n=Object(n)),s<2||n==null)return n;for(var a=1;a<s;a++)for(var i=arguments[a],f=e(i),l=f.length,d=0;d<l;d++){var m=f[d];(!t||n[m]===void 0)&&(n[m]=i[m])}return n}}var Dt=ye(Z);var ve=ye(w);var Lt=ye(Z,!0);function Mi(){return function(){}}function nt(e){if(!B(e))return{};if(_r)return _r(e);var t=Mi();t.prototype=e;var n=new t;return t.prototype=null,n}function $r(e,t){var n=nt(e);return t&&ve(n,t),n}function Dr(e){return B(e)?U(e)?e.slice():Dt({},e):e}function Lr(e,t){return t(e),e}function Bt(e){return U(e)?e:[e]}y.toPath=Bt;function j(e){return y.toPath(e)}function _e(e,t){for(var n=t.length,s=0;s<n;s++){if(e==null)return;e=e[t[s]]}return n?e:void 0}function ot(e,t,n){var s=_e(e,j(t));return Ge(s)?n:s}function Br(e,t){t=j(t);for(var n=t.length,s=0;s<n;s++){var a=t[s];if(!$(e,a))return!1;e=e[a]}return!!n}function we(e){return e}function ne(e){return e=ve({},e),function(t){return tt(t,e)}}function Ae(e){return e=j(e),function(t){return _e(t,e)}}function ee(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(s){return e.call(t,s)};case 3:return function(s,a,i){return e.call(t,s,a,i)};case 4:return function(s,a,i,f){return e.call(t,s,a,i,f)}}return function(){return e.apply(t,arguments)}}function it(e,t,n){return e==null?we:C(e)?ee(e,t,n):B(e)&&!U(e)?ne(e):Ae(e)}function Ne(e,t){return it(e,t,1/0)}y.iteratee=Ne;function F(e,t,n){return y.iteratee!==Ne?y.iteratee(e,t):it(e,t,n)}function Hr(e,t,n){t=F(t,n);for(var s=w(e),a=s.length,i={},f=0;f<a;f++){var l=s[f];i[l]=t(e[l],l,e)}return i}function st(){}function zr(e){return e==null?st:function(t){return ot(e,t)}}function kr(e,t,n){var s=Array(Math.max(0,e));t=ee(t,n,1);for(var a=0;a<e;a++)s[a]=t(a);return s}function Pe(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var le=Date.now||function(){return new Date().getTime()};function at(e){var t=function(i){return e[i]},n="(?:"+w(e).join("|")+")",s=RegExp(n),a=RegExp(n,"g");return function(i){return i=i==null?"":""+i,s.test(i)?i.replace(a,t):i}}var Ht={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var ao=at(Ht);var fo=rt(Ht);var uo=at(fo);var lo=y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Ir=/(.)^/,Ni={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},Pi=/\\|'|\r|\n|\u2028|\u2029/g;function $i(e){return"\\"+Ni[e]}var Di=/^\s*(\w|\$)+\s*$/;function Ur(e,t,n){!t&&n&&(t=n),t=Lt({},t,y.templateSettings);var s=RegExp([(t.escape||Ir).source,(t.interpolate||Ir).source,(t.evaluate||Ir).source].join("|")+"|$","g"),a=0,i="__p+='";e.replace(s,function(m,R,O,_,v){return i+=e.slice(a,v).replace(Pi,$i),a=v+m.length,R?i+=`'+
((__t=(`+R+`))==null?'':_.escape(__t))+
'`:O?i+=`'+
((__t=(`+O+`))==null?'':__t)+
'`:_&&(i+=`';
`+_+`
__p+='`),m}),i+=`';
`;var f=t.variable;if(f){if(!Di.test(f))throw new Error("variable is not a bare identifier: "+f)}else i=`with(obj||{}){
`+i+`}
`,f="obj";i=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+i+`return __p;
`;var l;try{l=new Function(f,"_",i)}catch(m){throw m.source=i,m}var d=function(m){return l.call(this,m,y)};return d.source="function("+f+`){
`+i+"}",d}function Xr(e,t,n){t=j(t);var s=t.length;if(!s)return C(n)?n.call(e):n;for(var a=0;a<s;a++){var i=e?.[t[a]];i===void 0&&(i=n,a=s),e=C(i)?i.call(e):i}return e}var Li=0;function Qr(e){var t=++Li+"";return e?e+t:t}function Wr(e){var t=y(e);return t._chain=!0,t}function ft(e,t,n,s,a){if(!(s instanceof t))return e.apply(n,a);var i=nt(e.prototype),f=e.apply(i,a);return B(f)?f:i}var Vr=b(function(e,t){var n=Vr.placeholder,s=function(){for(var a=0,i=t.length,f=Array(i),l=0;l<i;l++)f[l]=t[l]===n?arguments[a++]:t[l];for(;a<arguments.length;)f.push(arguments[a++]);return ft(e,s,this,this,f)};return s});Vr.placeholder=y;var ce=Vr;var zt=b(function(e,t,n){if(!C(e))throw new TypeError("Bind must be called on a function");var s=b(function(a){return ft(e,s,t,this,n.concat(a))});return s});var T=Ze(S);function X(e,t,n,s){if(s=s||[],!t&&t!==0)t=1/0;else if(t<=0)return s.concat(e);for(var a=s.length,i=0,f=S(e);i<f;i++){var l=e[i];if(T(l)&&(U(l)||Se(l)))if(t>1)X(l,t-1,n,s),a=s.length;else for(var d=0,m=l.length;d<m;)s[a++]=l[d++];else n||(s[a++]=l)}return s}var co=b(function(e,t){t=X(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var s=t[n];e[s]=zt(e[s],e)}return e});function Gr(e,t){var n=function(s){var a=n.cache,i=""+(t?t.apply(this,arguments):s);return $(a,i)||(a[i]=e.apply(this,arguments)),a[i]};return n.cache={},n}var kt=b(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)});var po=ce(kt,y,1);function Jr(e,t,n){var s,a,i,f,l=0;n||(n={});var d=function(){l=n.leading===!1?0:le(),s=null,f=e.apply(a,i),s||(a=i=null)},m=function(){var R=le();!l&&n.leading===!1&&(l=R);var O=t-(R-l);return a=this,i=arguments,O<=0||O>t?(s&&(clearTimeout(s),s=null),l=R,f=e.apply(a,i),s||(a=i=null)):!s&&n.trailing!==!1&&(s=setTimeout(d,O)),f};return m.cancel=function(){clearTimeout(s),l=0,s=a=i=null},m}function Kr(e,t,n){var s,a,i,f,l,d=function(){var R=le()-a;t>R?s=setTimeout(d,t-R):(s=null,n||(f=e.apply(l,i)),s||(i=l=null))},m=b(function(R){return l=this,i=R,a=le(),s||(s=setTimeout(d,t),n&&(f=e.apply(l,i))),f});return m.cancel=function(){clearTimeout(s),s=i=l=null},m}function Yr(e,t){return ce(t,e)}function Re(e){return function(){return!e.apply(this,arguments)}}function Zr(){var e=arguments,t=e.length-1;return function(){for(var n=t,s=e[t].apply(this,arguments);n--;)s=e[n].call(this,s);return s}}function jr(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function ut(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var mo=ce(ut,2);function lt(e,t,n){t=F(t,n);for(var s=w(e),a,i=0,f=s.length;i<f;i++)if(a=s[i],t(e[a],a,e))return a}function ct(e){return function(t,n,s){n=F(n,s);for(var a=S(t),i=e>0?0:a-1;i>=0&&i<a;i+=e)if(n(t[i],i,t))return i;return-1}}var $e=ct(1);var It=ct(-1);function pt(e,t,n,s){n=F(n,s,1);for(var a=n(t),i=0,f=S(e);i<f;){var l=Math.floor((i+f)/2);n(e[l])<a?i=l+1:f=l}return i}function mt(e,t,n){return function(s,a,i){var f=0,l=S(s);if(typeof i=="number")e>0?f=i>=0?i:Math.max(i+l,f):l=i>=0?Math.min(i+1,l):i+l+1;else if(n&&i&&l)return i=n(s,a),s[i]===a?i:-1;if(a!==a)return i=t(re.call(s,f,l),Ke),i>=0?i+f:-1;for(i=e>0?f:l-1;i>=0&&i<l;i+=e)if(s[i]===a)return i;return-1}}var Ut=mt(1,$e,pt);var ho=mt(-1,It);function De(e,t,n){var s=T(e)?$e:lt,a=s(e,t,n);if(a!==void 0&&a!==-1)return e[a]}function en(e,t){return De(e,ne(t))}function D(e,t,n){t=ee(t,n);var s,a;if(T(e))for(s=0,a=e.length;s<a;s++)t(e[s],s,e);else{var i=w(e);for(s=0,a=i.length;s<a;s++)t(e[i[s]],i[s],e)}return e}function Q(e,t,n){t=F(t,n);for(var s=!T(e)&&w(e),a=(s||e).length,i=Array(a),f=0;f<a;f++){var l=s?s[f]:f;i[f]=t(e[l],l,e)}return i}function dt(e){var t=function(n,s,a,i){var f=!T(n)&&w(n),l=(f||n).length,d=e>0?0:l-1;for(i||(a=n[f?f[d]:d],d+=e);d>=0&&d<l;d+=e){var m=f?f[d]:d;a=s(a,n[m],m,n)}return a};return function(n,s,a,i){var f=arguments.length>=3;return t(n,ee(s,i,4),a,f)}}var Xt=dt(1);var tn=dt(-1);function Y(e,t,n){var s=[];return t=F(t,n),D(e,function(a,i,f){t(a,i,f)&&s.push(a)}),s}function rn(e,t,n){return Y(e,Re(F(t)),n)}function Qt(e,t,n){t=F(t,n);for(var s=!T(e)&&w(e),a=(s||e).length,i=0;i<a;i++){var f=s?s[i]:i;if(!t(e[f],f,e))return!1}return!0}function Wt(e,t,n){t=F(t,n);for(var s=!T(e)&&w(e),a=(s||e).length,i=0;i<a;i++){var f=s?s[i]:i;if(t(e[f],f,e))return!0}return!1}function H(e,t,n,s){return T(e)||(e=G(e)),(typeof n!="number"||s)&&(n=0),Ut(e,t,n)>=0}var go=b(function(e,t,n){var s,a;return C(t)?a=t:(t=j(t),s=t.slice(0,-1),t=t[t.length-1]),Q(e,function(i){var f=a;if(!f){if(s&&s.length&&(i=_e(i,s)),i==null)return;f=i[t]}return f==null?f:f.apply(i,n)})});function Ee(e,t){return Q(e,Ae(t))}function nn(e,t){return Y(e,ne(t))}function ht(e,t,n){var s=-1/0,a=-1/0,i,f;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=T(e)?e:G(e);for(var l=0,d=e.length;l<d;l++)i=e[l],i!=null&&i>s&&(s=i)}else t=F(t,n),D(e,function(m,R,O){f=t(m,R,O),(f>a||f===-1/0&&s===-1/0)&&(s=m,a=f)});return s}function on(e,t,n){var s=1/0,a=1/0,i,f;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=T(e)?e:G(e);for(var l=0,d=e.length;l<d;l++)i=e[l],i!=null&&i<s&&(s=i)}else t=F(t,n),D(e,function(m,R,O){f=t(m,R,O),(f<a||f===1/0&&s===1/0)&&(s=m,a=f)});return s}var Bi=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function gt(e){return e?U(e)?re.call(e):be(e)?e.match(Bi):T(e)?Q(e,we):G(e):[]}function xt(e,t,n){if(t==null||n)return T(e)||(e=G(e)),e[Pe(e.length-1)];var s=gt(e),a=S(s);t=Math.max(Math.min(t,a),0);for(var i=a-1,f=0;f<t;f++){var l=Pe(f,i),d=s[f];s[f]=s[l],s[l]=d}return s.slice(0,t)}function sn(e){return xt(e,1/0)}function an(e,t,n){var s=0;return t=F(t,n),Ee(Q(e,function(a,i,f){return{value:a,index:s++,criteria:t(a,i,f)}}).sort(function(a,i){var f=a.criteria,l=i.criteria;if(f!==l){if(f>l||f===void 0)return 1;if(f<l||l===void 0)return-1}return a.index-i.index}),"value")}function se(e,t){return function(n,s,a){var i=t?[[],[]]:{};return s=F(s,a),D(n,function(f,l){var d=s(f,l,n);e(i,f,d)}),i}}var xo=se(function(e,t,n){$(e,n)?e[n].push(t):e[n]=[t]});var yo=se(function(e,t,n){e[n]=t});var vo=se(function(e,t,n){$(e,n)?e[n]++:e[n]=1});var _o=se(function(e,t,n){e[n?0:1].push(t)},!0);function un(e){return e==null?0:T(e)?e.length:w(e).length}function ln(e,t,n){return t in n}var Vt=b(function(e,t){var n={},s=t[0];if(e==null)return n;C(s)?(t.length>1&&(s=ee(s,t[1])),t=Z(e)):(s=ln,t=X(t,!1,!1),e=Object(e));for(var a=0,i=t.length;a<i;a++){var f=t[a],l=e[f];s(l,f,e)&&(n[f]=l)}return n});var wo=b(function(e,t){var n=t[0],s;return C(n)?(n=Re(n),t.length>1&&(s=t[1])):(t=Q(X(t,!1,!1),String),n=function(a,i){return!H(t,i)}),Vt(e,n,s)});function yt(e,t,n){return re.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function vt(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:yt(e,e.length-t)}function qe(e,t,n){return re.call(e,t==null||n?1:t)}function cn(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:qe(e,Math.max(0,e.length-t))}function pn(e){return Y(e,Boolean)}function mn(e,t){return X(e,t,!1)}var Gt=b(function(e,t){return t=X(t,!0,!0),Y(e,function(n){return!H(t,n)})});var Ao=b(function(e,t){return Gt(e,t)});function Le(e,t,n,s){Je(t)||(s=n,n=t,t=!1),n!=null&&(n=F(n,s));for(var a=[],i=[],f=0,l=S(e);f<l;f++){var d=e[f],m=n?n(d,f,e):d;t&&!n?((!f||i!==m)&&a.push(d),i=m):n?H(i,m)||(i.push(m),a.push(d)):H(a,d)||a.push(d)}return a}var Ro=b(function(e){return Le(X(e,!0,!0))});function dn(e){for(var t=[],n=arguments.length,s=0,a=S(e);s<a;s++){var i=e[s];if(!H(t,i)){var f;for(f=1;f<n&&H(arguments[f],i);f++);f===n&&t.push(i)}}return t}function Be(e){for(var t=e&&ht(e,S).length||0,n=Array(t),s=0;s<t;s++)n[s]=Ee(e,s);return n}var Eo=b(Be);function hn(e,t){for(var n={},s=0,a=S(e);s<a;s++)t?n[e[s]]=t[s]:n[e[s][0]]=e[s][1];return n}function gn(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var s=Math.max(Math.ceil((t-e)/n),0),a=Array(s),i=0;i<s;i++,e+=n)a[i]=e;return a}function xn(e,t){if(t==null||t<1)return[];for(var n=[],s=0,a=e.length;s<a;)n.push(re.call(e,s,s+=t));return n}function He(e,t){return e._chain?y(t).chain():t}function _t(e){return D(Me(e),function(t){var n=y[t]=e[t];y.prototype[t]=function(){var s=[this._wrapped];return Hn.apply(s,arguments),He(this,n.apply(y,s))}}),y}D(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=Ve[e];y.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),He(this,n)}});D(["concat","join","slice"],function(e){var t=Ve[e];y.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),He(this,n)}});var qo=y;var vn=_t(yn);vn._=vn;var p=vn;var Hi={array:[],get:function(e){return p.find(this.array,function(t){return t.get("uid")===e})},newSearch:function(e){let t=p.find(this.array,function(n){return n.get("uid")===e});return t?t.baseSearch():void 0},each:function(e){return p.each(this.array,e),this}},ze=Hi;var zi=function(e,t,n){return Array.prototype.slice.call(e,t,n)},W=zi;var ki=function(e,t,n){return function(s){this.children=W(arguments,1),this.children.length===1&&Array.isArray(this.children[0])&&(this.children=this.children[0]),this.type=e,this.value=s.trim(),this.childTypes=t||[],this.validIfEmpty=!0,this.addChild=function(a){if(p.find(this.childTypes,function(i){return a.type===i}))this.children.push(a);else throw new Error("Not a valid child for a "+this.type);return this},this.contains=function(a){return this.matches(a)?this:p.isEmpty(this.children)?!1:p.find(this.children,function(i){return i.contains(a)})},this.matches=function(a){let i=this,f=a.children||[];return p.every(p.omit(a,"children"),function(l,d){return i[d]===l})&&p.every(f,function(l){return p.some(f,function(d){return l.matches(d)})})},this.serialize=function(){return s},this.serializedChildren=function(){return p.chain(this.children).map(function(a){return a.serialize()}).compact().value()},this.toJSON=function(){return p.mapObject(p.pick(this,"value","children","type"),function(a,i){return i==="children"?p.map(a,function(f){return f.toJSON()}):a})},p.isFunction(n)&&n.call(this)}},V=ki;var Ii=function(e,t){return V(e,t,function(){if(!p.contains(["AND","OR","NOT"],this.value))throw new Error("Not a valid boolean value");this.serialize=function(){return this.serializedChildren().join(" "+this.value+" ")},this.serializedChildren=function(){let n=this;return p.chain(n.children).map(function(s){return s.type===n.type||s.type==="literal"&&s.value.match(/\s/)?"("+s.serialize()+")":s.serialize()}).compact().value()}})},ke=Ii;var Oo=function(e){if(p.isFunction(e))return e;{let t=!1;return p.isArray(e)?t="map":p.isObject(e)&&(t="mapObject"),t?p[t](e,function(n){return Oo(n)}):p.clone(e)}},z=Oo;var Ui=["start","count","end","page","index_limit","total_pages","total_available","page_limit"],Jt=Ui;var Fo=function(e){this.set=function(n){if(p.has(n,"total_pages"))throw new Error("Can not set total_pages (it is a calculated value)");if(p.has(n,"index_limit"))throw new Error("Can not set index_limit (it is a calculated value)");if(p.intersection(["start","end","count"],p.keys(n)).length>2)throw new Error("Can not set start, end and count all at the same time");if(p.has(n,"page")&&(p.has(n,"start")||p.has(n,"end")))throw new Error("Can not set page as well as the start and/or end");if(p.extend(t,p.omit(n,"end")),p.has(n,"page")&&(t.start=(t.count||0)*(t.page-1)),p.has(n,"end")){if(p.has(n,"count"))t.start=Math.max(0,n.end-(t.count-1));else if(t.start<=n.end)t.count=n.end-t.start+1;else throw new Error("The start value can not be greater than the end value");t.end=n.end}else{let s=t.start+t.count-1;t.end=s<t.start?void 0:s}if(p.isNumber(t.total_available)?t.total_available>0?t.index_limit=t.total_available-1:t.index_limit=void 0:t.index_limit=1/0,t.count>0&&t.start%t.count===0?(t.page=Math.floor(t.start/t.count)+1,p.isNumber(t.total_available)?(t.total_pages=Math.ceil(t.total_available/t.count),t.page_limit=t.total_pages):(t.total_pages=void 0,t.page_limit=1/0)):(t.page=void 0,t.total_pages=void 0,t.page_limit=void 0),!p.has(t,"start")||!p.has(t,"count"))throw new Error("Not enough information given to create Paginater");return this},this.get=function(n){return t[n]};let t={};this.set(e)};Fo.getPossibleKeys=Jt;var Ie=Fo;var bo=function(e,t){this.start=Math.max(Math.min(e,t),0),this.end=Math.max(Math.max(e,t),0),this.inSection=function(n){return n>=this.start&&n<=this.end},this.overlaps=function(n){return this.inSection(n.start)||this.inSection(n.end)},this.calcLength=function(){return this.end-this.start+1},this.expanded=function(n){return this.shifted(-1*n,n)},this.shifted=function(n,s){return p.isNumber(s)||(s=n),new bo(this.start+n,this.end+s)}},pe=bo;var Co=function(e){let t=new Ie({start:e.start,count:e.count}),n=Ie.getPossibleKeys;e=p.omit(z(e),n),e.request_id=e.request_id||0,this.get=function(s){return Ie.getPossibleKeys.includes(s)?t.get(s):e[s]},this.set=function(s){let a=p.pick(s,n),i=p.omit(s,n);return p.isEmpty(i)||(t.set({total_available:void 0}),p.isNumber(i.request_id)||(e.request_id+=1)),t.set(a),p.extend(e,i),this},this.clone=function(){let s=z(e);return s.start=t.get("start"),s.count=t.get("count"),new Co(s)},this.toSection=function(){return new pe(this.get("start"),this.get("end"))},this.toLimitSection=function(){return new pe(this.get("start"),this.get("index_limit"))},this.toJSON=function(){return{uid:this.get("uid"),request_id:this.get("request_id"),start:this.get("start"),count:this.get("count"),field_tree:this.get("field_tree"),facets:this.get("facets"),sort:this.get("sort"),settings:this.get("settings"),raw_query:this.get("raw_query")}}},Kt=Co;var Xi={cache_size:{},connection_attempts:3,datastores_url:"",default_cache_size:20,init_attempts:3,message_formats:{failed_init:"Failed to initialize Pride",failed_record_load:"Failed to load $1",failed_search_run:"Failed to search $1"},ms_between_attempts:1500,obnoxious:!1},L=Xi;var Qi=function(e,t){if(L.obnoxious){let n=W(arguments,2);n.unshift("[Pride: "+e+"] "+t),console.log.apply(console,n)}},J=Qi;var Wi=function(e){return p.isFunction(e)?e.apply(this,W(arguments,1)):e},M=Wi;var Vi=function(e){return!!e&&(Object.prototype.toString.call(e)==="[object Function]"||typeof e=="function"||e instanceof Function)},Yt=Vi;var Gi=function(e,t){return Yt(e)?e.apply(this,t):e},Ue=Gi;var Ji=function(e){let t={},n=this,s=function(a){return p.has(t,a)||(t[a]=[]),t[a]};this.add=function(a,i){return s(i).push(a),n},this.remove=function(a,i){return t[i]=p.reject(s(i),function(f){return a===f}),n},this.clear=function(a){return delete t[a],n},this.clearAll=function(){return t={},n},this.call=function(a){return n.apply(a,W(arguments,1)),n},this.apply=function(a,i){return p.each(s(a),function(f){Ue(f,i)}),n},p.isFunction(e)&&e.call(this)},oe=Ji;var Ki=new oe(function(){let e=this.call;this.addObserver=this.add,this.removeObserver=this.remove,this.clearObservers=this.clear,this.call=void 0,this.add=void 0,this.remove=void 0,this.clear=void 0,this.sendMessage=function(t){return t.summary&&(t.class=t.class||"info",t.details=t.details||"",e(t.class,t),J("Messenger","MESSAGE SENT",t)),this},this.sendMessageArray=function(t){let n=this;return p.each(t,function(s){n.sendMessage(s)}),this},this.preset=function(t){}}),k=Ki;var Yi=function(e,t){this.datastore=e.datastore,this.query=e.query||this.datastore.baseQuery();let n=this,s=e.requestFunc||this.datastore.runQuery,a=e.starting_results||[],i=e.cache_size||L.cache_size[this.datastore.uid]||L.default_cache_size;this.log=function(){let g=W(arguments);g.unshift("Search ("+n.datastore.get("uid")+")"),J.apply(window,g)},this.set=function(g){return n.query.set(g),M(n.setDataChanged),p.isEmpty(p.omit(g,Jt))||(a=[]),n},this.run=function(g){return M(n.resultsChanged),p.isUndefined(g)&&(g=i),f(m(n.query.toSection().expanded(g))),n},this.results=function(){return R(new pe(n.query.get("start"),Math.min(n.query.get("end"),n.query.get("index_limit"))))};let f=function(g){if(n.log("REQUESTING",g),n.log("TOTAL AVAILABLE (pre-request)",n.query.get("total_available")),g&&n.query.toLimitSection().overlaps(g)){n.log("Sending query...");let A=n.query.clone().set({start:g.start,count:g.calcLength()});s({query:A,failure_message:k.preset("failed_search_run",n.datastore.get("metadata").name),success:function(N){if(N.request.request_id===n.query.get("request_id")){d(N),l(N.response,A.get("start"));let K=N.response.length;K!==0&&K<A.get("count")&&f(g.shifted(K,0))}}})}else M(n.runDataChanged)},l=function(g,A){let N=!1;n.log("NEW RECORDS",g),p.each(g,function(K,Qe){let he=Qe+A;p.isUndefined(a[he])&&(a[he]=M(n.createItem,K),n.query.toSection().inSection(he)&&(N=!0))}),n.log("CACHE LENGTH",a.length),(N||p.isEmpty(g))&&M(n.resultsChanged)},d=function(g){n.datastore.update(g.datastore);let A=p.omit(g.new_request,"start","count");A.specialists=g.specialists,A.total_available=g.total_available,n.query.set(A),M(n.runDataChanged)},m=function(g){let A=R(g),N=p.indexOf(A,void 0);if(N!==-1){let K=g.start+p.lastIndexOf(A,void 0);return N+=g.start,new pe(N,K)}},R=function(g){let A=[];for(let N=g.start;N<=g.end;N++)A.push(a[N]);return A},O=!1,_=[],v=[];this.clearAllObservers=function(){return p.each(_,function(g){g.clearAll()}),M(n.initialize_observables),n},this.getMute=function(){return O},this.setMute=function(g){return g!==O&&(O=g,M(n.muteChanged()),O||p.each(v,function(A){A.notify()})),n},this.createObservable=function(g,A,N){let K=new oe(function(){let Qe=this.add,he=this.call;_.push(this),N||v.push(this),this.add=function(fe){return(!n.muted||N)&&fe(A()),Qe(fe,"observers"),this},this.notify=function(){if(!n.muted||N){let fe=A();n.log("NOTIFY ("+g+")",fe),he("observers",fe)}return this}});return n[g+"Changed"]=K.notify,t[g+"Observers"]=K,n},this.createObservable("mute",this.getMute,!0).createObservable("setData",function(){t.getData()}).createObservable("runData",function(){t.getData()}).createObservable("results",this.results),t.set=function(g){return n.set(g),t},t.run=function(g){return n.run(g),t},t.nextPage=function(g){let A=n.query.get("page");return p.isNumber(A)&&A<n.query.get("page_limit")&&(t.set({page:A+1}),t.run(g)),t},t.prevPage=function(g){let A=n.query.get("page");return p.isNumber(A)&&A>1&&(t.set({page:A-1}),t.run(g)),t}},Zt=Yi;var Mo=Ei(To());var No=function(e){if(J("Request","Sending HTTP request..."),J("Request","URL",e.url),J("Request","CONTENT",JSON.stringify(e.query)),!e.url)throw new Error("No URL given to Pride.Util.request()");let t="get";e.query&&(t="post"),p.isNumber(e.attempts)||(e.attempts=L.connection_attempts),e.attempts-=1,(0,Mo.default)({url:e.url,data:JSON.stringify(e.query),type:"json",method:t,contentType:"application/json",withCredentials:!0,error:function(n){e.attempts<=0?(J("Request","ERROR",n),M(e.failure,n),k.sendMessage({summary:e.failure_message,class:"error"})):(J("Request","Trying request again..."),window.setTimeout(function(){No(e)},L.ms_between_attempts))},success:function(n){J("Request","SUCCESS",n),M(e.success,n),k.sendMessage({summary:e.success_message,class:"success"}),k.sendMessageArray(n.messages)}})},me=No;var Zi=function(e){e=e||{};let t=new oe,n=!1,s=!1,a=!1,i;this.request=function(m){return t.add(m.success,"success").add(m.failure,"failure"),n?f():l(),this};let f=function(m){i=m||i,s?d("success"):a&&d("failure")},l=function(){n=!0,me({url:M(e.url),attempts:M(e.attempts)||L.connection_attempts,failure_message:M(e.failure_message),failure:function(m){a=!0,M(e.before_failure,m),f(m),M(e.after_failure,m)},success:function(m){s=!0,M(e.before_success,m),p.isFunction(e.edit_response)&&(m=e.edit_response(m)),f(m),M(e.after_success,m)}})},d=function(m){t.call(m,i).clearAll()}},de=Zi;var ji=function(e){this.data=e;let t=function(s){let a=s.fields.find(i=>i.uid==="resource_access");return a&&a.value?a.value:a},n=function(s){return[t(e)].concat(s)};this.getData=function(s){M(s,n(this.data.holdings))}},wt=ji;var es=function(e,t){this.barcode=e,this.data=t;let n=function(i){let f;return p.each(i.fields,function(l){l.uid==="get_this_url"&&(f=l.value)}),f},s=new de({url:n(t)+"/"+this.barcode,failure_message:k.preset("failed_get_this_load",t.names[0]),edit_response:function(i){return t=a(i),t}}),a=function(i){return i};this.getData=function(i){s.request({success:i})}},At=es;var ts=function(e){let t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},Rt=ts;var rs={selectedRecords:null,engine:null,selected:function(e){return this.engine?(this.selectedRecords[e.datastore]||{})[e.uid]:!1},registerEngine:function(e){return this.engine=e,e?(this.updateSelectedRecords(this.engine.listRecords()),this.engine.addObserver(function(t){return function(n){t.updateSelectedRecords(n)}}(this)),this):this},blankList:function(){return{mirlyn:{},articlesplus:{},databases:{},journals:{},website:{}}},updateSelectedRecords:function(e){if(this.selectedRecords=this.selectedRecords||this.blankList(),e.forEach)return e.forEach(function(t){this.selectedRecords[t.datastore]=this.selectedRecords[t.datastore]||{},this.selectedRecords[t.datastore][t.uid]=!0},this),this;for(let t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this.selectedRecords[t]={},e[t].forEach(function(n){return function(s){this.selectedRecords[n][s.uid]=!0}}(t),this));return this}},jt=rs;var ns=function(e){let t=new de({url:e.source,failure_message:k.preset("failed_record_load",e.names[0]),edit_response:function(f){return e=i(f),e}}),n=null,s={};this.placeHold=function(f,l,d,m){this.renderFull(function(R){let _=me({url:[function(){let v;return p.each(R.fields,function(g){g.uid==="holdings_url"&&(v=g.value)}),v}(),f,l,d].join("/"),query:!0,failure:function(v){k.sendMessage({summary:"Failed to place hold",class:"error"})},success:m,failure_message:"placeHold failed",success_message:"placeHold succeeded"});console.log(_)})},this.getHoldings=function(f){n?n.getData(f):e.complete?(n=new wt(e),n.getData(f)):t.request({success:function(l){n=new wt(l),n.getData(f)}})},this.getGetThis=function(f,l){s[f]?s[f].getData(l):e.complete?(s[f]=new At(f,e),s[f].getData(l)):t.request({success:function(d){s[f]=new At(f,d),s[f].getData(l)}})},this.renderPart=function(f){a(f)},this.renderPartThenCache=function(f){a(f),t.request()},this.renderFull=function(f){e.complete?a(f):t.request({success:f})},this.renderCSL=function(f){this.renderFull(function(l){let d;p.each(l.fields,function(m){m.uid==="csl"&&(d=m.value)}),f(d)})};let a=function(f){f(p.omit(e,"complete","source"),e.complete)},i=function(f){return f.fields=p.map(f.fields,function(l){return l.value_has_html||(l.value=Rt(l.value)),p.omit(l,"value_has_html")}),f.names_have_html||(f.names=p.map(f.names,function(l){return Rt(l)})),f.uid?f.status=200:f.status=404,jt.selected(f)&&(f.selected=!0),p.omit(f,"names_have_html")};e=i(e)},Xe=ns;var Po=function(e,t){let n=p.isArray(e)&&p.isArray(t),s=p.isObject(e)&&p.isObject(t);return n&&t.length!==e.length||s&&p.keys(t).length!==p.keys(e).length?!1:n||s?p.every(t,function(a,i){return Po(e[i],a)}):e===t},er=Po;var os=function(e){let t=e.data,n=e.results;this.uid=t.uid,this.getData=function(){return t},this.getResults=function(){return n};let s=!1;this.getMute=function(){return s},this.setMute=function(f){return s=f,self};let a=[];this.clearAllObservers=function(){return p.each(a,function(f){f.clearAll()}),self};let i=function(f,l){return new oe(function(){let m=this.add,R=this.call;a.push(this),this.add=function(O){return self.muted||O(l()),m(O,"observers"),this},this.notify=function(){return self.muted||(t=l(),self.log("NOTIFY ("+f+")",t),R("observers",t)),this}})};this.resultsObservers=i("results",this.getResults),this.setDataObservers=i("setData",this.getData),this.runDataObservers=i("runData",this.getData)},tr=os;var is=function(e){let t=this,n=new Zt(e,this);n.createItem=function(i){return new Xe(i)};let s=[],a=[];this.getFacets=function(){return s},this.uid=n.datastore.get("uid"),this.getData=function(){return{uid:t.uid,metadata:z(n.datastore.get("metadata")),sorts:z(n.datastore.get("sorts")),selected_sort:n.query.get("sort"),facets:z(n.query.get("facets")),fields:z(n.datastore.get("fields")),field_tree:z(n.query.get("field_tree")),settings:z(n.query.get("settings")),page:n.query.get("page"),count:n.query.get("count"),total_available:n.query.get("total_available"),total_pages:n.query.get("total_pages"),page_limit:n.query.get("page_limit"),specialists:z(n.query.get("specialists"))}},this.getResults=n.results,n.initialize_observables=function(){t.runDataObservers.add(function(){let i=n.datastore.get("facets");er(a,i)||(p.each(s,function(f){f.clearAllObservers()}),s=p.map(i,function(f){return new tr({data:p.omit(f,"values"),results:f.values})}),a=i,t.facetsObservers.notify())})},this.getMute=n.getMute,this.setMute=function(i){return p.each(s,function(f){f.setMute(i)}),n.setMute(i),t},n.createObservable("facets",this.getFacets).initialize_observables()},rr=is;var ss=["field_boolean","field"],as=ke("field_boolean",ss),Et=as;var fs=["value_boolean","literal","tag","special"],us=V("field",fs,function(){this.serialize=function(){return this.value+": ("+this.serializedChildren().join(" ")+")"}}),nr=us;var ls=V("literal"),or=ls;var cs=function(e){e=z(e),this.baseQuery=function(){return new Kt({uid:e.uid,sort:e.default_sort,start:0,count:0,settings:{},field_tree:t(),facets:p.reduce(e.facets,function(n,s){return s.required&&!s.fixed&&(n[s.uid]=s.default_value),n},{})})},this.baseSearch=function(){return new rr({datastore:this})},this.runQuery=function(n){return n.url=e.url,me(n),this},this.get=function(n){return e[n]},this.update=function(n){p.extend(e,n)};let t=function(n){n=n||new Et("AND");let s=p.reduce(e.fields,function(a,i){if((i.required||i.fixed)&&!a.contains({type:"field",value:i.uid})){let f=new nr(i.uid,new or(i.default_value));return p.isMatch(a,{type:"field_boolean",value:"AND"})?a.addChild(f):new Et("AND",a,f)}return a},n);return s.matches({type:"field_boolean",children:[]})?{}:s}},ir=cs;var ps={boolNodeFactory:ke,Datastore:ir,DatastoreSearch:rr,FacetSearch:tr,GetThis:At,Holdings:wt,log:J,nodeFactory:V,Query:Kt,Record:Xe,SearchBase:Zt},$o=ps;var ms=function(){"use strict";function e(s,a){function i(){this.constructor=s}i.prototype=a.prototype,s.prototype=new i}function t(s,a,i,f){this.message=s,this.expected=a,this.found=i,this.location=f,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(s,a){let i={literal:function(_){return'"'+l(_.text)+'"'},class:function(_){let v="",g;for(g=0;g<_.parts.length;g++)v+=_.parts[g]instanceof Array?d(_.parts[g][0])+"-"+d(_.parts[g][1]):d(_.parts[g]);return"["+(_.inverted?"^":"")+v+"]"},any:function(_){return"any character"},end:function(_){return"end of input"},other:function(_){return _.description}};function f(_){return _.charCodeAt(0).toString(16).toUpperCase()}function l(_){return _.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+f(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+f(v)})}function d(_){return _.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(v){return"\\x0"+f(v)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(v){return"\\x"+f(v)})}function m(_){return i[_.type](_)}function R(_){let v=new Array(_.length),g,A;for(g=0;g<_.length;g++)v[g]=m(_[g]);if(v.sort(),v.length>0){for(g=1,A=1;g<v.length;g++)v[g-1]!==v[g]&&(v[A]=v[g],A++);v.length=A}switch(v.length){case 1:return v[0];case 2:return v[0]+" or "+v[1];default:return v.slice(0,-1).join(", ")+", or "+v[v.length-1]}}function O(_){return _?'"'+l(_)+'"':"end of input"}return"Expected "+R(s)+" but "+O(a)+" found."};function n(s,a){a=a!==void 0?a:{};let i={},f={start:Fn},l=Fn,d=function(u){return u},m=function(u,c,x){return new ae.FieldBoolean(c,u,x)},R=function(u,c){return c?[u,c]:u},O=function(u){return u},_=":",v=Oe(":",!1),g=function(u,c){return new ae.Field(u,c)},A=function(u){return new ae.Field(yi,u)},N=function(u){return u.join("")},K=function(u,c){return c?u.concat(c):u},Qe=function(u,c){return[new ae.Literal(u+c.join(""))]},he=function(u){return[new ae.Literal(u.join(""))]},fe=function(u){return[new ae.Literal('"'+u.join("")+'"')]},Wo=function(u){return u},_n="AND",Vo=Oe("AND",!1),wn="OR",Go=Oe("OR",!1),An="NOT",Jo=Oe("NOT",!1),Ko="'",Yo=Oe("'",!1),Zo=/^[^']/,jo=Fe(["'"],!0,!1),ei='"',ti=Oe('"',!1),ri=/^[^"]/,ni=Fe(['"'],!0,!1),oi=/^[^ \t\r\n:'"()]/,ii=Fe([" ","	","\r",`
`,":","'",'"',"(",")"],!0,!1),si=/^[^ \t\r\n():]/,ai=Fe([" ","	","\r",`
`,"(",")",":"],!0,!1),fi=/^[^ \t\r\n'"():]/,ui=Fe([" ","	","\r",`
`,"'",'"',"(",")",":"],!0,!1),Rn=/^[ \t\r\n]/,En=Fe([" ","	","\r",`
`],!1,!1),h=0,qt=[{line:1,column:1}],te=0,ur=[],P=0;if("startRule"in a){if(!(a.startRule in f))throw new Error(`Can't start parsing from rule "`+a.startRule+'".');l=f[a.startRule]}function Oe(u,c){return{type:"literal",text:u,ignoreCase:c}}function Fe(u,c,x){return{type:"class",parts:u,inverted:c,ignoreCase:x}}function li(){return{type:"end"}}function qn(u){let c=qt[u],x;if(c)return c;for(x=u-1;!qt[x];)x--;for(c=qt[x],c={line:c.line,column:c.column};x<u;)s.charCodeAt(x)===10?(c.line++,c.column=1):c.column++,x++;return qt[u]=c,c}function On(u,c){let x=qn(u),E=qn(c);return{start:{offset:u,line:x.line,column:x.column},end:{offset:c,line:E.line,column:E.column}}}function I(u){h<te||(h>te&&(te=h,ur=[]),ur.push(u))}function ci(u,c,x){return new t(t.buildMessage(u,c),u,c,x)}function Fn(){let u,c,x;return u=h,c=bn(),c!==i?(x=xi(),x!==i?(c=d(c),u=c):(h=u,u=i)):(h=u,u=i),u}function bn(){let u,c,x,E,ue,hr;return u=h,c=lr(),c!==i?(x=We(),x!==i?(E=gi(),E!==i?(ue=We(),ue!==i?(hr=bn(),hr!==i?(c=m(c,E,hr),u=c):(h=u,u=i)):(h=u,u=i)):(h=u,u=i)):(h=u,u=i)):(h=u,u=i),u===i&&(u=Cn()),u}function Cn(){let u,c,x;return u=lr(),u===i&&(u=h,c=lr(),c!==i?(x=pi(),x===i&&(x=null),x!==i?(c=R(c,x),u=c):(h=u,u=i)):(h=u,u=i)),u}function pi(){let u,c,x;return u=h,c=We(),c!==i?(x=Cn(),x!==i?(c=O(x),u=c):(h=u,u=i)):(h=u,u=i),u}function lr(){let u,c,x,E;return u=h,c=mi(),c!==i?(s.charCodeAt(h)===58?(x=_,h++):(x=i,P===0&&I(v)),x!==i?(E=cr(),E!==i?(c=g(c,E),u=c):(h=u,u=i)):(h=u,u=i)):(h=u,u=i),u===i&&(u=h,c=cr(),c!==i&&(c=A(c)),u=c),u}function mi(){let u,c,x;if(u=h,c=[],x=Pn(),x!==i)for(;x!==i;)c.push(x),x=Pn();else c=i;return c!==i&&(c=N(c)),u=c,u}function cr(){let u,c,x;return u=h,c=hi(),c!==i?(x=di(),x===i&&(x=null),x!==i?(c=K(c,x),u=c):(h=u,u=i)):(h=u,u=i),u}function di(){let u,c,x;return u=h,c=We(),c!==i?(x=cr(),x!==i?(c=O(x),u=c):(h=u,u=i)):(h=u,u=i),u}function hi(){let u,c,x,E,ue;if(u=h,c=h,P++,x=pr(),P--,x===i?c=void 0:(h=c,c=i),c!==i)if(x=mr(),x!==i){if(E=[],ue=$n(),ue!==i)for(;ue!==i;)E.push(ue),ue=$n();else E=i;E!==i?(c=Qe(x,E),u=c):(h=u,u=i)}else h=u,u=i;else h=u,u=i;if(u===i){if(u=h,c=h,P++,x=pr(),P--,x===i?c=void 0:(h=c,c=i),c!==i){if(x=[],E=mr(),E!==i)for(;E!==i;)x.push(E),E=mr();else x=i;x!==i?(c=he(x),u=c):(h=u,u=i)}else h=u,u=i;if(u===i){if(u=h,c=Sn(),c!==i){for(x=[],E=Tn();E!==i;)x.push(E),E=Tn();x!==i?(E=Sn(),E!==i?(c=fe(x),u=c):(h=u,u=i)):(h=u,u=i)}else h=u,u=i;if(u===i)if(u=h,c=Mn(),c!==i){for(x=[],E=Nn();E!==i;)x.push(E),E=Nn();x!==i?(E=Mn(),E!==i?(c=fe(x),u=c):(h=u,u=i)):(h=u,u=i)}else h=u,u=i}}return u}function gi(){let u,c;return u=h,c=pr(),c!==i&&(c=Wo(c)),u=c,u}function pr(){let u;return s.substr(h,3)===_n?(u=_n,h+=3):(u=i,P===0&&I(Vo)),u===i&&(s.substr(h,2)===wn?(u=wn,h+=2):(u=i,P===0&&I(Go)),u===i&&(s.substr(h,3)===An?(u=An,h+=3):(u=i,P===0&&I(Jo)))),u}function Sn(){let u;return s.charCodeAt(h)===39?(u=Ko,h++):(u=i,P===0&&I(Yo)),u}function Tn(){let u;return Zo.test(s.charAt(h))?(u=s.charAt(h),h++):(u=i,P===0&&I(jo)),u}function Mn(){let u;return s.charCodeAt(h)===34?(u=ei,h++):(u=i,P===0&&I(ti)),u}function Nn(){let u;return ri.test(s.charAt(h))?(u=s.charAt(h),h++):(u=i,P===0&&I(ni)),u}function Pn(){let u;return oi.test(s.charAt(h))?(u=s.charAt(h),h++):(u=i,P===0&&I(ii)),u}function $n(){let u;return si.test(s.charAt(h))?(u=s.charAt(h),h++):(u=i,P===0&&I(ai)),u}function mr(){let u;return fi.test(s.charAt(h))?(u=s.charAt(h),h++):(u=i,P===0&&I(ui)),u}function We(){let u,c;if(u=[],Rn.test(s.charAt(h))?(c=s.charAt(h),h++):(c=i,P===0&&I(En)),c!==i)for(;c!==i;)u.push(c),Rn.test(s.charAt(h))?(c=s.charAt(h),h++):(c=i,P===0&&I(En));else u=i;return u}function xi(){let u;return u=We(),u===i&&(u=null),u}let yi=a.defaultFieldName||"all_fields",dr=l();if(dr!==i&&h===s.length)return dr;throw dr!==i&&h<s.length&&I(li()),ci(ur,te<s.length?s.charAt(te):null,te<s.length?On(te,te+1):On(te,te))}return{SyntaxError:t,parse:n}}(),sr=ms;var ds=V("raw"),ar=ds;var hs=function(e,t){if(t)try{return sr.parse(t,{defaultFieldName:e})}catch{return new ar(t)}else return{}},Do=hs;var gs=V("special"),Lo=gs;var xs=["value_boolean","literal","tag","special"],ys=V("tag",xs,function(){this.serialize=function(){let e=this.serializedChildren();return e.length===0?"":this.value+"("+e.join(" ")+")"}}),Bo=ys;var vs=function(e){let t=[],n=0,s=null;for(;n<e.length;){let a=e.slice(n),i=p.find([":","AND","OR","+","-","(",")","*"," ",`
`,"	","\r"],function(f){return new RegExp("^\\"+f).exec(a)});if(i)/\s/.exec(i)&&(s="whitespace"),s=i,n+=i.length;else{i=e.charAt(n),s="string",n++;let f=p.last(t);f&&f.type==="string"&&(i=t.pop().content+i)}t.push({type:s,content:i})}return t},Ho=vs;var _s=["value_boolean","literal","tag","special"],ws=ke("value_boolean",_s),zo=ws;var As={Field:nr,FieldBoolean:Et,Literal:or,parseField:Do,Raw:ar,Special:Lo,Tag:Bo,tokenize:Ho,ValueBoolean:zo},ae=As;var Rs=new de({url:function(){return L.datastores_url},attempts:function(){return L.init_attempts},failure_message:function(){return k.preset("failed_init")},edit_response:function(){},before_success:function(e){L.default_institution=e.default_institution,L.affiliation=e.affiliation,ze.array=p.map(e.response,function(t){return new ir(t)})}}).request,ko=Rs;var Es=function(e,t,n){n===void 0&&(n=function(i){});let s={complete:!1,source:ze.get(e).get("url")+"/record/"+t,names:[void 0]},a=new Xe(s);return a.renderFull(n),a},Io=Es;var qs=function(e,t,n){let s={},a=this;this.searches=n,this.uid=e,this.set=function(f){return p.extend(s,f),p.each(n,function(l){l.set(f)}),a};let i=function(f,l){return function(){let d=W(arguments);return Ue(l,d),p.each(n,function(m){m[f].apply(m,d)}),a}};this.run=i("run"),this.nextPage=i("nextPage"),this.prevPage=i("prevPage"),this.setMute=i("setMute",function(f){t=f}),this.getMute=function(){return t},this.setMute(t)},fr=qs;var Os=function(e,t){let n=this,s=new fr(null,!0,t);e.set({page:1}).setMute(!1),s.set({page:1}),this.uid=e.uid,this.run=function(a){return e.run(a),s.run(0),n},this.set=function(a){return e.set(a),s.set(p.omit(a,"page","facets")),n},this.nextPage=function(){return e.nextPage(),n},this.prevPage=function(){return e.prevPage(),n},this.switchTo=function(a){if(a!==e){if(e.setMute(!0).set({page:1}),s.searches.push(e),e=void 0,s.searches=p.reject(s.searches,function(i){if(i.uid===a)return e=i,!0}),!e)throw new Error("Could not find a search with a UID of: "+a);n.uid=e.uid,e.setMute(!1)}return n}},Uo=Os;var Fs={deepClone:z,escape:Rt,FuncBuffer:oe,isDeepMatch:er,isFunction:Yt,MultiSearch:fr,Paginater:Ie,request:me,RequestBuffer:de,safeApply:Ue,safeCall:M,SearchSwitcher:Uo,Section:pe,sliceCall:W},Xo=Fs;var bs={AllDatastores:ze,Core:$o,FieldTree:ae,init:ko,Messenger:k,Parser:sr,PreferenceEngine:jt,requestRecord:Io,Settings:L,Util:Xo},Qo=bs;
/*! Bundled license information:

reqwest/reqwest.js:
  (*!
    * Reqwest! A general purpose XHR connection manager
    * license MIT (c) Dustin Diaz 2015
    * https://github.com/ded/reqwest
    *)
*/
