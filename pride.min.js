var ir=Object.defineProperty;var Yn=Object.getOwnPropertyDescriptor;var Zn=Object.getOwnPropertyNames;var jn=Object.prototype.hasOwnProperty;var Mo=(t,e)=>{for(var r in e)ir(t,r,{get:e[r],enumerable:!0})},ti=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Zn(e))!jn.call(t,i)&&i!==r&&ir(t,i,{get:()=>e[i],enumerable:!(n=Yn(e,i))||n.enumerable});return t};var ei=t=>ti(ir({},"__esModule",{value:!0}),t);var Vi={};Mo(Vi,{Pride:()=>En});module.exports=ei(Vi);var ri={array:[],get(t){return this.array.find(e=>e.get("uid")===t)}},Ot=ri;var so={};Mo(so,{VERSION:()=>_e,after:()=>Kr,all:()=>De,allKeys:()=>J,any:()=>Ie,assign:()=>ht,before:()=>re,bind:()=>Pe,bindAll:()=>rn,chain:()=>Cr,chunk:()=>io,clone:()=>$r,collect:()=>V,compact:()=>to,compose:()=>Vr,constant:()=>Qt,contains:()=>C,countBy:()=>ln,create:()=>Fr,debounce:()=>zr,default:()=>gn,defaults:()=>Ne,defer:()=>on,delay:()=>Be,detect:()=>Pt,difference:()=>Ue,drop:()=>At,each:()=>P,escape:()=>Zo,every:()=>De,extend:()=>Me,extendOwn:()=>ht,filter:()=>H,find:()=>Pt,findIndex:()=>qt,findKey:()=>oe,findLastIndex:()=>be,findWhere:()=>Qr,first:()=>me,flatten:()=>eo,foldl:()=>Le,foldr:()=>kr,forEach:()=>P,functions:()=>Mt,get:()=>Yt,groupBy:()=>an,has:()=>Rr,head:()=>me,identity:()=>xt,include:()=>C,includes:()=>C,indexBy:()=>un,indexOf:()=>Ce,initial:()=>pe,inject:()=>Le,intersection:()=>ro,invert:()=>Wt,invoke:()=>fn,isArguments:()=>St,isArray:()=>z,isArrayBuffer:()=>Fe,isBoolean:()=>Vt,isDataView:()=>mt,isDate:()=>Lo,isElement:()=>dr,isEmpty:()=>vr,isEqual:()=>_r,isError:()=>Io,isFinite:()=>xr,isFunction:()=>$,isMap:()=>Go,isMatch:()=>Gt,isNaN:()=>Kt,isNull:()=>cr,isNumber:()=>Ee,isObject:()=>b,isRegExp:()=>Do,isSet:()=>Xo,isString:()=>Ft,isSymbol:()=>Oe,isTypedArray:()=>Se,isUndefined:()=>Ut,isWeakMap:()=>Wo,isWeakSet:()=>Yo,iteratee:()=>Nt,keys:()=>y,last:()=>jr,lastIndexOf:()=>sn,map:()=>V,mapObject:()=>Mr,matcher:()=>Z,matches:()=>Z,max:()=>ae,memoize:()=>Dr,methods:()=>Mt,min:()=>Gr,mixin:()=>ce,negate:()=>yt,noop:()=>jt,now:()=>it,object:()=>oo,omit:()=>mn,once:()=>nn,pairs:()=>Or,partial:()=>st,partition:()=>pn,pick:()=>ze,pluck:()=>_t,property:()=>vt,propertyOf:()=>Nr,random:()=>Tt,range:()=>no,reduce:()=>Le,reduceRight:()=>kr,reject:()=>Hr,rest:()=>At,restArguments:()=>O,result:()=>Br,sample:()=>le,select:()=>H,shuffle:()=>Wr,size:()=>Yr,some:()=>Ie,sortBy:()=>Xr,sortedIndex:()=>ie,tail:()=>At,take:()=>me,tap:()=>Sr,template:()=>Pr,templateSettings:()=>en,throttle:()=>Ir,times:()=>Tr,toArray:()=>ue,toPath:()=>Te,transpose:()=>bt,unescape:()=>tn,union:()=>dn,uniq:()=>Bt,unique:()=>Bt,uniqueId:()=>br,unzip:()=>bt,values:()=>K,where:()=>Jr,without:()=>cn,wrap:()=>Ur,zip:()=>hn});var _e="1.13.6",sr=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},zt=Array.prototype,Ae=Object.prototype,fr=typeof Symbol<"u"?Symbol.prototype:null,No=zt.push,Y=zt.slice,tt=Ae.toString,To=Ae.hasOwnProperty,ar=typeof ArrayBuffer<"u",qo=typeof DataView<"u",Po=Array.isArray,ur=Object.keys,lr=Object.create,pr=ar&&ArrayBuffer.isView,Bo=isNaN,bo=isFinite,we=!{toString:null}.propertyIsEnumerable("toString"),mr=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Co=Math.pow(2,53)-1;function O(t,e){return e=e==null?t.length-1:+e,function(){for(var r=Math.max(arguments.length-e,0),n=Array(r),i=0;i<r;i++)n[i]=arguments[i+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var o=Array(e+1);for(i=0;i<e;i++)o[i]=arguments[i];return o[e]=n,t.apply(this,o)}}function b(t){var e=typeof t;return e==="function"||e==="object"&&!!t}function cr(t){return t===null}function Ut(t){return t===void 0}function Vt(t){return t===!0||t===!1||tt.call(t)==="[object Boolean]"}function dr(t){return!!(t&&t.nodeType===1)}function A(t){var e="[object "+t+"]";return function(r){return tt.call(r)===e}}var Ft=A("String");var Ee=A("Number");var Lo=A("Date");var Do=A("RegExp");var Io=A("Error");var Oe=A("Symbol");var Fe=A("ArrayBuffer");var zo=A("Function"),oi=sr.document&&sr.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof oi!="function"&&(zo=function(t){return typeof t=="function"||!1});var $=zo;var hr=A("Object");var $e=qo&&hr(new DataView(new ArrayBuffer(8))),$t=typeof Map<"u"&&hr(new Map);var ni=A("DataView");function ii(t){return t!=null&&$(t.getInt8)&&Fe(t.buffer)}var mt=$e?ii:ni;var z=Po||A("Array");function q(t,e){return t!=null&&To.call(t,e)}var gr=A("Arguments");(function(){gr(arguments)||(gr=function(t){return q(t,"callee")})})();var St=gr;function xr(t){return!Oe(t)&&bo(t)&&!isNaN(parseFloat(t))}function Kt(t){return Ee(t)&&Bo(t)}function Qt(t){return function(){return t}}function kt(t){return function(e){var r=t(e);return typeof r=="number"&&r>=0&&r<=Co}}function Ht(t){return function(e){return e?.[t]}}var ct=Ht("byteLength");var Uo=kt(ct);var si=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function fi(t){return pr?pr(t)&&!mt(t):Uo(t)&&si.test(tt.call(t))}var Se=ar?fi:Qt(!1);var R=Ht("length");function ai(t){for(var e={},r=t.length,n=0;n<r;++n)e[t[n]]=!0;return{contains:function(i){return e[i]===!0},push:function(i){return e[i]=!0,t.push(i)}}}function Jt(t,e){e=ai(e);var r=mr.length,n=t.constructor,i=$(n)&&n.prototype||Ae,o="constructor";for(q(t,o)&&!e.contains(o)&&e.push(o);r--;)o=mr[r],o in t&&t[o]!==i[o]&&!e.contains(o)&&e.push(o)}function y(t){if(!b(t))return[];if(ur)return ur(t);var e=[];for(var r in t)q(t,r)&&e.push(r);return we&&Jt(t,e),e}function vr(t){if(t==null)return!0;var e=R(t);return typeof e=="number"&&(z(t)||Ft(t)||St(t))?e===0:R(y(t))===0}function Gt(t,e){var r=y(e),n=r.length;if(t==null)return!n;for(var i=Object(t),o=0;o<n;o++){var f=r[o];if(e[f]!==i[f]||!(f in i))return!1}return!0}function h(t){if(t instanceof h)return t;if(!(this instanceof h))return new h(t);this._wrapped=t}h.VERSION=_e;h.prototype.value=function(){return this._wrapped};h.prototype.valueOf=h.prototype.toJSON=h.prototype.value;h.prototype.toString=function(){return String(this._wrapped)};function Re(t){return new Uint8Array(t.buffer||t,t.byteOffset||0,ct(t))}var Vo="[object DataView]";function yr(t,e,r,n){if(t===e)return t!==0||1/t===1/e;if(t==null||e==null)return!1;if(t!==t)return e!==e;var i=typeof t;return i!=="function"&&i!=="object"&&typeof e!="object"?!1:Ko(t,e,r,n)}function Ko(t,e,r,n){t instanceof h&&(t=t._wrapped),e instanceof h&&(e=e._wrapped);var i=tt.call(t);if(i!==tt.call(e))return!1;if($e&&i=="[object Object]"&&mt(t)){if(!mt(e))return!1;i=Vo}switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:+t==0?1/+t===1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return fr.valueOf.call(t)===fr.valueOf.call(e);case"[object ArrayBuffer]":case Vo:return Ko(Re(t),Re(e),r,n)}var o=i==="[object Array]";if(!o&&Se(t)){var f=ct(t);if(f!==ct(e))return!1;if(t.buffer===e.buffer&&t.byteOffset===e.byteOffset)return!0;o=!0}if(!o){if(typeof t!="object"||typeof e!="object")return!1;var u=t.constructor,c=e.constructor;if(u!==c&&!($(u)&&u instanceof u&&$(c)&&c instanceof c)&&"constructor"in t&&"constructor"in e)return!1}r=r||[],n=n||[];for(var d=r.length;d--;)if(r[d]===t)return n[d]===e;if(r.push(t),n.push(e),o){if(d=t.length,d!==e.length)return!1;for(;d--;)if(!yr(t[d],e[d],r,n))return!1}else{var F=y(t),S;if(d=F.length,y(e).length!==d)return!1;for(;d--;)if(S=F[d],!(q(e,S)&&yr(t[S],e[S],r,n)))return!1}return r.pop(),n.pop(),!0}function _r(t,e){return yr(t,e)}function J(t){if(!b(t))return[];var e=[];for(var r in t)e.push(r);return we&&Jt(t,e),e}function Rt(t){var e=R(t);return function(r){if(r==null)return!1;var n=J(r);if(R(n))return!1;for(var i=0;i<e;i++)if(!$(r[t[i]]))return!1;return t!==Er||!$(r[Ar])}}var Ar="forEach",Qo="has",wr=["clear","delete"],ko=["get",Qo,"set"],Ho=wr.concat(Ar,ko),Er=wr.concat(ko),Jo=["add"].concat(wr,Ar,Qo);var Go=$t?Rt(Ho):A("Map");var Wo=$t?Rt(Er):A("WeakMap");var Xo=$t?Rt(Jo):A("Set");var Yo=A("WeakSet");function K(t){for(var e=y(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=t[e[i]];return n}function Or(t){for(var e=y(t),r=e.length,n=Array(r),i=0;i<r;i++)n[i]=[e[i],t[e[i]]];return n}function Wt(t){for(var e={},r=y(t),n=0,i=r.length;n<i;n++)e[t[r[n]]]=r[n];return e}function Mt(t){var e=[];for(var r in t)$(t[r])&&e.push(r);return e.sort()}function dt(t,e){return function(r){var n=arguments.length;if(e&&(r=Object(r)),n<2||r==null)return r;for(var i=1;i<n;i++)for(var o=arguments[i],f=t(o),u=f.length,c=0;c<u;c++){var d=f[c];(!e||r[d]===void 0)&&(r[d]=o[d])}return r}}var Me=dt(J);var ht=dt(y);var Ne=dt(J,!0);function ui(){return function(){}}function Xt(t){if(!b(t))return{};if(lr)return lr(t);var e=ui();e.prototype=t;var r=new e;return e.prototype=null,r}function Fr(t,e){var r=Xt(t);return e&&ht(r,e),r}function $r(t){return b(t)?z(t)?t.slice():Me({},t):t}function Sr(t,e){return e(t),t}function Te(t){return z(t)?t:[t]}h.toPath=Te;function G(t){return h.toPath(t)}function gt(t,e){for(var r=e.length,n=0;n<r;n++){if(t==null)return;t=t[e[n]]}return r?t:void 0}function Yt(t,e,r){var n=gt(t,G(e));return Ut(n)?r:n}function Rr(t,e){e=G(e);for(var r=e.length,n=0;n<r;n++){var i=e[n];if(!q(t,i))return!1;t=t[i]}return!!r}function xt(t){return t}function Z(t){return t=ht({},t),function(e){return Gt(e,t)}}function vt(t){return t=G(t),function(e){return gt(e,t)}}function W(t,e,r){if(e===void 0)return t;switch(r??3){case 1:return function(n){return t.call(e,n)};case 3:return function(n,i,o){return t.call(e,n,i,o)};case 4:return function(n,i,o,f){return t.call(e,n,i,o,f)}}return function(){return t.apply(e,arguments)}}function Zt(t,e,r){return t==null?xt:$(t)?W(t,e,r):b(t)&&!z(t)?Z(t):vt(t)}function Nt(t,e){return Zt(t,e,1/0)}h.iteratee=Nt;function E(t,e,r){return h.iteratee!==Nt?h.iteratee(t,e):Zt(t,e,r)}function Mr(t,e,r){e=E(e,r);for(var n=y(t),i=n.length,o={},f=0;f<i;f++){var u=n[f];o[u]=e(t[u],u,t)}return o}function jt(){}function Nr(t){return t==null?jt:function(e){return Yt(t,e)}}function Tr(t,e,r){var n=Array(Math.max(0,t));e=W(e,r,1);for(var i=0;i<t;i++)n[i]=e(i);return n}function Tt(t,e){return e==null&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))}var it=Date.now||function(){return new Date().getTime()};function te(t){var e=function(o){return t[o]},r="(?:"+y(t).join("|")+")",n=RegExp(r),i=RegExp(r,"g");return function(o){return o=o==null?"":""+o,n.test(o)?o.replace(i,e):o}}var qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var Zo=te(qe);var jo=Wt(qe);var tn=te(jo);var en=h.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var qr=/(.)^/,li={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},pi=/\\|'|\r|\n|\u2028|\u2029/g;function mi(t){return"\\"+li[t]}var ci=/^\s*(\w|\$)+\s*$/;function Pr(t,e,r){!e&&r&&(e=r),e=Ne({},e,h.templateSettings);var n=RegExp([(e.escape||qr).source,(e.interpolate||qr).source,(e.evaluate||qr).source].join("|")+"|$","g"),i=0,o="__p+='";t.replace(n,function(d,F,S,v,g){return o+=t.slice(i,g).replace(pi,mi),i=g+d.length,F?o+=`'+
((__t=(`+F+`))==null?'':_.escape(__t))+
'`:S?o+=`'+
((__t=(`+S+`))==null?'':__t)+
'`:v&&(o+=`';
`+v+`
__p+='`),d}),o+=`';
`;var f=e.variable;if(f){if(!ci.test(f))throw new Error("variable is not a bare identifier: "+f)}else o=`with(obj||{}){
`+o+`}
`,f="obj";o=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+o+`return __p;
`;var u;try{u=new Function(f,"_",o)}catch(d){throw d.source=o,d}var c=function(d){return u.call(this,d,h)};return c.source="function("+f+`){
`+o+"}",c}function Br(t,e,r){e=G(e);var n=e.length;if(!n)return $(r)?r.call(t):r;for(var i=0;i<n;i++){var o=t?.[e[i]];o===void 0&&(o=r,i=n),t=$(o)?o.call(t):o}return t}var di=0;function br(t){var e=++di+"";return t?t+e:e}function Cr(t){var e=h(t);return e._chain=!0,e}function ee(t,e,r,n,i){if(!(n instanceof e))return t.apply(r,i);var o=Xt(t.prototype),f=t.apply(o,i);return b(f)?f:o}var Lr=O(function(t,e){var r=Lr.placeholder,n=function(){for(var i=0,o=e.length,f=Array(o),u=0;u<o;u++)f[u]=e[u]===r?arguments[i++]:e[u];for(;i<arguments.length;)f.push(arguments[i++]);return ee(t,n,this,this,f)};return n});Lr.placeholder=h;var st=Lr;var Pe=O(function(t,e,r){if(!$(t))throw new TypeError("Bind must be called on a function");var n=O(function(i){return ee(t,n,e,this,r.concat(i))});return n});var M=kt(R);function U(t,e,r,n){if(n=n||[],!e&&e!==0)e=1/0;else if(e<=0)return n.concat(t);for(var i=n.length,o=0,f=R(t);o<f;o++){var u=t[o];if(M(u)&&(z(u)||St(u)))if(e>1)U(u,e-1,r,n),i=n.length;else for(var c=0,d=u.length;c<d;)n[i++]=u[c++];else r||(n[i++]=u)}return n}var rn=O(function(t,e){e=U(e,!1,!1);var r=e.length;if(r<1)throw new Error("bindAll must be passed function names");for(;r--;){var n=e[r];t[n]=Pe(t[n],t)}return t});function Dr(t,e){var r=function(n){var i=r.cache,o=""+(e?e.apply(this,arguments):n);return q(i,o)||(i[o]=t.apply(this,arguments)),i[o]};return r.cache={},r}var Be=O(function(t,e,r){return setTimeout(function(){return t.apply(null,r)},e)});var on=st(Be,h,1);function Ir(t,e,r){var n,i,o,f,u=0;r||(r={});var c=function(){u=r.leading===!1?0:it(),n=null,f=t.apply(i,o),n||(i=o=null)},d=function(){var F=it();!u&&r.leading===!1&&(u=F);var S=e-(F-u);return i=this,o=arguments,S<=0||S>e?(n&&(clearTimeout(n),n=null),u=F,f=t.apply(i,o),n||(i=o=null)):!n&&r.trailing!==!1&&(n=setTimeout(c,S)),f};return d.cancel=function(){clearTimeout(n),u=0,n=i=o=null},d}function zr(t,e,r){var n,i,o,f,u,c=function(){var F=it()-i;e>F?n=setTimeout(c,e-F):(n=null,r||(f=t.apply(u,o)),n||(o=u=null))},d=O(function(F){return u=this,o=F,i=it(),n||(n=setTimeout(c,e),r&&(f=t.apply(u,o))),f});return d.cancel=function(){clearTimeout(n),n=o=u=null},d}function Ur(t,e){return st(e,t)}function yt(t){return function(){return!t.apply(this,arguments)}}function Vr(){var t=arguments,e=t.length-1;return function(){for(var r=e,n=t[e].apply(this,arguments);r--;)n=t[r].call(this,n);return n}}function Kr(t,e){return function(){if(--t<1)return e.apply(this,arguments)}}function re(t,e){var r;return function(){return--t>0&&(r=e.apply(this,arguments)),t<=1&&(e=null),r}}var nn=st(re,2);function oe(t,e,r){e=E(e,r);for(var n=y(t),i,o=0,f=n.length;o<f;o++)if(i=n[o],e(t[i],i,t))return i}function ne(t){return function(e,r,n){r=E(r,n);for(var i=R(e),o=t>0?0:i-1;o>=0&&o<i;o+=t)if(r(e[o],o,e))return o;return-1}}var qt=ne(1);var be=ne(-1);function ie(t,e,r,n){r=E(r,n,1);for(var i=r(e),o=0,f=R(t);o<f;){var u=Math.floor((o+f)/2);r(t[u])<i?o=u+1:f=u}return o}function se(t,e,r){return function(n,i,o){var f=0,u=R(n);if(typeof o=="number")t>0?f=o>=0?o:Math.max(o+u,f):u=o>=0?Math.min(o+1,u):o+u+1;else if(r&&o&&u)return o=r(n,i),n[o]===i?o:-1;if(i!==i)return o=e(Y.call(n,f,u),Kt),o>=0?o+f:-1;for(o=t>0?f:u-1;o>=0&&o<u;o+=t)if(n[o]===i)return o;return-1}}var Ce=se(1,qt,ie);var sn=se(-1,be);function Pt(t,e,r){var n=M(t)?qt:oe,i=n(t,e,r);if(i!==void 0&&i!==-1)return t[i]}function Qr(t,e){return Pt(t,Z(e))}function P(t,e,r){e=W(e,r);var n,i;if(M(t))for(n=0,i=t.length;n<i;n++)e(t[n],n,t);else{var o=y(t);for(n=0,i=o.length;n<i;n++)e(t[o[n]],o[n],t)}return t}function V(t,e,r){e=E(e,r);for(var n=!M(t)&&y(t),i=(n||t).length,o=Array(i),f=0;f<i;f++){var u=n?n[f]:f;o[f]=e(t[u],u,t)}return o}function fe(t){var e=function(r,n,i,o){var f=!M(r)&&y(r),u=(f||r).length,c=t>0?0:u-1;for(o||(i=r[f?f[c]:c],c+=t);c>=0&&c<u;c+=t){var d=f?f[c]:c;i=n(i,r[d],d,r)}return i};return function(r,n,i,o){var f=arguments.length>=3;return e(r,W(n,o,4),i,f)}}var Le=fe(1);var kr=fe(-1);function H(t,e,r){var n=[];return e=E(e,r),P(t,function(i,o,f){e(i,o,f)&&n.push(i)}),n}function Hr(t,e,r){return H(t,yt(E(e)),r)}function De(t,e,r){e=E(e,r);for(var n=!M(t)&&y(t),i=(n||t).length,o=0;o<i;o++){var f=n?n[o]:o;if(!e(t[f],f,t))return!1}return!0}function Ie(t,e,r){e=E(e,r);for(var n=!M(t)&&y(t),i=(n||t).length,o=0;o<i;o++){var f=n?n[o]:o;if(e(t[f],f,t))return!0}return!1}function C(t,e,r,n){return M(t)||(t=K(t)),(typeof r!="number"||n)&&(r=0),Ce(t,e,r)>=0}var fn=O(function(t,e,r){var n,i;return $(e)?i=e:(e=G(e),n=e.slice(0,-1),e=e[e.length-1]),V(t,function(o){var f=i;if(!f){if(n&&n.length&&(o=gt(o,n)),o==null)return;f=o[e]}return f==null?f:f.apply(o,r)})});function _t(t,e){return V(t,vt(e))}function Jr(t,e){return H(t,Z(e))}function ae(t,e,r){var n=-1/0,i=-1/0,o,f;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=M(t)?t:K(t);for(var u=0,c=t.length;u<c;u++)o=t[u],o!=null&&o>n&&(n=o)}else e=E(e,r),P(t,function(d,F,S){f=e(d,F,S),(f>i||f===-1/0&&n===-1/0)&&(n=d,i=f)});return n}function Gr(t,e,r){var n=1/0,i=1/0,o,f;if(e==null||typeof e=="number"&&typeof t[0]!="object"&&t!=null){t=M(t)?t:K(t);for(var u=0,c=t.length;u<c;u++)o=t[u],o!=null&&o<n&&(n=o)}else e=E(e,r),P(t,function(d,F,S){f=e(d,F,S),(f<i||f===1/0&&n===1/0)&&(n=d,i=f)});return n}var hi=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function ue(t){return t?z(t)?Y.call(t):Ft(t)?t.match(hi):M(t)?V(t,xt):K(t):[]}function le(t,e,r){if(e==null||r)return M(t)||(t=K(t)),t[Tt(t.length-1)];var n=ue(t),i=R(n);e=Math.max(Math.min(e,i),0);for(var o=i-1,f=0;f<e;f++){var u=Tt(f,o),c=n[f];n[f]=n[u],n[u]=c}return n.slice(0,e)}function Wr(t){return le(t,1/0)}function Xr(t,e,r){var n=0;return e=E(e,r),_t(V(t,function(i,o,f){return{value:i,index:n++,criteria:e(i,o,f)}}).sort(function(i,o){var f=i.criteria,u=o.criteria;if(f!==u){if(f>u||f===void 0)return 1;if(f<u||u===void 0)return-1}return i.index-o.index}),"value")}function et(t,e){return function(r,n,i){var o=e?[[],[]]:{};return n=E(n,i),P(r,function(f,u){var c=n(f,u,r);t(o,f,c)}),o}}var an=et(function(t,e,r){q(t,r)?t[r].push(e):t[r]=[e]});var un=et(function(t,e,r){t[r]=e});var ln=et(function(t,e,r){q(t,r)?t[r]++:t[r]=1});var pn=et(function(t,e,r){t[r?0:1].push(e)},!0);function Yr(t){return t==null?0:M(t)?t.length:y(t).length}function Zr(t,e,r){return e in r}var ze=O(function(t,e){var r={},n=e[0];if(t==null)return r;$(n)?(e.length>1&&(n=W(n,e[1])),e=J(t)):(n=Zr,e=U(e,!1,!1),t=Object(t));for(var i=0,o=e.length;i<o;i++){var f=e[i],u=t[f];n(u,f,t)&&(r[f]=u)}return r});var mn=O(function(t,e){var r=e[0],n;return $(r)?(r=yt(r),e.length>1&&(n=e[1])):(e=V(U(e,!1,!1),String),r=function(i,o){return!C(e,o)}),ze(t,r,n)});function pe(t,e,r){return Y.call(t,0,Math.max(0,t.length-(e==null||r?1:e)))}function me(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[0]:pe(t,t.length-e)}function At(t,e,r){return Y.call(t,e==null||r?1:e)}function jr(t,e,r){return t==null||t.length<1?e==null||r?void 0:[]:e==null||r?t[t.length-1]:At(t,Math.max(0,t.length-e))}function to(t){return H(t,Boolean)}function eo(t,e){return U(t,e,!1)}var Ue=O(function(t,e){return e=U(e,!0,!0),H(t,function(r){return!C(e,r)})});var cn=O(function(t,e){return Ue(t,e)});function Bt(t,e,r,n){Vt(e)||(n=r,r=e,e=!1),r!=null&&(r=E(r,n));for(var i=[],o=[],f=0,u=R(t);f<u;f++){var c=t[f],d=r?r(c,f,t):c;e&&!r?((!f||o!==d)&&i.push(c),o=d):r?C(o,d)||(o.push(d),i.push(c)):C(i,c)||i.push(c)}return i}var dn=O(function(t){return Bt(U(t,!0,!0))});function ro(t){for(var e=[],r=arguments.length,n=0,i=R(t);n<i;n++){var o=t[n];if(!C(e,o)){var f;for(f=1;f<r&&C(arguments[f],o);f++);f===r&&e.push(o)}}return e}function bt(t){for(var e=t&&ae(t,R).length||0,r=Array(e),n=0;n<e;n++)r[n]=_t(t,n);return r}var hn=O(bt);function oo(t,e){for(var r={},n=0,i=R(t);n<i;n++)e?r[t[n]]=e[n]:r[t[n][0]]=t[n][1];return r}function no(t,e,r){e==null&&(e=t||0,t=0),r||(r=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/r),0),i=Array(n),o=0;o<n;o++,t+=r)i[o]=t;return i}function io(t,e){if(e==null||e<1)return[];for(var r=[],n=0,i=t.length;n<i;)r.push(Y.call(t,n,n+=e));return r}function Ct(t,e){return t._chain?h(e).chain():e}function ce(t){return P(Mt(t),function(e){var r=h[e]=t[e];h.prototype[e]=function(){var n=[this._wrapped];return No.apply(n,arguments),Ct(this,r.apply(h,n))}}),h}P(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=zt[t];h.prototype[t]=function(){var r=this._wrapped;return r!=null&&(e.apply(r,arguments),(t==="shift"||t==="splice")&&r.length===0&&delete r[0]),Ct(this,r)}});P(["concat","join","slice"],function(t){var e=zt[t];h.prototype[t]=function(){var r=this._wrapped;return r!=null&&(r=e.apply(r,arguments)),Ct(this,r)}});var gn=h;var fo=ce(so);fo._=fo;var w=fo;var gi=function(t){return!t||typeof t=="function"?t:JSON.parse(JSON.stringify(t))},L=gi;var xi=["start","count","end","page","index_limit","total_pages","total_available","page_limit"],Ve=xi;var Ke=class{constructor(e){this.values={count:0,end:0,index_limit:1/0,page:0,page_limit:1/0,start:0,total_available:void 0,total_pages:void 0},this.set(e)}set(e){let r=Object.keys(e);if(["index_limit","total_pages"].forEach(n=>{if(r.includes(n))throw new Error(`Cannot set ${n} (it is a calculated value)`)}),r.includes("start")&&r.includes("end")&&r.includes("count"))throw new Error("Cannot set start, end, and count all at the same time");if(r.includes("page")&&(r.includes("start")||r.includes("end")))throw new Error("Cannot set page as well as the start and/or end");if(r.forEach(n=>{n!=="end"&&(this.values[n]=e[n])}),r.includes("page")&&(this.values.start=this.values.count*(this.values.page-1)),r.includes("end")){if(this.values.start>=e.end)throw new Error("The start value cannot be greater than the end value");r.includes("count")?this.values.start=Math.max(0,e.end-(this.values.count-1)):this.values.count=e.end-this.values.start+1,this.values.end=e.end}else{let n=this.values.start+this.values.count-1;this.values.end=n<this.values.start?this.values.end:n}if(typeof this.values.total_available=="number"&&this.values.total_available>0&&(this.values.index_limit=this.values.total_available-1),this.values.count>0&&this.values.start%this.values.count===0&&(this.values.page=Math.floor(this.values.start/this.values.count)+1,typeof this.values.total_available=="number"&&(this.values.total_pages=Math.ceil(this.values.total_available/this.values.count),this.values.page_limit=this.values.total_pages)),!("start"in this.values)||!("count"in this.values))throw new Error("Not enough information given to create Paginator");return this}get(e){return this.values[e]}};Ke.getPossibleKeys=Ve;var de=Ke;var ao=class t{constructor(e,r){this.start=Math.max(Math.min(e,r),0),this.end=Math.max(Math.max(e,r),0)}inSection(e){return e>=this.start&&e<=this.end}overlaps(e){return this.inSection(e.start)||this.inSection(e.end)}calcLength(){return this.end-this.start+1}shifted(e,r=e){return new t(this.start+e,this.end+r)}expanded(e){return this.shifted(-e,e)}},ft=ao;var uo=class t{static paginatorKeys=de.getPossibleKeys;constructor(e){this.paginator=new de({start:e.start,count:e.count}),this.queryInfo=L(e),t.paginatorKeys.forEach(r=>{delete this.queryInfo[r]}),this.queryInfo.request_id=this.queryInfo.request_id||0}get(e){return t.paginatorKeys.includes(e)?this.paginator.get(e):this.queryInfo[e]}set(e){let r={...e},n={...e};return t.paginatorKeys.forEach(i=>{i in e?delete n[i]:delete r[i]}),Object.keys(n).length>0&&(this.paginator.set({total_available:void 0}),typeof n.request_id!="number"&&(this.queryInfo.request_id+=1)),this.paginator.set(r),this.queryInfo={...this.queryInfo,...n},this}clone(){let e=L(this.queryInfo);return e.start=this.paginator.get("start"),e.count=this.paginator.get("count"),new t(e)}toSection(){return new ft(this.get("start"),this.get("end"))}toLimitSection(){return new ft(this.get("start"),this.get("index_limit"))}toJSON(){return{uid:this.get("uid"),request_id:this.get("request_id"),start:this.get("start"),count:this.get("count"),field_tree:this.get("field_tree"),facets:this.get("facets"),sort:this.get("sort"),settings:this.get("settings"),raw_query:this.get("raw_query")}}},Qe=uo;var vi={cache_size:{},connection_attempts:3,datastores_url:"",default_cache_size:20,init_attempts:3,message_formats:{failed_init:"Failed to initialize Pride",failed_record_load:"Failed to load $1",failed_search_run:"Failed to search $1"},ms_between_attempts:1500,obnoxious:!1},B=vi;var yi=(t,e,...r)=>{B.obnoxious&&console.log(`[Pride: ${t}] ${e}`,...r)},Q=yi;var _i=function(t){let e={};this.clear=n=>(delete e[n],this),this.clearAll=()=>(e={},this);let r=n=>(e[n]??=[],e[n]);this.add=(n,i)=>(r(i).push(n),this),this.remove=(n,i)=>(e[i]=r(i).filter(o=>n!==o),this),this.apply=(n,i=[])=>(r(n).forEach(o=>{o?.(...i)}),this),this.call=(n,...i)=>(this.apply(n,i),this),typeof t=="function"&&t.call(this)},j=_i;var Ai=()=>{let t=new j,e={addObserver:t.add,clearObservers:t.clear,preset:()=>{},removeObserver:t.remove,sendMessage:r=>(r.summary&&(r.class||="info",r.details||="",t.call(r.class,r),Q("Messenger","MESSAGE SENT",r)),e),sendMessageArray:r=>(r?.length>0&&r.forEach(n=>{e.sendMessage(n)}),e)};return e},wi=Ai(),D=wi;var Ei=function(t,e){this.datastore=t.datastore,this.query=t.query||this.datastore.baseQuery();let r=this,n=t.requestFunc||this.datastore.runQuery,i=t.starting_results||[],o=t.cache_size||B.cache_size[this.datastore.uid]||B.default_cache_size;this.log=function(...p){let x=["Search ("+r.datastore.get("uid")+")",...p];Q.apply(window,x)},this.set=function(p){return r.query.set(p),r.setDataChanged?.apply(this),w.isEmpty(w.omit(p,Ve))||(i=[]),r},this.run=function(p){return r.resultsChanged?.apply(this),w.isUndefined(p)&&(p=o),f(d(r.query.toSection().expanded(p))),r},this.results=function(){return F(new ft(r.query.get("start"),Math.min(r.query.get("end"),r.query.get("index_limit"))))};let f=function(p){if(r.log("REQUESTING",p),r.log("TOTAL AVAILABLE (pre-request)",r.query.get("total_available")),p&&r.query.toLimitSection().overlaps(p)){r.log("Sending query...");let x=r.query.clone().set({start:p.start,count:p.calcLength()});n({query:x,failure_message:D.preset("failed_search_run",r.datastore.get("metadata").name),success:function(N){if(N.request.request_id===r.query.get("request_id")){c(N),u(N.response,x.get("start"));let k=N.response.length;k!==0&&k<x.get("count")&&f(p.shifted(k,0))}}})}else r.runDataChanged?.apply(this)},u=function(p,x){let N=!1;r.log("NEW RECORDS",p),w.each(p,function(k,Dt){let pt=Dt+x;w.isUndefined(i[pt])&&(i[pt]=r.createItem?.apply(this,[k]),r.query.toSection().inSection(pt)&&(N=!0))}),r.log("CACHE LENGTH",i.length),(N||w.isEmpty(p))&&r.resultsChanged?.apply(this)},c=function(p){r.datastore.update(p.datastore);let x=w.omit(p.new_request,"start","count");x.specialists=p.specialists,x.total_available=p.total_available,r.query.set(x),r.runDataChanged?.apply(this)},d=function(p){let x=F(p),N=w.indexOf(x,void 0);if(N!==-1){let k=p.start+w.lastIndexOf(x,void 0);return N+=p.start,new ft(N,k)}},F=function(p){let x=[];for(let N=p.start;N<=p.end;N++)x.push(i[N]);return x},S=!1,v=[],g=[];this.clearAllObservers=function(){return w.each(v,function(p){p.clearAll()}),r.initialize_observables?.apply(this),r},this.getMute=function(){return S},this.setMute=function(p){return p!==S&&(S=p,r.muteChanged?.apply(this),S||w.each(g,function(x){x.notify()})),r},this.createObservable=function(p,x,N){let k=new j(function(){let Dt=this.add,pt=this.call;v.push(this),N||g.push(this),this.add=function(ot){return(!r.muted||N)&&ot(x()),Dt(ot,"observers"),this},this.notify=function(){if(!r.muted||N){let ot=x();r.log("NOTIFY ("+p+")",ot),pt("observers",ot)}return this}});return r[p+"Changed"]=k.notify,e[p+"Observers"]=k,r},this.createObservable("mute",this.getMute,!0).createObservable("setData",function(){e.getData()}).createObservable("runData",function(){e.getData()}).createObservable("results",this.results),e.set=function(p){return r.set(p),e},e.run=function(p){return r.run(p),e},e.nextPage=function(p){let x=r.query.get("page");return w.isNumber(x)&&x<r.query.get("page_limit")&&(e.set({page:x+1}),e.run(p)),e},e.prevPage=function(p){let x=r.query.get("page");return w.isNumber(x)&&x>1&&(e.set({page:x-1}),e.run(p)),e}},ke=Ei;var xn=async t=>{if(!t.url)throw new Error("No URL given to Pride.Util.request()");Q("Request","Sending HTTP request..."),Q("Request","URL",t.url),Q("Request","CONTENT",JSON.stringify(t.query)),typeof t.attempts!="number"&&(t.attempts=B.connection_attempts),t.attempts-=1;try{let r=await(await fetch(t.url,{credentials:"include",headers:{"Content-Type":"application/json"},method:t.query?"post":"get",...t.query&&{body:JSON.stringify(t.query)}})).json();Q("Request","SUCCESS",r),t.success?.(r),D.sendMessage({class:"success",summary:t.success_message}),r.messages&&D.sendMessageArray(r.messages)}catch(e){t.attempts>0?(Q("Request","Trying request again..."),setTimeout(()=>xn(t),B.ms_between_attempts)):(Q("Request","ERROR",e),t.failure?.(e),D.sendMessage({class:"error",summary:t.failure_message}))}},at=xn;var Oi=(t={})=>{let e=new j,r=!1,n={request:({failure:i,success:o})=>(e.add(o,"success").add(i,"failure"),r||(r=!0,at({attempts:t.attempts?.()||B.connection_attempts,failure(f){t.before_failure?.(f),e.call("failure",f).clearAll(),t.after_failure?.(f)},failure_message:t.failure_message?.(),success(f){t.before_success?.(f);let u=t.edit_response instanceof Function?t.edit_response(f):f;e.call("success",u).clearAll(),t.after_success?.(u)},url:t.url instanceof Function?t.url():t.url})),n)};return n},ut=Oi;var lo=class{constructor(e){this.data=e}getData(e){let r=this.data.fields.find(i=>i.uid==="resource_access"),n=r?.value??r;e([n].concat(this.data.holdings||[]))}},he=lo;var po=class{constructor(e,r){this.barcode=e,this.data=r;let n=r.fields.find(i=>i.uid==="get_this_url");this.requestBuffer=ut({url:`${n?.value??""}/${this.barcode}`,failure_message:D.preset("failed_get_this_load",r.names[0]),edit_response:i=>(this.data=i,this.data)})}getData(e){this.requestBuffer.request({success:e})}},ge=po;var Fi=t=>{let e=document.createElement("div");return e.appendChild(document.createTextNode(t)),e.innerHTML},xe=Fi;var $i={engine:null,registerEngine(t){return t?(this.engine=t,this.updateSelectedRecords(this.engine.listRecords()),this.engine.addObserver(e=>{this.updateSelectedRecords(e)}),this):this},selected(t){return!!this.selectedRecords?.[t.datastore]?.[t.uid]},selectedRecords:null,updateSelectedRecords(t){return this.selectedRecords||={articlesplus:{},databases:{},journals:{},mirlyn:{},website:{}},Array.isArray(t)?t.forEach(e=>{this.selectedRecords[e.datastore]||={},this.selectedRecords[e.datastore][e.uid]=!0}):Object.keys(t).forEach(e=>{this.selectedRecords[e]={},t[e].forEach(r=>{this.selectedRecords[e][r.uid]=!0})}),this}},He=$i;var Si=function(t){let e=ut({url:t.source,failure_message:D.preset("failed_record_load",t.names[0]),edit_response:function(f){return t=o(f),t}}),r=null,n={};this.placeHold=function(f,u,c,d){this.renderFull(function(F){let v=at({url:[function(){let g;return w.each(F.fields,function(p){p.uid==="holdings_url"&&(g=p.value)}),g}(),f,u,c].join("/"),query:!0,failure:function(){D.sendMessage({summary:"Failed to place hold",class:"error"})},success:d,failure_message:"placeHold failed",success_message:"placeHold succeeded"});console.log(v)})},this.getHoldings=function(f){r?r.getData(f):t.complete?(r=new he(t),r.getData(f)):e.request({success:function(u){r=new he(u),r.getData(f)}})},this.getGetThis=function(f,u){n[f]?n[f].getData(u):t.complete?(n[f]=new ge(f,t),n[f].getData(u)):e.request({success:function(c){n[f]=new ge(f,c),n[f].getData(u)}})},this.renderPart=function(f){i(f)},this.renderPartThenCache=function(f){i(f),e.request()},this.renderFull=function(f){t.complete?i(f):e.request({success:f})},this.renderCSL=function(f){this.renderFull(function(u){let c;w.each(u.fields,function(d){d.uid==="csl"&&(c=d.value)}),f(c)})};let i=function(f){f(w.omit(t,"complete","source"),t.complete)},o=function(f){return f.fields=w.map(f.fields,function(u){return u.value_has_html||(u.value=xe(u.value)),w.omit(u,"value_has_html")}),f.names_have_html||(f.names=w.map(f.names,function(u){return xe(u)})),f.uid?f.status=200:f.status=404,He.selected(f)&&(f.selected=!0),w.omit(f,"names_have_html")};t=o(t)},Lt=Si;var Ri=function(t){this.uid=t.data.uid,this.getData=()=>t.data,this.getResults=()=>t.results;let e=!1;this.getMute=()=>e,this.setMute=n=>(e=n,this),this.observables=[];let r=n=>{let i=this;return new j(function(){i.observables.push(this);let f=this.add;this.add=function(u){return i.muted||u(n()),f(u,"observers"),this}})};this.resultsObservers=r(this.getResults),this.setDataObservers=this.runDataObservers=r(this.getData),this.clearAllObservers=()=>(this.observables.forEach(n=>{n.clearAll()}),this)},Je=Ri;var Mi=function(t){let e=this,r=new ke(t,this);r.createItem=function(o){return new Lt(o)};let n=[],i=[];this.getFacets=function(){return n},this.uid=r.datastore.get("uid"),this.getData=function(){return{uid:e.uid,metadata:L(r.datastore.get("metadata")),sorts:L(r.datastore.get("sorts")),selected_sort:r.query.get("sort"),facets:L(r.query.get("facets")),fields:L(r.datastore.get("fields")),field_tree:L(r.query.get("field_tree")),settings:L(r.query.get("settings")),page:r.query.get("page"),count:r.query.get("count"),total_available:r.query.get("total_available"),total_pages:r.query.get("total_pages"),page_limit:r.query.get("page_limit"),specialists:L(r.query.get("specialists"))}},this.getResults=r.results,r.initialize_observables=function(){e.runDataObservers.add(function(){let o=r.datastore.get("facets");JSON.stringify(i)!==JSON.stringify(o)&&(w.each(n,function(f){f.clearAllObservers()}),n=w.map(o,function(f){return new Je({data:w.omit(f,"values"),results:f.values})}),i=o,e.facetsObservers.notify())})},this.getMute=r.getMute,this.setMute=function(o){return w.each(n,function(f){f.setMute(o)}),r.setMute(o),e},r.createObservable("facets",this.getFacets).initialize_observables()},Ge=Mi;var Ni=(t,e=[],r)=>function(n,...i){this.type=t,this.childTypes=e,this.value=n.trim(),this.children=i.length===1&&Array.isArray(i[0])?i[0]:i,this.addChild=o=>{if(!this.childTypes.includes(o.type))throw new Error(`Not a valid child for a ${this.type}`);return this.children.push(o),this},this.contains=o=>this.matches(o)?this:this.children.find(f=>f.contains(o))??!1,this.matches=o=>{let f=Object.keys(o).filter(c=>c!=="children"),{children:u=[]}=o;return f.every(c=>this[c]===o[c])&&u.every(c=>this.children.some(d=>d.matches(c)))},this.serialize=()=>n,this.serializedChildren=()=>this.children.map(o=>o.serialize()),this.toJSON=()=>({type:this.type,value:this.value,children:this.children.map(f=>f.toJSON())}),typeof r=="function"&&r.call(this)},lt=Ni;var Ti=lt("field_boolean",["field_boolean","field"],function(){if(!["AND","OR","NOT"].includes(this.value))throw new Error("Not a valid boolean value");this.serializedChildren=()=>this.children.map(t=>t.type===this.type||t.type==="literal"&&t.value.match(/\s/)?`(${t.serialize()})`:t.serialize()),this.serialize=()=>this.serializedChildren().join(` ${this.value} `)}),ve=Ti;var qi=lt("field",["value_boolean","literal","tag","special"],function(){this.serialize=()=>`${this.value}: (${this.serializedChildren().join(" ")})`}),We=qi;var Pi=lt("literal"),Xe=Pi;var Bi=function(t){t=L(t),this.baseQuery=function(){return new Qe({uid:t.uid,sort:t.default_sort,start:0,count:0,settings:{},field_tree:e(),facets:w.reduce(t.facets,function(r,n){return n.required&&!n.fixed&&(r[n.uid]=n.default_value),r},{})})},this.baseSearch=function(){return new Ge({datastore:this})},this.runQuery=function(r){return r.url=t.url,at(r),this},this.get=function(r){return t[r]},this.update=function(r){w.extend(t,r)};let e=function(r){r=r||new ve("AND");let n=w.reduce(t.fields,function(i,o){if((o.required||o.fixed)&&!i.contains({type:"field",value:o.uid})){let f=new We(o.uid,new Xe(o.default_value));return w.isMatch(i,{type:"field_boolean",value:"AND"})?i.addChild(f):new ve("AND",i,f)}return i},r);return n.matches({type:"field_boolean",children:[]})?{}:n}},Ye=Bi;var bi={Datastore:Ye,DatastoreSearch:Ge,FacetSearch:Je,GetThis:ge,Holdings:he,log:Q,nodeFactory:lt,Query:Qe,Record:Lt,SearchBase:ke},vn=bi;var Ci={Field:We,FieldBoolean:ve,Literal:Xe},rt=Ci;var Li=ut({attempts:()=>B.init_attempts,before_success:t=>{B.default_institution=t.default_institution,B.affiliation=t.affiliation,Ot.array=t.response.map(e=>new Ye(e))},edit_response:()=>null,failure_message:()=>D.preset("failed_init"),url:()=>B.datastores_url}).request,yn=Li;var Di=function(){"use strict";function t(n,i){function o(){this.constructor=n}o.prototype=i.prototype,n.prototype=new o}function e(n,i,o,f){this.message=n,this.expected=i,this.found=o,this.location=f,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,e)}t(e,Error),e.buildMessage=function(n,i){let o={literal:function(v){return'"'+u(v.text)+'"'},class:function(v){let g="",p;for(p=0;p<v.parts.length;p++)g+=v.parts[p]instanceof Array?c(v.parts[p][0])+"-"+c(v.parts[p][1]):c(v.parts[p]);return"["+(v.inverted?"^":"")+g+"]"},any:function(){return"any character"},end:function(){return"end of input"},other:function(v){return v.description}};function f(v){return v.charCodeAt(0).toString(16).toUpperCase()}function u(v){return v.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+f(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+f(g)})}function c(v){return v.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(g){return"\\x0"+f(g)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(g){return"\\x"+f(g)})}function d(v){return o[v.type](v)}function F(v){let g=new Array(v.length),p,x;for(p=0;p<v.length;p++)g[p]=d(v[p]);if(g.sort(),g.length>0){for(p=1,x=1;p<g.length;p++)g[p-1]!==g[p]&&(g[x]=g[p],x++);g.length=x}switch(g.length){case 1:return g[0];case 2:return g[0]+" or "+g[1];default:return g.slice(0,-1).join(", ")+", or "+g[g.length-1]}}function S(v){return v?'"'+u(v)+'"':"end of input"}return"Expected "+F(n)+" but "+S(i)+" found."};function r(n,i){i=i!==void 0?i:{};let o={},f={start:_o},u=_o,c=function(s){return s},d=function(s,a,m){return new rt.FieldBoolean(a,s,m)},F=function(s,a){return a?[s,a]:s},S=function(s){return s},v=":",g=wt(":",!1),p=function(s,a){return new rt.Field(s,a)},x=function(s){return new rt.Field(Xn,s)},N=function(s){return s.join("")},k=function(s,a){return a?s.concat(a):s},Dt=function(s,a){return[new rt.Literal(s+a.join(""))]},pt=function(s){return[new rt.Literal(s.join(""))]},ot=function(s){return[new rt.Literal('"'+s.join("")+'"')]},On=function(s){return s},mo="AND",Fn=wt("AND",!1),co="OR",$n=wt("OR",!1),ho="NOT",Sn=wt("NOT",!1),Rn="'",Mn=wt("'",!1),Nn=/^[^']/,Tn=Et(["'"],!0,!1),qn='"',Pn=wt('"',!1),Bn=/^[^"]/,bn=Et(['"'],!0,!1),Cn=/^[^ \t\r\n:'"()]/,Ln=Et([" ","	","\r",`
`,":","'",'"',"(",")"],!0,!1),Dn=/^[^ \t\r\n():]/,In=Et([" ","	","\r",`
`,"(",")",":"],!0,!1),zn=/^[^ \t\r\n'"():]/,Un=Et([" ","	","\r",`
`,"'",'"',"(",")",":"],!0,!1),go=/^[ \t\r\n]/,xo=Et([" ","	","\r",`
`],!1,!1),l=0,ye=[{line:1,column:1}],X=0,Ze=[],T=0;if("startRule"in i){if(!(i.startRule in f))throw new Error(`Can't start parsing from rule "`+i.startRule+'".');u=f[i.startRule]}function wt(s,a){return{type:"literal",text:s,ignoreCase:a}}function Et(s,a,m){return{type:"class",parts:s,inverted:a,ignoreCase:m}}function Vn(){return{type:"end"}}function vo(s){let a=ye[s],m;if(a)return a;for(m=s-1;!ye[m];)m--;for(a=ye[m],a={line:a.line,column:a.column};m<s;)n.charCodeAt(m)===10?(a.line++,a.column=1):a.column++,m++;return ye[s]=a,a}function yo(s,a){let m=vo(s),_=vo(a);return{start:{offset:s,line:m.line,column:m.column},end:{offset:a,line:_.line,column:_.column}}}function I(s){l<X||(l>X&&(X=l,Ze=[]),Ze.push(s))}function Kn(s,a,m){return new e(e.buildMessage(s,a),s,a,m)}function _o(){let s,a,m;return s=l,a=Ao(),a!==o?(m=Wn(),m!==o?(a=c(a),s=a):(l=s,s=o)):(l=s,s=o),s}function Ao(){let s,a,m,_,nt,nr;return s=l,a=je(),a!==o?(m=It(),m!==o?(_=Gn(),_!==o?(nt=It(),nt!==o?(nr=Ao(),nr!==o?(a=d(a,_,nr),s=a):(l=s,s=o)):(l=s,s=o)):(l=s,s=o)):(l=s,s=o)):(l=s,s=o),s===o&&(s=wo()),s}function wo(){let s,a,m;return s=je(),s===o&&(s=l,a=je(),a!==o?(m=Qn(),m===o&&(m=null),m!==o?(a=F(a,m),s=a):(l=s,s=o)):(l=s,s=o)),s}function Qn(){let s,a,m;return s=l,a=It(),a!==o?(m=wo(),m!==o?(a=S(m),s=a):(l=s,s=o)):(l=s,s=o),s}function je(){let s,a,m,_;return s=l,a=kn(),a!==o?(n.charCodeAt(l)===58?(m=v,l++):(m=o,T===0&&I(g)),m!==o?(_=tr(),_!==o?(a=p(a,_),s=a):(l=s,s=o)):(l=s,s=o)):(l=s,s=o),s===o&&(s=l,a=tr(),a!==o&&(a=x(a)),s=a),s}function kn(){let s,a,m;if(s=l,a=[],m=So(),m!==o)for(;m!==o;)a.push(m),m=So();else a=o;return a!==o&&(a=N(a)),s=a,s}function tr(){let s,a,m;return s=l,a=Jn(),a!==o?(m=Hn(),m===o&&(m=null),m!==o?(a=k(a,m),s=a):(l=s,s=o)):(l=s,s=o),s}function Hn(){let s,a,m;return s=l,a=It(),a!==o?(m=tr(),m!==o?(a=S(m),s=a):(l=s,s=o)):(l=s,s=o),s}function Jn(){let s,a,m,_,nt;if(s=l,a=l,T++,m=er(),T--,m===o?a=void 0:(l=a,a=o),a!==o)if(m=rr(),m!==o){if(_=[],nt=Ro(),nt!==o)for(;nt!==o;)_.push(nt),nt=Ro();else _=o;_!==o?(a=Dt(m,_),s=a):(l=s,s=o)}else l=s,s=o;else l=s,s=o;if(s===o){if(s=l,a=l,T++,m=er(),T--,m===o?a=void 0:(l=a,a=o),a!==o){if(m=[],_=rr(),_!==o)for(;_!==o;)m.push(_),_=rr();else m=o;m!==o?(a=pt(m),s=a):(l=s,s=o)}else l=s,s=o;if(s===o){if(s=l,a=Eo(),a!==o){for(m=[],_=Oo();_!==o;)m.push(_),_=Oo();m!==o?(_=Eo(),_!==o?(a=ot(m),s=a):(l=s,s=o)):(l=s,s=o)}else l=s,s=o;if(s===o)if(s=l,a=Fo(),a!==o){for(m=[],_=$o();_!==o;)m.push(_),_=$o();m!==o?(_=Fo(),_!==o?(a=ot(m),s=a):(l=s,s=o)):(l=s,s=o)}else l=s,s=o}}return s}function Gn(){let s,a;return s=l,a=er(),a!==o&&(a=On(a)),s=a,s}function er(){let s;return n.substr(l,3)===mo?(s=mo,l+=3):(s=o,T===0&&I(Fn)),s===o&&(n.substr(l,2)===co?(s=co,l+=2):(s=o,T===0&&I($n)),s===o&&(n.substr(l,3)===ho?(s=ho,l+=3):(s=o,T===0&&I(Sn)))),s}function Eo(){let s;return n.charCodeAt(l)===39?(s=Rn,l++):(s=o,T===0&&I(Mn)),s}function Oo(){let s;return Nn.test(n.charAt(l))?(s=n.charAt(l),l++):(s=o,T===0&&I(Tn)),s}function Fo(){let s;return n.charCodeAt(l)===34?(s=qn,l++):(s=o,T===0&&I(Pn)),s}function $o(){let s;return Bn.test(n.charAt(l))?(s=n.charAt(l),l++):(s=o,T===0&&I(bn)),s}function So(){let s;return Cn.test(n.charAt(l))?(s=n.charAt(l),l++):(s=o,T===0&&I(Ln)),s}function Ro(){let s;return Dn.test(n.charAt(l))?(s=n.charAt(l),l++):(s=o,T===0&&I(In)),s}function rr(){let s;return zn.test(n.charAt(l))?(s=n.charAt(l),l++):(s=o,T===0&&I(Un)),s}function It(){let s,a;if(s=[],go.test(n.charAt(l))?(a=n.charAt(l),l++):(a=o,T===0&&I(xo)),a!==o)for(;a!==o;)s.push(a),go.test(n.charAt(l))?(a=n.charAt(l),l++):(a=o,T===0&&I(xo));else s=o;return s}function Wn(){let s;return s=It(),s===o&&(s=null),s}let Xn=i.defaultFieldName||"all_fields",or=u();if(or!==o&&l===n.length)return or;throw or!==o&&l<n.length&&I(Vn()),Kn(Ze,X<n.length?n.charAt(X):null,X<n.length?yo(X,X+1):yo(X,X))}return{SyntaxError:e,parse:r}}(),_n=Di;var Ii=(t,e,r=()=>{})=>{let n=new Lt({complete:!1,names:[],source:`${Ot.get(t)?.get("url")??""}/record/${e}`});return n.renderFull(r),n},An=Ii;var zi={deepClone:L,escape:xe,FuncBuffer:j,Paginator:de,request:at,requestBuffer:ut,Section:ft},wn=zi;var Ui={AllDatastores:Ot,Core:vn,FieldTree:rt,Messenger:D,Parser:_n,PreferenceEngine:He,Settings:B,Util:wn,init:yn,requestRecord:An},En=Ui;
