"use strict";var Ri=Object.create;var Dt=Object.defineProperty;var qi=Object.getOwnPropertyDescriptor;var Fi=Object.getOwnPropertyNames;var Ei=Object.getPrototypeOf,Ti=Object.prototype.hasOwnProperty;var Vn=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Un=(e,t)=>{for(var n in t)Dt(e,n,{get:t[n],enumerable:!0})},Xn=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Fi(t))!Ti.call(e,s)&&s!==n&&Dt(e,s,{get:()=>t[s],enumerable:!(a=qi(t,s))||a.enumerable});return e};var Ci=(e,t,n)=>(n=e!=null?Ri(Ei(e)):{},Xn(t||!e||!e.__esModule?Dt(n,"default",{value:e,enumerable:!0}):n,e)),Mi=e=>Xn(Dt({},"__esModule",{value:!0}),e);var Lo=Vn(()=>{});var Io=Vn((exports,module)=>{(function(e,t,n){typeof module<"u"&&module.exports?module.exports=n():typeof define=="function"&&define.amd?define(n):t[e]=n()})("reqwest",exports,function(){var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=Lo()}catch{throw new Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray=typeof Array.isArray=="function"?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests")}else return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){if(e._aborted)return n(e.request);if(e._timedOut)return n(e.request,"Request is aborted: timeout");e.request&&e.request[readyState]==4&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request))}}function setHeaders(e,t){var n=t.headers||{},a;n.Accept=n.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var s=typeof FormData<"u"&&t.data instanceof FormData;!t.crossOrigin&&!n[requestedWith]&&(n[requestedWith]=defaultHeaders.requestedWith),!n[contentType]&&!s&&(n[contentType]=t.contentType||defaultHeaders.contentType);for(a in n)n.hasOwnProperty(a)&&"setRequestHeader"in e&&e.setRequestHeader(a,n[a])}function setCredentials(e,t){typeof t.withCredentials<"u"&&typeof e.withCredentials<"u"&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,a){var s=uniqid++,i=e.jsonpCallback||"callback",f=e.jsonpCallbackName||reqwest.getcallbackPrefix(s),l=new RegExp("((^|\\?|&)"+i+")=([^&]+)"),d=a.match(l),m=doc.createElement("script"),O=0,S=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return d?d[3]==="?"?a=a.replace(l,"$1="+f):f=d[3]:a=urlappend(a,i+"="+f),context[f]=generalCallback,m.type="text/javascript",m.src=a,m.async=!0,typeof m.onreadystatechange<"u"&&!S&&(m.htmlFor=m.id="_reqwest_"+s),m.onload=m.onreadystatechange=function(){if(m[readyState]&&m[readyState]!=="complete"&&m[readyState]!=="loaded"||O)return!1;m.onload=m.onreadystatechange=null,m.onclick&&m.onclick(),t(lastValue),lastValue=void 0,head.removeChild(m),O=1},head.appendChild(m),{abort:function(){m.onload=m.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(m),O=1}}}function getRequest(e,t){var n=this.o,a=(n.method||"GET").toUpperCase(),s=typeof n=="string"?n:n.url,i=n.processData!==!1&&n.data&&typeof n.data!="string"?reqwest.toQueryString(n.data):n.data||null,f,l=!1;return(n.type=="jsonp"||a=="GET")&&i&&(s=urlappend(s,i),i=null),n.type=="jsonp"?handleJsonp(n,e,t,s):(f=n.xhr&&n.xhr(n)||xhr(n),f.open(a,s,n.async!==!1),setHeaders(f,n),setCredentials(f,n),context[xDomainRequest]&&f instanceof context[xDomainRequest]?(f.onload=e,f.onerror=t,f.onprogress=function(){},l=!0):f.onreadystatechange=handleReadyState(this,e,t),n.before&&n.before(f),l?setTimeout(function(){f.send(i)},200):f.send(i),f)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){if(e!==null){if(e.match("json"))return"json";if(e.match("javascript"))return"js";if(e.match("text"))return"html";if(e.match("xml"))return"xml"}}function init(o,fn){this.url=typeof o=="string"?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)});function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp=type!=="jsonp"?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(e){return error(resp,"Could not parse JSON in response",e)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML;break}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.request=getRequest.call(this,success,error)}Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},catch:function(e){return this.fail(e)}};function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,`\r
`):""}function serial(e,t){var n=e.name,a=e.tagName.toLowerCase(),s=function(m){m&&!m.disabled&&t(n,normalize(m.attributes.value&&m.attributes.value.specified?m.value:m.text))},i,f,l,d;if(!(e.disabled||!n))switch(a){case"input":/reset|button|image|file/i.test(e.type)||(i=/checkbox/i.test(e.type),f=/radio/i.test(e.type),l=e.value,(!(i||f)||e.checked)&&t(n,normalize(i&&l===""?"on":l)));break;case"textarea":t(n,normalize(e.value));break;case"select":if(e.type.toLowerCase()==="select-one")s(e.selectedIndex>=0?e.options[e.selectedIndex]:null);else for(d=0;e.length&&d<e.length;d++)e.options[d].selected&&s(e.options[d]);break}}function eachFormElement(){var e=this,t,n,a=function(s,i){var f,l,d;for(f=0;f<i.length;f++)for(d=s[byTag](i[f]),l=0;l<d.length;l++)serial(d[l],e)};for(n=0;n<arguments.length;n++)t=arguments[n],/input|select|textarea/i.test(t.tagName)&&serial(t,e),a(t,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(arguments.length===0)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),e=="map"?t=serializeHash:e=="array"?t=reqwest.serializeArray:t=serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,a,s=t||!1,i=[],f=encodeURIComponent,l=function(d,m){m=typeof m=="function"?m():m??"",i[i.length]=f(d)+"="+f(m)};if(isArray(e))for(a=0;e&&a<e.length;a++)l(e[a].name,e[a].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],s,l);return i.join("&").replace(/%20/g,"+")};function buildParams(e,t,n,a){var s,i,f,l=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)f=t[i],n||l.test(e)?a(e,f):buildParams(e+"["+(typeof f=="object"?i:"")+"]",f,n,a);else if(t&&t.toString()==="[object Object]")for(s in t)buildParams(e+"["+s+"]",t[s],n,a);else a(e,t)}return reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest})});var Na={};Un(Na,{default:()=>Da});module.exports=Mi(Na);var bn={};Un(bn,{VERSION:()=>Nt,after:()=>an,all:()=>Zt,allKeys:()=>re,any:()=>er,assign:()=>be,before:()=>gt,bind:()=>Gt,bindAll:()=>yo,chain:()=>Yr,chunk:()=>On,clone:()=>kr,collect:()=>Q,compact:()=>xn,compose:()=>on,constant:()=>ot,contains:()=>H,countBy:()=>So,create:()=>zr,debounce:()=>rn,default:()=>Co,defaults:()=>Xt,defer:()=>_o,delay:()=>Kt,detect:()=>ze,difference:()=>rr,drop:()=>Ee,each:()=>L,escape:()=>ho,every:()=>Zt,extend:()=>Ut,extendOwn:()=>be,filter:()=>Z,find:()=>ze,findIndex:()=>He,findKey:()=>vt,findLastIndex:()=>jt,findWhere:()=>sn,first:()=>St,flatten:()=>yn,foldl:()=>Yt,foldr:()=>un,forEach:()=>L,functions:()=>Le,get:()=>pt,groupBy:()=>bo,has:()=>Ur,head:()=>St,identity:()=>Se,include:()=>H,includes:()=>H,indexBy:()=>Po,indexOf:()=>Jt,initial:()=>Pt,inject:()=>Yt,intersection:()=>_n,invert:()=>ut,invoke:()=>Oo,isArguments:()=>Ne,isArray:()=>U,isArrayBuffer:()=>Ht,isBoolean:()=>rt,isDataView:()=>we,isDate:()=>Zn,isElement:()=>Er,isEmpty:()=>Dr,isEqual:()=>$r,isError:()=>to,isFinite:()=>Mr,isFunction:()=>F,isMap:()=>lo,isMatch:()=>ft,isNaN:()=>nt,isNull:()=>Fr,isNumber:()=>It,isObject:()=>B,isRegExp:()=>eo,isSet:()=>co,isString:()=>Me,isSymbol:()=>Bt,isTypedArray:()=>kt,isUndefined:()=>tt,isWeakMap:()=>po,isWeakSet:()=>mo,iteratee:()=>Ie,keys:()=>w,last:()=>vn,lastIndexOf:()=>Ao,map:()=>Q,mapObject:()=>Xr,matcher:()=>fe,matches:()=>fe,max:()=>At,memoize:()=>en,methods:()=>Le,min:()=>cn,mixin:()=>Rt,negate:()=>qe,noop:()=>mt,now:()=>he,object:()=>wn,omit:()=>qo,once:()=>wo,pairs:()=>Hr,partial:()=>ge,partition:()=>Ro,pick:()=>tr,pluck:()=>Fe,property:()=>Re,propertyOf:()=>Qr,random:()=>Be,range:()=>An,reduce:()=>Yt,reduceRight:()=>un,reject:()=>ln,rest:()=>Ee,restArguments:()=>q,result:()=>jr,sample:()=>bt,select:()=>Z,shuffle:()=>mn,size:()=>hn,some:()=>er,sortBy:()=>dn,sortedIndex:()=>yt,tail:()=>Ee,take:()=>St,tap:()=>Vr,template:()=>Kr,templateSettings:()=>xo,throttle:()=>tn,times:()=>Wr,toArray:()=>Ot,toPath:()=>Qt,transpose:()=>Ve,unescape:()=>vo,union:()=>Eo,uniq:()=>ke,unique:()=>ke,uniqueId:()=>Jr,unzip:()=>Ve,values:()=>j,where:()=>pn,without:()=>Fo,wrap:()=>nn,zip:()=>To});var Nt="1.13.6",Ar=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||Function("return this")()||{},et=Array.prototype,$t=Object.prototype,Or=typeof Symbol<"u"?Symbol.prototype:null,Qn=et.push,se=et.slice,le=$t.toString,Wn=$t.hasOwnProperty,br=typeof ArrayBuffer<"u",Gn=typeof DataView<"u",Kn=Array.isArray,Pr=Object.keys,Sr=Object.create,Rr=br&&ArrayBuffer.isView,jn=isNaN,Jn=isFinite,Lt=!{toString:null}.propertyIsEnumerable("toString"),qr=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],Yn=Math.pow(2,53)-1;function q(e,t){return t=t==null?e.length-1:+t,function(){for(var n=Math.max(arguments.length-t,0),a=Array(n),s=0;s<n;s++)a[s]=arguments[s+t];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,arguments[0],a);case 2:return e.call(this,arguments[0],arguments[1],a)}var i=Array(t+1);for(s=0;s<t;s++)i[s]=arguments[s];return i[t]=a,e.apply(this,i)}}function B(e){var t=typeof e;return t==="function"||t==="object"&&!!e}function Fr(e){return e===null}function tt(e){return e===void 0}function rt(e){return e===!0||e===!1||le.call(e)==="[object Boolean]"}function Er(e){return!!(e&&e.nodeType===1)}function P(e){var t="[object "+e+"]";return function(n){return le.call(n)===t}}var Me=P("String");var It=P("Number");var Zn=P("Date");var eo=P("RegExp");var to=P("Error");var Bt=P("Symbol");var Ht=P("ArrayBuffer");var ro=P("Function"),Di=Ar.document&&Ar.document.childNodes;typeof/./!="function"&&typeof Int8Array!="object"&&typeof Di!="function"&&(ro=function(e){return typeof e=="function"||!1});var F=ro;var Tr=P("Object");var zt=Gn&&Tr(new DataView(new ArrayBuffer(8))),De=typeof Map<"u"&&Tr(new Map);var Ni=P("DataView");function $i(e){return e!=null&&F(e.getInt8)&&Ht(e.buffer)}var we=zt?$i:Ni;var U=Kn||P("Array");function $(e,t){return e!=null&&Wn.call(e,t)}var Cr=P("Arguments");(function(){Cr(arguments)||(Cr=function(e){return $(e,"callee")})})();var Ne=Cr;function Mr(e){return!Bt(e)&&Jn(e)&&!isNaN(parseFloat(e))}function nt(e){return It(e)&&jn(e)}function ot(e){return function(){return e}}function it(e){return function(t){var n=e(t);return typeof n=="number"&&n>=0&&n<=Yn}}function at(e){return function(t){return t?.[e]}}var Ae=at("byteLength");var no=it(Ae);var Li=/\[object ((I|Ui)nt(8|16|32)|Float(32|64)|Uint8Clamped|Big(I|Ui)nt64)Array\]/;function Ii(e){return Rr?Rr(e)&&!we(e):no(e)&&Li.test(le.call(e))}var kt=br?Ii:ot(!1);var E=at("length");function Bi(e){for(var t={},n=e.length,a=0;a<n;++a)t[e[a]]=!0;return{contains:function(s){return t[s]===!0},push:function(s){return t[s]=!0,e.push(s)}}}function st(e,t){t=Bi(t);var n=qr.length,a=e.constructor,s=F(a)&&a.prototype||$t,i="constructor";for($(e,i)&&!t.contains(i)&&t.push(i);n--;)i=qr[n],i in e&&e[i]!==s[i]&&!t.contains(i)&&t.push(i)}function w(e){if(!B(e))return[];if(Pr)return Pr(e);var t=[];for(var n in e)$(e,n)&&t.push(n);return Lt&&st(e,t),t}function Dr(e){if(e==null)return!0;var t=E(e);return typeof t=="number"&&(U(e)||Me(e)||Ne(e))?t===0:E(w(e))===0}function ft(e,t){var n=w(t),a=n.length;if(e==null)return!a;for(var s=Object(e),i=0;i<a;i++){var f=n[i];if(t[f]!==s[f]||!(f in s))return!1}return!0}function x(e){if(e instanceof x)return e;if(!(this instanceof x))return new x(e);this._wrapped=e}x.VERSION=Nt;x.prototype.value=function(){return this._wrapped};x.prototype.valueOf=x.prototype.toJSON=x.prototype.value;x.prototype.toString=function(){return String(this._wrapped)};function Vt(e){return new Uint8Array(e.buffer||e,e.byteOffset||0,Ae(e))}var oo="[object DataView]";function Nr(e,t,n,a){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var s=typeof e;return s!=="function"&&s!=="object"&&typeof t!="object"?!1:io(e,t,n,a)}function io(e,t,n,a){e instanceof x&&(e=e._wrapped),t instanceof x&&(t=t._wrapped);var s=le.call(e);if(s!==le.call(t))return!1;if(zt&&s=="[object Object]"&&we(e)){if(!we(t))return!1;s=oo}switch(s){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return Or.valueOf.call(e)===Or.valueOf.call(t);case"[object ArrayBuffer]":case oo:return io(Vt(e),Vt(t),n,a)}var i=s==="[object Array]";if(!i&&kt(e)){var f=Ae(e);if(f!==Ae(t))return!1;if(e.buffer===t.buffer&&e.byteOffset===t.byteOffset)return!0;i=!0}if(!i){if(typeof e!="object"||typeof t!="object")return!1;var l=e.constructor,d=t.constructor;if(l!==d&&!(F(l)&&l instanceof l&&F(d)&&d instanceof d)&&"constructor"in e&&"constructor"in t)return!1}n=n||[],a=a||[];for(var m=n.length;m--;)if(n[m]===e)return a[m]===t;if(n.push(e),a.push(t),i){if(m=e.length,m!==t.length)return!1;for(;m--;)if(!Nr(e[m],t[m],n,a))return!1}else{var O=w(e),S;if(m=O.length,w(t).length!==m)return!1;for(;m--;)if(S=O[m],!($(t,S)&&Nr(e[S],t[S],n,a)))return!1}return n.pop(),a.pop(),!0}function $r(e,t){return Nr(e,t)}function re(e){if(!B(e))return[];var t=[];for(var n in e)t.push(n);return Lt&&st(e,t),t}function $e(e){var t=E(e);return function(n){if(n==null)return!1;var a=re(n);if(E(a))return!1;for(var s=0;s<t;s++)if(!F(n[e[s]]))return!1;return e!==Br||!F(n[Lr])}}var Lr="forEach",ao="has",Ir=["clear","delete"],so=["get",ao,"set"],fo=Ir.concat(Lr,so),Br=Ir.concat(so),uo=["add"].concat(Ir,Lr,ao);var lo=De?$e(fo):P("Map");var po=De?$e(Br):P("WeakMap");var co=De?$e(uo):P("Set");var mo=P("WeakSet");function j(e){for(var t=w(e),n=t.length,a=Array(n),s=0;s<n;s++)a[s]=e[t[s]];return a}function Hr(e){for(var t=w(e),n=t.length,a=Array(n),s=0;s<n;s++)a[s]=[t[s],e[t[s]]];return a}function ut(e){for(var t={},n=w(e),a=0,s=n.length;a<s;a++)t[e[n[a]]]=n[a];return t}function Le(e){var t=[];for(var n in e)F(e[n])&&t.push(n);return t.sort()}function Oe(e,t){return function(n){var a=arguments.length;if(t&&(n=Object(n)),a<2||n==null)return n;for(var s=1;s<a;s++)for(var i=arguments[s],f=e(i),l=f.length,d=0;d<l;d++){var m=f[d];(!t||n[m]===void 0)&&(n[m]=i[m])}return n}}var Ut=Oe(re);var be=Oe(w);var Xt=Oe(re,!0);function Hi(){return function(){}}function lt(e){if(!B(e))return{};if(Sr)return Sr(e);var t=Hi();t.prototype=e;var n=new t;return t.prototype=null,n}function zr(e,t){var n=lt(e);return t&&be(n,t),n}function kr(e){return B(e)?U(e)?e.slice():Ut({},e):e}function Vr(e,t){return t(e),e}function Qt(e){return U(e)?e:[e]}x.toPath=Qt;function ne(e){return x.toPath(e)}function Pe(e,t){for(var n=t.length,a=0;a<n;a++){if(e==null)return;e=e[t[a]]}return n?e:void 0}function pt(e,t,n){var a=Pe(e,ne(t));return tt(a)?n:a}function Ur(e,t){t=ne(t);for(var n=t.length,a=0;a<n;a++){var s=t[a];if(!$(e,s))return!1;e=e[s]}return!!n}function Se(e){return e}function fe(e){return e=be({},e),function(t){return ft(t,e)}}function Re(e){return e=ne(e),function(t){return Pe(t,e)}}function oe(e,t,n){if(t===void 0)return e;switch(n??3){case 1:return function(a){return e.call(t,a)};case 3:return function(a,s,i){return e.call(t,a,s,i)};case 4:return function(a,s,i,f){return e.call(t,a,s,i,f)}}return function(){return e.apply(t,arguments)}}function ct(e,t,n){return e==null?Se:F(e)?oe(e,t,n):B(e)&&!U(e)?fe(e):Re(e)}function Ie(e,t){return ct(e,t,1/0)}x.iteratee=Ie;function R(e,t,n){return x.iteratee!==Ie?x.iteratee(e,t):ct(e,t,n)}function Xr(e,t,n){t=R(t,n);for(var a=w(e),s=a.length,i={},f=0;f<s;f++){var l=a[f];i[l]=t(e[l],l,e)}return i}function mt(){}function Qr(e){return e==null?mt:function(t){return pt(e,t)}}function Wr(e,t,n){var a=Array(Math.max(0,e));t=oe(t,n,1);for(var s=0;s<e;s++)a[s]=t(s);return a}function Be(e,t){return t==null&&(t=e,e=0),e+Math.floor(Math.random()*(t-e+1))}var he=Date.now||function(){return new Date().getTime()};function dt(e){var t=function(i){return e[i]},n="(?:"+w(e).join("|")+")",a=RegExp(n),s=RegExp(n,"g");return function(i){return i=i==null?"":""+i,a.test(i)?i.replace(s,t):i}}var Wt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"};var ho=dt(Wt);var go=ut(Wt);var vo=dt(go);var xo=x.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var Gr=/(.)^/,zi={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},ki=/\\|'|\r|\n|\u2028|\u2029/g;function Vi(e){return"\\"+zi[e]}var Ui=/^\s*(\w|\$)+\s*$/;function Kr(e,t,n){!t&&n&&(t=n),t=Xt({},t,x.templateSettings);var a=RegExp([(t.escape||Gr).source,(t.interpolate||Gr).source,(t.evaluate||Gr).source].join("|")+"|$","g"),s=0,i="__p+='";e.replace(a,function(m,O,S,y,_){return i+=e.slice(s,_).replace(ki,Vi),s=_+m.length,O?i+=`'+
((__t=(`+O+`))==null?'':_.escape(__t))+
'`:S?i+=`'+
((__t=(`+S+`))==null?'':__t)+
'`:y&&(i+=`';
`+y+`
__p+='`),m}),i+=`';
`;var f=t.variable;if(f){if(!Ui.test(f))throw new Error("variable is not a bare identifier: "+f)}else i=`with(obj||{}){
`+i+`}
`,f="obj";i=`var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};
`+i+`return __p;
`;var l;try{l=new Function(f,"_",i)}catch(m){throw m.source=i,m}var d=function(m){return l.call(this,m,x)};return d.source="function("+f+`){
`+i+"}",d}function jr(e,t,n){t=ne(t);var a=t.length;if(!a)return F(n)?n.call(e):n;for(var s=0;s<a;s++){var i=e?.[t[s]];i===void 0&&(i=n,s=a),e=F(i)?i.call(e):i}return e}var Xi=0;function Jr(e){var t=++Xi+"";return e?e+t:t}function Yr(e){var t=x(e);return t._chain=!0,t}function ht(e,t,n,a,s){if(!(a instanceof t))return e.apply(n,s);var i=lt(e.prototype),f=e.apply(i,s);return B(f)?f:i}var Zr=q(function(e,t){var n=Zr.placeholder,a=function(){for(var s=0,i=t.length,f=Array(i),l=0;l<i;l++)f[l]=t[l]===n?arguments[s++]:t[l];for(;s<arguments.length;)f.push(arguments[s++]);return ht(e,a,this,this,f)};return a});Zr.placeholder=x;var ge=Zr;var Gt=q(function(e,t,n){if(!F(e))throw new TypeError("Bind must be called on a function");var a=q(function(s){return ht(e,a,t,this,n.concat(s))});return a});var T=it(E);function X(e,t,n,a){if(a=a||[],!t&&t!==0)t=1/0;else if(t<=0)return a.concat(e);for(var s=a.length,i=0,f=E(e);i<f;i++){var l=e[i];if(T(l)&&(U(l)||Ne(l)))if(t>1)X(l,t-1,n,a),s=a.length;else for(var d=0,m=l.length;d<m;)a[s++]=l[d++];else n||(a[s++]=l)}return a}var yo=q(function(e,t){t=X(t,!1,!1);var n=t.length;if(n<1)throw new Error("bindAll must be passed function names");for(;n--;){var a=t[n];e[a]=Gt(e[a],e)}return e});function en(e,t){var n=function(a){var s=n.cache,i=""+(t?t.apply(this,arguments):a);return $(s,i)||(s[i]=e.apply(this,arguments)),s[i]};return n.cache={},n}var Kt=q(function(e,t,n){return setTimeout(function(){return e.apply(null,n)},t)});var _o=ge(Kt,x,1);function tn(e,t,n){var a,s,i,f,l=0;n||(n={});var d=function(){l=n.leading===!1?0:he(),a=null,f=e.apply(s,i),a||(s=i=null)},m=function(){var O=he();!l&&n.leading===!1&&(l=O);var S=t-(O-l);return s=this,i=arguments,S<=0||S>t?(a&&(clearTimeout(a),a=null),l=O,f=e.apply(s,i),a||(s=i=null)):!a&&n.trailing!==!1&&(a=setTimeout(d,S)),f};return m.cancel=function(){clearTimeout(a),l=0,a=s=i=null},m}function rn(e,t,n){var a,s,i,f,l,d=function(){var O=he()-s;t>O?a=setTimeout(d,t-O):(a=null,n||(f=e.apply(l,i)),a||(i=l=null))},m=q(function(O){return l=this,i=O,s=he(),a||(a=setTimeout(d,t),n&&(f=e.apply(l,i))),f});return m.cancel=function(){clearTimeout(a),a=i=l=null},m}function nn(e,t){return ge(t,e)}function qe(e){return function(){return!e.apply(this,arguments)}}function on(){var e=arguments,t=e.length-1;return function(){for(var n=t,a=e[t].apply(this,arguments);n--;)a=e[n].call(this,a);return a}}function an(e,t){return function(){if(--e<1)return t.apply(this,arguments)}}function gt(e,t){var n;return function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=null),n}}var wo=ge(gt,2);function vt(e,t,n){t=R(t,n);for(var a=w(e),s,i=0,f=a.length;i<f;i++)if(s=a[i],t(e[s],s,e))return s}function xt(e){return function(t,n,a){n=R(n,a);for(var s=E(t),i=e>0?0:s-1;i>=0&&i<s;i+=e)if(n(t[i],i,t))return i;return-1}}var He=xt(1);var jt=xt(-1);function yt(e,t,n,a){n=R(n,a,1);for(var s=n(t),i=0,f=E(e);i<f;){var l=Math.floor((i+f)/2);n(e[l])<s?i=l+1:f=l}return i}function _t(e,t,n){return function(a,s,i){var f=0,l=E(a);if(typeof i=="number")e>0?f=i>=0?i:Math.max(i+l,f):l=i>=0?Math.min(i+1,l):i+l+1;else if(n&&i&&l)return i=n(a,s),a[i]===s?i:-1;if(s!==s)return i=t(se.call(a,f,l),nt),i>=0?i+f:-1;for(i=e>0?f:l-1;i>=0&&i<l;i+=e)if(a[i]===s)return i;return-1}}var Jt=_t(1,He,yt);var Ao=_t(-1,jt);function ze(e,t,n){var a=T(e)?He:vt,s=a(e,t,n);if(s!==void 0&&s!==-1)return e[s]}function sn(e,t){return ze(e,fe(t))}function L(e,t,n){t=oe(t,n);var a,s;if(T(e))for(a=0,s=e.length;a<s;a++)t(e[a],a,e);else{var i=w(e);for(a=0,s=i.length;a<s;a++)t(e[i[a]],i[a],e)}return e}function Q(e,t,n){t=R(t,n);for(var a=!T(e)&&w(e),s=(a||e).length,i=Array(s),f=0;f<s;f++){var l=a?a[f]:f;i[f]=t(e[l],l,e)}return i}function wt(e){var t=function(n,a,s,i){var f=!T(n)&&w(n),l=(f||n).length,d=e>0?0:l-1;for(i||(s=n[f?f[d]:d],d+=e);d>=0&&d<l;d+=e){var m=f?f[d]:d;s=a(s,n[m],m,n)}return s};return function(n,a,s,i){var f=arguments.length>=3;return t(n,oe(a,i,4),s,f)}}var Yt=wt(1);var un=wt(-1);function Z(e,t,n){var a=[];return t=R(t,n),L(e,function(s,i,f){t(s,i,f)&&a.push(s)}),a}function ln(e,t,n){return Z(e,qe(R(t)),n)}function Zt(e,t,n){t=R(t,n);for(var a=!T(e)&&w(e),s=(a||e).length,i=0;i<s;i++){var f=a?a[i]:i;if(!t(e[f],f,e))return!1}return!0}function er(e,t,n){t=R(t,n);for(var a=!T(e)&&w(e),s=(a||e).length,i=0;i<s;i++){var f=a?a[i]:i;if(t(e[f],f,e))return!0}return!1}function H(e,t,n,a){return T(e)||(e=j(e)),(typeof n!="number"||a)&&(n=0),Jt(e,t,n)>=0}var Oo=q(function(e,t,n){var a,s;return F(t)?s=t:(t=ne(t),a=t.slice(0,-1),t=t[t.length-1]),Q(e,function(i){var f=s;if(!f){if(a&&a.length&&(i=Pe(i,a)),i==null)return;f=i[t]}return f==null?f:f.apply(i,n)})});function Fe(e,t){return Q(e,Re(t))}function pn(e,t){return Z(e,fe(t))}function At(e,t,n){var a=-1/0,s=-1/0,i,f;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=T(e)?e:j(e);for(var l=0,d=e.length;l<d;l++)i=e[l],i!=null&&i>a&&(a=i)}else t=R(t,n),L(e,function(m,O,S){f=t(m,O,S),(f>s||f===-1/0&&a===-1/0)&&(a=m,s=f)});return a}function cn(e,t,n){var a=1/0,s=1/0,i,f;if(t==null||typeof t=="number"&&typeof e[0]!="object"&&e!=null){e=T(e)?e:j(e);for(var l=0,d=e.length;l<d;l++)i=e[l],i!=null&&i<a&&(a=i)}else t=R(t,n),L(e,function(m,O,S){f=t(m,O,S),(f<s||f===1/0&&a===1/0)&&(a=m,s=f)});return a}var Qi=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;function Ot(e){return e?U(e)?se.call(e):Me(e)?e.match(Qi):T(e)?Q(e,Se):j(e):[]}function bt(e,t,n){if(t==null||n)return T(e)||(e=j(e)),e[Be(e.length-1)];var a=Ot(e),s=E(a);t=Math.max(Math.min(t,s),0);for(var i=s-1,f=0;f<t;f++){var l=Be(f,i),d=a[f];a[f]=a[l],a[l]=d}return a.slice(0,t)}function mn(e){return bt(e,1/0)}function dn(e,t,n){var a=0;return t=R(t,n),Fe(Q(e,function(s,i,f){return{value:s,index:a++,criteria:t(s,i,f)}}).sort(function(s,i){var f=s.criteria,l=i.criteria;if(f!==l){if(f>l||f===void 0)return 1;if(f<l||l===void 0)return-1}return s.index-i.index}),"value")}function pe(e,t){return function(n,a,s){var i=t?[[],[]]:{};return a=R(a,s),L(n,function(f,l){var d=a(f,l,n);e(i,f,d)}),i}}var bo=pe(function(e,t,n){$(e,n)?e[n].push(t):e[n]=[t]});var Po=pe(function(e,t,n){e[n]=t});var So=pe(function(e,t,n){$(e,n)?e[n]++:e[n]=1});var Ro=pe(function(e,t,n){e[n?0:1].push(t)},!0);function hn(e){return e==null?0:T(e)?e.length:w(e).length}function gn(e,t,n){return t in n}var tr=q(function(e,t){var n={},a=t[0];if(e==null)return n;F(a)?(t.length>1&&(a=oe(a,t[1])),t=re(e)):(a=gn,t=X(t,!1,!1),e=Object(e));for(var s=0,i=t.length;s<i;s++){var f=t[s],l=e[f];a(l,f,e)&&(n[f]=l)}return n});var qo=q(function(e,t){var n=t[0],a;return F(n)?(n=qe(n),t.length>1&&(a=t[1])):(t=Q(X(t,!1,!1),String),n=function(s,i){return!H(t,i)}),tr(e,n,a)});function Pt(e,t,n){return se.call(e,0,Math.max(0,e.length-(t==null||n?1:t)))}function St(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[0]:Pt(e,e.length-t)}function Ee(e,t,n){return se.call(e,t==null||n?1:t)}function vn(e,t,n){return e==null||e.length<1?t==null||n?void 0:[]:t==null||n?e[e.length-1]:Ee(e,Math.max(0,e.length-t))}function xn(e){return Z(e,Boolean)}function yn(e,t){return X(e,t,!1)}var rr=q(function(e,t){return t=X(t,!0,!0),Z(e,function(n){return!H(t,n)})});var Fo=q(function(e,t){return rr(e,t)});function ke(e,t,n,a){rt(t)||(a=n,n=t,t=!1),n!=null&&(n=R(n,a));for(var s=[],i=[],f=0,l=E(e);f<l;f++){var d=e[f],m=n?n(d,f,e):d;t&&!n?((!f||i!==m)&&s.push(d),i=m):n?H(i,m)||(i.push(m),s.push(d)):H(s,d)||s.push(d)}return s}var Eo=q(function(e){return ke(X(e,!0,!0))});function _n(e){for(var t=[],n=arguments.length,a=0,s=E(e);a<s;a++){var i=e[a];if(!H(t,i)){var f;for(f=1;f<n&&H(arguments[f],i);f++);f===n&&t.push(i)}}return t}function Ve(e){for(var t=e&&At(e,E).length||0,n=Array(t),a=0;a<t;a++)n[a]=Fe(e,a);return n}var To=q(Ve);function wn(e,t){for(var n={},a=0,s=E(e);a<s;a++)t?n[e[a]]=t[a]:n[e[a][0]]=e[a][1];return n}function An(e,t,n){t==null&&(t=e||0,e=0),n||(n=t<e?-1:1);for(var a=Math.max(Math.ceil((t-e)/n),0),s=Array(a),i=0;i<a;i++,e+=n)s[i]=e;return s}function On(e,t){if(t==null||t<1)return[];for(var n=[],a=0,s=e.length;a<s;)n.push(se.call(e,a,a+=t));return n}function Ue(e,t){return e._chain?x(t).chain():t}function Rt(e){return L(Le(e),function(t){var n=x[t]=e[t];x.prototype[t]=function(){var a=[this._wrapped];return Qn.apply(a,arguments),Ue(this,n.apply(x,a))}}),x}L(["pop","push","reverse","shift","sort","splice","unshift"],function(e){var t=et[e];x.prototype[e]=function(){var n=this._wrapped;return n!=null&&(t.apply(n,arguments),(e==="shift"||e==="splice")&&n.length===0&&delete n[0]),Ue(this,n)}});L(["concat","join","slice"],function(e){var t=et[e];x.prototype[e]=function(){var n=this._wrapped;return n!=null&&(n=t.apply(n,arguments)),Ue(this,n)}});var Co=x;var Pn=Rt(bn);Pn._=Pn;var c=Pn;var Wi={array:[],get:function(e){return c.find(this.array,function(t){return t.get("uid")==e})},newSearch:function(e){var t=c.find(this.array,function(n){return n.get("uid")==e});return t?t.baseSearch():void 0},each:function(e){return c.each(this.array,e),this}},Xe=Wi;var Gi=function(e,t,n){return Array.prototype.slice.call(e,t,n)},W=Gi;var Ki=function(e,t,n){return function(a){this.children=W(arguments,1),this.children.length===1&&Array.isArray(this.children[0])&&(this.children=this.children[0]),this.type=e,this.value=a.trim(),this.child_types=t||[],this.validIfEmpty=!0,this.addChild=function(s){if(c.find(this.child_types,function(i){return s.type===i}))this.children.push(s);else throw"Not a valid child for a "+this.type;return this},this.contains=function(s){return this.matches(s)?this:c.isEmpty(this.children)?!1:c.find(this.children,function(i){return i.contains(s)})},this.matches=function(s){var i=this,f=s.children||[];return c.every(c.omit(s,"children"),function(l,d){return i[d]==l})&&c.every(f,function(l){return c.any(children,function(d){return l.matches(d)})})},this.serialize=function(){return a},this.serializedChildren=function(){return c.chain(this.children).map(function(s){return s.serialize()}).compact().value()},this.toJSON=function(){return c.mapObject(c.pick(this,"value","children","type"),function(s,i){return i=="children"?c.map(s,function(f){return f.toJSON()}):s})},c.isFunction(n)&&n.call(this)}},G=Ki;var ji=function(e,t){return G(e,t,function(){if(!c.contains(["AND","OR","NOT"],this.value))throw"Not a valid boolean value";this.serialize=function(){return this.serializedChildren().join(" "+this.value+" ")},this.serializedChildren=function(){var n=this;return c.chain(n.children).map(function(a){return a.type==n.type||a.type=="literal"&&a.value.match(/\s/)?"("+a.serialize()+")":a.serialize()}).compact().value()}})},Qe=ji;var Mo=function(e){if(c.isFunction(e))return e;var t=!1;return c.isArray(e)?t="map":c.isObject(e)&&(t="mapObject"),t?c[t](e,function(n){return Mo(n)}):c.clone(e)},z=Mo;var Ji=function(){return["start","count","end","page","index_limit","total_pages","total_available","page_limit"]},We=Ji;var Yi=function(e){return We().indexOf(e)>-1},Do=Yi;var Sn=function(e){this.set=function(n){if(c.has(n,"total_pages"))throw"Can not set total_pages (it is a calculated value)";if(c.has(n,"index_limit"))throw"Can not set index_limit (it is a calculated value)";if(c.intersection(["start","end","count"],c.keys(n)).length>2)throw"Can not set start, end and count all at the same time";if(c.has(n,"page")&&(c.has(n,"start")||c.has(n,"end")))throw"Can not set page as well as the start and/or end";if(c.extend(t,c.omit(n,"end")),c.has(n,"page")&&(t.start=(t.count||0)*(t.page-1)),c.has(n,"end")){if(c.has(n,"count"))t.start=Math.max(0,n.end-(t.count-1));else if(t.start<=n.end)t.count=n.end-t.start+1;else throw"The start value can not be greater than the end value";t.end=n.end}else{var a=t.start+t.count-1;t.end=a<t.start?void 0:a}if(c.isNumber(t.total_available)?t.total_available>0?t.index_limit=t.total_available-1:t.index_limit=void 0:t.index_limit=1/0,t.count>0&&t.start%t.count===0?(t.page=Math.floor(t.start/t.count)+1,c.isNumber(t.total_available)?(t.total_pages=Math.ceil(t.total_available/t.count),t.page_limit=t.total_pages):(t.total_pages=void 0,t.page_limit=1/0)):(t.page=void 0,t.total_pages=void 0,t.page_limit=void 0),!c.has(t,"start")||!c.has(t,"count"))throw"Not enough information given to create Paginater";return this},this.get=function(n){return t[n]};var t={};this.set(e)};Object.defineProperty(Sn,"getPossibleKeys",{value:We});Object.defineProperty(Sn,"hasKey",{value:Do});var Ge=Sn;var No=function(e,t){this.start=Math.max(Math.min(e,t),0),this.end=Math.max(Math.max(e,t),0),this.inSection=function(n){return n>=this.start&&n<=this.end},this.overlaps=function(n){return this.inSection(n.start)||this.inSection(n.end)},this.calcLength=function(){return this.end-this.start+1},this.expanded=function(n){return this.shifted(-1*n,n)},this.shifted=function(n,a){return c.isNumber(a)||(a=n),new No(this.start+n,this.end+a)}},ve=No;var $o=function(e){var t=new Ge({start:e.start,count:e.count}),n=Ge.getPossibleKeys();e=c.omit(z(e),n),e.request_id=e.request_id||0,this.get=function(a){return Ge.hasKey(a)?t.get(a):e[a]},this.set=function(a){var s=c.pick(a,n),i=c.omit(a,n);return c.isEmpty(i)||(t.set({total_available:void 0}),c.isNumber(i.request_id)||(e.request_id+=1)),t.set(s),c.extend(e,i),this},this.clone=function(){var a=z(e);return a.start=t.get("start"),a.count=t.get("count"),new $o(a)},this.toSection=function(){return new ve(this.get("start"),this.get("end"))},this.toLimitSection=function(){return new ve(this.get("start"),this.get("index_limit"))},this.toJSON=function(){return{uid:this.get("uid"),request_id:this.get("request_id"),start:this.get("start"),count:this.get("count"),field_tree:this.get("field_tree"),facets:this.get("facets"),sort:this.get("sort"),settings:this.get("settings"),raw_query:this.get("raw_query")}}},nr=$o;var Zi={default_cache_size:20,cache_size:{},datastores_url:"",connection_attempts:3,init_attempts:3,ms_between_attempts:1500,message_formats:{failed_record_load:"Failed to load $1",failed_search_run:"Failed to search $1",failed_init:"Failed to initialize Pride"},obnoxious:!1},I=Zi;var ea=function(e,t){if(I.obnoxious){var n=W(arguments,2);n.unshift("[Pride: "+e+"] "+t),console.log.apply(console,n)}},J=ea;var ta=function(e){return c.isFunction(e)?e.apply(this,W(arguments,1)):e},C=ta;var ra=function(e,t){return c.isFunction(e)?e.apply(this,t):e},Ke=ra;var na=function(e){var t={},n=this,a=function(s){return c.has(t,s)||(t[s]=[]),t[s]};this.add=function(s,i){return a(i).push(s),n},this.remove=function(s,i){return t[i]=c.reject(a(i),function(f){return s==f}),n},this.clear=function(s){return delete t[s],n},this.clearAll=function(){return t={},n},this.call=function(s){return n.apply(s,W(arguments,1)),n},this.apply=function(s,i){return c.each(a(s),function(f){Ke(f,i)}),n},c.isFunction(e)&&e.call(this)},ue=na;var oa=new ue(function(){var e=this.call;this.addObserver=this.add,this.removeObserver=this.remove,this.clearObservers=this.clear,this.call=void 0,this.add=void 0,this.remove=void 0,this.clear=void 0,this.sendMessage=function(t){return t.summary&&(t.class=t.class||"info",t.details=t.details||"",e(t.class,t),J("Messenger","MESSAGE SENT",t)),this},this.sendMessageArray=function(t){var n=this;return c.each(t,function(a){n.sendMessage(a)}),this},this.preset=function(t){}}),k=oa;var ia=function(e,t){this.datastore=e.datastore,this.query=e.query||this.datastore.baseQuery();var n=this,a=e.requestFunc||this.datastore.runQuery,s=e.starting_results||[],i=e.cache_size||I.cache_size[this.datastore.uid]||I.default_cache_size;this.log=function(){var g=W(arguments);g.unshift("Search ("+n.datastore.get("uid")+")"),J.apply(window,g)},this.set=function(g){return n.query.set(g),C(n.setDataChanged),c.isEmpty(c.omit(g,We()))||(s=[]),n},this.run=function(g){return C(n.resultsChanged),c.isUndefined(g)&&(g=i),f(m(n.query.toSection().expanded(g))),n},this.results=function(){return O(new ve(n.query.get("start"),Math.min(n.query.get("end"),n.query.get("index_limit"))))};var f=function(g){if(n.log("REQUESTING",g),n.log("TOTAL AVAILABLE (pre-request)",n.query.get("total_available")),g&&n.query.toLimitSection().overlaps(g)){n.log("Sending query...");var A=n.query.clone().set({start:g.start,count:g.calcLength()});a({query:A,failure_message:k.preset("failed_search_run",n.datastore.get("metadata").name),success:function(M){if(M.request.request_id==n.query.get("request_id")){d(M),l(M.response,A.get("start"));var Y=M.response.length;Y!==0&&Y<A.get("count")&&f(g.shifted(Y,0))}}})}else C(n.runDataChanged)},l=function(g,A){var M=!1;n.log("NEW RECORDS",g),c.each(g,function(Y,Je){var _e=Je+A;c.isUndefined(s[_e])&&(s[_e]=C(n.createItem,Y),n.query.toSection().inSection(_e)&&(M=!0))}),n.log("CACHE LENGTH",s.length),(M||c.isEmpty(g))&&C(n.resultsChanged)},d=function(g){n.datastore.update(g.datastore);var A=c.omit(g.new_request,"start","count");A.specialists=g.specialists,A.total_available=g.total_available,n.query.set(A),C(n.runDataChanged)},m=function(g){var A=O(g),M=c.indexOf(A,void 0);if(M!=-1){var Y=g.start+c.lastIndexOf(A,void 0);return M+=g.start,new ve(M,Y)}},O=function(g){for(var A=[],M=g.start;M<=g.end;M++)A.push(s[M]);return A},S=!1,y=[],_=[];this.clearAllObservers=function(){return c.each(y,function(g){g.clearAll()}),C(n.initialize_observables),n},this.getMute=function(){return S},this.setMute=function(g){return g!=S&&(S=g,C(n.muteChanged()),S||c.each(_,function(A){A.notify()})),n},this.createObservable=function(g,A,M){var Y=new ue(function(){var Je=this.add,_e=this.call;y.push(this),M||_.push(this),this.add=function(me){return(!n.muted||M)&&me(A()),Je(me,"observers"),this},this.notify=function(){if(!n.muted||M){var me=A();n.log("NOTIFY ("+g+")",me),_e("observers",me)}return this}});return n[g+"Changed"]=Y.notify,t[g+"Observers"]=Y,n},this.createObservable("mute",this.getMute,!0).createObservable("setData",function(){t.getData()}).createObservable("runData",function(){t.getData()}).createObservable("results",this.results),t.set=function(g){return n.set(g),t},t.run=function(g){return n.run(g),t},t.nextPage=function(g){var A=n.query.get("page");return c.isNumber(A)&&A<n.query.get("page_limit")&&(t.set({page:A+1}),t.run(g)),t},t.prevPage=function(g){var A=n.query.get("page");return c.isNumber(A)&&A>1&&(t.set({page:A-1}),t.run(g)),t}},or=ia;var Bo=Ci(Io());var Ho=function(e){if(J("Request","Sending HTTP request..."),J("Request","URL",e.url),J("Request","CONTENT",JSON.stringify(e.query)),!e.url)throw"No URL given to Pride.Util.request()";var t="get";e.query&&(t="post"),c.isNumber(e.attempts)||(e.attempts=I.connection_attempts),e.attempts-=1,(0,Bo.default)({url:e.url,data:JSON.stringify(e.query),type:"json",method:t,contentType:"application/json",withCredentials:!0,error:function(n){e.attempts<=0?(J("Request","ERROR",n),C(e.failure,n),k.sendMessage({summary:e.failure_message,class:"error"})):(J("Request","Trying request again..."),window.setTimeout(function(){Ho(e)},I.ms_between_attempts))},success:function(n){J("Request","SUCCESS",n),C(e.success,n),k.sendMessage({summary:e.success_message,class:"success"}),k.sendMessageArray(n.messages)}})},xe=Ho;var aa=function(e){e=e||{};var t=new ue,n=!1,a=!1,s=!1,i;this.request=function(m){return t.add(m.success,"success").add(m.failure,"failure"),n?f():l(),this};var f=function(m){i=m||i,a?d("success"):s&&d("failure")},l=function(){n=!0,xe({url:C(e.url),attempts:C(e.attempts)||I.connection_attempts,failure_message:C(e.failure_message),failure:function(m){s=!0,C(e.before_failure,m),f(m),C(e.after_failure,m)},success:function(m){a=!0,C(e.before_success,m),c.isFunction(e.edit_response)&&(m=e.edit_response(m)),f(m),C(e.after_success,m)}})},d=function(m){t.call(m,i).clearAll()}},ye=aa;var sa=function(e){this.data=e;let t=function(a){let s=a.fields.find(i=>i.uid==="resource_access");return s&&s.value?s.value:s},n=function(a){return[t(e)].concat(a)};this.getData=function(a){C(a,n(this.data.holdings))}},qt=sa;var fa=function(e,t){this.barcode=e,this.data=t;var n=function(f){var l;return c.each(f.fields,function(d){d.uid==="get_this_url"&&(l=d.value)}),l},a=function(f){var l;return c.each(f.fields,function(d){d.uid=="links"&&(l=d.value)}),l},s=new ye({url:n(t)+"/"+this.barcode,failure_message:k.preset("failed_get_this_load",t.names[0]),edit_response:function(f){return t=i(f),t}}),i=function(f){return f};this.getData=function(f){s.request({success:f})}},Ft=fa;var ua=function(e){var t=document.createElement("div");return t.appendChild(document.createTextNode(e)),t.innerHTML},Et=ua;var la={selectedRecords:null,engine:null,selected:function(e){return this.engine?(this.selectedRecords[e.datastore]||{})[e.uid]:!1},registerEngine:function(e){return this.engine=e,e?(this.updateSelectedRecords(this.engine.listRecords()),this.engine.addObserver(function(t){return function(n){t.updateSelectedRecords(n)}}(this)),this):this},blankList:function(){return{mirlyn:{},articlesplus:{},databases:{},journals:{},website:{}}},updateSelectedRecords:function(e){if(this.selectedRecords=this.selectedRecords||this.blankList(),e.forEach)return e.forEach(function(n){this.selectedRecords[n.datastore]=this.selectedRecords[n.datastore]||{},this.selectedRecords[n.datastore][n.uid]=!0},this),this;for(var t in e)e.hasOwnProperty(t)&&(this.selectedRecords[t]={},e[t].forEach(function(n){return function(a){this.selectedRecords[n][a.uid]=!0}}(t),this));return this}},ir=la;var pa=function(e){var t=new ye({url:e.source,failure_message:k.preset("failed_record_load",e.names[0]),edit_response:function(f){return e=i(f),e}}),n=null,a={};this.placeHold=function(f,l,d,m){this.renderFull(function(O){var S=function(){var _;return c.each(O.fields,function(g){g.uid==="holdings_url"&&(_=g.value)}),_},y=xe({url:[S(),f,l,d].join("/"),query:!0,failure:function(_){k.sendMessage({summary:"Failed to place hold",class:"error"})},success:m,failure_message:"placeHold failed",success_message:"placeHold succeeded"})})},this.getHoldings=function(f){n?n.getData(f):e.complete?(n=new qt(e),n.getData(f)):t.request({success:function(l){n=new qt(l),n.getData(f)}})},this.getGetThis=function(f,l){a[f]?a[f].getData(l):e.complete?(a[f]=new Ft(f,e),a[f].getData(l)):t.request({success:function(d){a[f]=new Ft(f,d),a[f].getData(l)}})},this.renderPart=function(f){s(f)},this.renderPartThenCache=function(f){s(f),t.request()},this.renderFull=function(f){e.complete?s(f):t.request({success:f})},this.renderCSL=function(f){this.renderFull(function(l){var d;c.each(l.fields,function(m){m.uid==="csl"&&(d=m.value)}),f(d)})};var s=function(f){f(c.omit(e,"complete","source"),e.complete)},i=function(f){return f.fields=c.map(f.fields,function(l){return l.value_has_html||(l.value=Et(l.value)),c.omit(l,"value_has_html")}),f.names_have_html||(f.names=c.map(f.names,function(l){return Et(l)})),f.uid?f.status=200:f.status=404,ir.selected(f)&&(f.selected=!0),c.omit(f,"names_have_html")};e=i(e)},je=pa;var zo=function(e,t){var n=c.isArray(e)&&c.isArray(t),a=c.isObject(e)&&c.isObject(t);return n&&t.length!=e.length||a&&c.keys(t).length!=c.keys(e).length?!1:n||a?c.every(t,function(s,i){return zo(e[i],s)}):e===t},ar=zo;var ca=function(e){var t=this,n=e.data,a=e.results;this.uid=n.uid,this.getData=function(){return n},this.getResults=function(){return a};var s=!1;this.getMute=function(){return s},this.setMute=function(l){return s=l,self};var i=[];this.clearAllObservers=function(){return c.each(i,function(l){l.clearAll()}),self};var f=function(l,d){var m=new ue(function(){var O=this.add,S=this.call;i.push(this),this.add=function(y){return self.muted||y(d()),O(y,"observers"),this},this.notify=function(){return self.muted||(n=d(),self.log("NOTIFY ("+l+")",n),S("observers",n)),this}});return m};this.resultsObservers=f("results",this.getResults),this.setDataObservers=f("setData",this.getData),this.runDataObservers=f("runData",this.getData)},sr=ca;var ma=function(e){var t=this,n=new or(e,this);n.createItem=function(i){return new je(i)};var a=[],s=[];this.getFacets=function(){return a},this.uid=n.datastore.get("uid"),this.getData=function(){return{uid:t.uid,metadata:z(n.datastore.get("metadata")),sorts:z(n.datastore.get("sorts")),selected_sort:n.query.get("sort"),facets:z(n.query.get("facets")),fields:z(n.datastore.get("fields")),field_tree:z(n.query.get("field_tree")),settings:z(n.query.get("settings")),page:n.query.get("page"),count:n.query.get("count"),total_available:n.query.get("total_available"),total_pages:n.query.get("total_pages"),page_limit:n.query.get("page_limit"),specialists:z(n.query.get("specialists"))}},this.getResults=n.results,n.initialize_observables=function(){t.runDataObservers.add(function(){var i=n.datastore.get("facets");ar(s,i)||(c.each(a,function(f){f.clearAllObservers()}),a=c.map(i,function(f){return new sr({data:c.omit(f,"values"),results:f.values})}),s=i,t.facetsObservers.notify())})},this.getMute=n.getMute,this.setMute=function(i){return c.each(a,function(f){f.setMute(i)}),n.setMute(i),t},n.createObservable("facets",this.getFacets).initialize_observables()},fr=ma;var da=["field_boolean","field"],ha=Qe("field_boolean",da),Tt=ha;var ga=["value_boolean","literal","tag","special"],va=G("field",ga,function(){this.serialize=function(){return this.value+": ("+this.serializedChildren().join(" ")+")"}}),ur=va;var xa=G("literal"),lr=xa;var ya=function(e){e=z(e),this.baseQuery=function(){return new nr({uid:e.uid,sort:e.default_sort,start:0,count:0,settings:{},field_tree:n(),facets:c.reduce(e.facets,function(a,s){return s.required&&!s.fixed&&(a[s.uid]=s.default_value),a},{})})},this.baseSearch=function(){return new fr({datastore:this})},this.runQuery=function(a){return a.url=e.url,xe(a),this},this.get=function(a){return e[a]},this.update=function(a){c.extend(e,a)};var t=function(a){return c.reduce(e.facets,function(s,i){return s[i.uid]=c.find(a,function(f){return f.uid===i.uid})||i,s},{})},n=function(a){a=a||new Tt("AND");var s=c.reduce(e.fields,function(i,f){return(f.required||f.fixed)&&!i.contains({type:"field",value:f.uid})?(missing_field=new ur(f.uid,new lr(f.default_value)),c.isMatch(i,{type:"field_boolean",value:"AND"})?i.addChild(missing_field):new Tt("AND",i,missing_field)):i},a);return s.matches({type:"field_boolean",children:[]})?{}:s}},pr=ya;var ee={};Object.defineProperty(ee,"boolNodeFactory",{value:Qe});Object.defineProperty(ee,"Datastore",{value:pr});Object.defineProperty(ee,"DatastoreSearch",{value:fr});Object.defineProperty(ee,"FacetSearch",{value:sr});Object.defineProperty(ee,"GetThis",{value:Ft});Object.defineProperty(ee,"Holdings",{value:qt});Object.defineProperty(ee,"log",{value:J});Object.defineProperty(ee,"nodeFactory",{value:G});Object.defineProperty(ee,"Query",{value:nr});Object.defineProperty(ee,"Record",{value:je});Object.defineProperty(ee,"SearchBase",{value:or});var ko=ee;var _a=function(){"use strict";function e(a,s){function i(){this.constructor=a}i.prototype=s.prototype,a.prototype=new i}function t(a,s,i,f){this.message=a,this.expected=s,this.found=i,this.location=f,this.name="SyntaxError",typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,t)}e(t,Error),t.buildMessage=function(a,s){var i={literal:function(y){return'"'+l(y.text)+'"'},class:function(y){var _="",g;for(g=0;g<y.parts.length;g++)_+=y.parts[g]instanceof Array?d(y.parts[g][0])+"-"+d(y.parts[g][1]):d(y.parts[g]);return"["+(y.inverted?"^":"")+_+"]"},any:function(y){return"any character"},end:function(y){return"end of input"},other:function(y){return y.description}};function f(y){return y.charCodeAt(0).toString(16).toUpperCase()}function l(y){return y.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+f(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+f(_)})}function d(y){return y.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,function(_){return"\\x0"+f(_)}).replace(/[\x10-\x1F\x7F-\x9F]/g,function(_){return"\\x"+f(_)})}function m(y){return i[y.type](y)}function O(y){var _=new Array(y.length),g,A;for(g=0;g<y.length;g++)_[g]=m(y[g]);if(_.sort(),_.length>0){for(g=1,A=1;g<_.length;g++)_[g-1]!==_[g]&&(_[A]=_[g],A++);_.length=A}switch(_.length){case 1:return _[0];case 2:return _[0]+" or "+_[1];default:return _.slice(0,-1).join(", ")+", or "+_[_.length-1]}}function S(y){return y?'"'+l(y)+'"':"end of input"}return"Expected "+O(a)+" but "+S(s)+" found."};function n(a,s){s=s!==void 0?s:{};var i={},f={start:Dn},l=Dn,d=function(u){return u},m=function(u,p,v){return new ce.FieldBoolean(p,u,v)},O=function(u,p){return p?[u,p]:u},S=function(u){return u},y=":",_=Te(":",!1),g=function(u,p){return new ce.Field(u,p)},A=function(u){return new ce.Field(Si,u)},M=function(u){return u.join("")},Y=function(u,p){return p?u.concat(p):u},Je=function(u,p){return[new ce.Literal(u+p.join(""))]},_e=function(u){return[new ce.Literal(u.join(""))]},me=function(u){return[new ce.Literal('"'+u.join("")+'"')]},Zo=function(u){return u},Rn="AND",ei=Te("AND",!1),qn="OR",ti=Te("OR",!1),Fn="NOT",ri=Te("NOT",!1),ni="'",oi=Te("'",!1),ii=/^[^']/,ai=Ce(["'"],!0,!1),si='"',fi=Te('"',!1),ui=/^[^"]/,li=Ce(['"'],!0,!1),pi=/^[^ \t\r\n:'"()]/,ci=Ce([" ","	","\r",`
`,":","'",'"',"(",")"],!0,!1),mi=/^[^ \t\r\n():]/,di=Ce([" ","	","\r",`
`,"(",")",":"],!0,!1),hi=/^[^ \t\r\n'"():]/,gi=Ce([" ","	","\r",`
`,"'",'"',"(",")",":"],!0,!1),En=/^[ \t\r\n]/,Tn=Ce([" ","	","\r",`
`],!1,!1),h=0,D=0,Ct=[{line:1,column:1}],ae=0,gr=[],N=0,Mt;if("startRule"in s){if(!(s.startRule in f))throw new Error(`Can't start parsing from rule "`+s.startRule+'".');l=f[s.startRule]}function $a(){return a.substring(D,h)}function La(){return Ye(D,h)}function Ia(u,p){throw p=p!==void 0?p:Ye(D,h),Mn([xi(u)],a.substring(D,h),p)}function Ba(u,p){throw p=p!==void 0?p:Ye(D,h),yi(u,p)}function Te(u,p){return{type:"literal",text:u,ignoreCase:p}}function Ce(u,p,v){return{type:"class",parts:u,inverted:p,ignoreCase:v}}function Ha(){return{type:"any"}}function vi(){return{type:"end"}}function xi(u){return{type:"other",description:u}}function Cn(u){var p=Ct[u],v;if(p)return p;for(v=u-1;!Ct[v];)v--;for(p=Ct[v],p={line:p.line,column:p.column};v<u;)a.charCodeAt(v)===10?(p.line++,p.column=1):p.column++,v++;return Ct[u]=p,p}function Ye(u,p){var v=Cn(u),b=Cn(p);return{start:{offset:u,line:v.line,column:v.column},end:{offset:p,line:b.line,column:b.column}}}function V(u){h<ae||(h>ae&&(ae=h,gr=[]),gr.push(u))}function yi(u,p){return new t(u,null,null,p)}function Mn(u,p,v){return new t(t.buildMessage(u,p),u,p,v)}function Dn(){var u,p,v;return u=h,p=Nn(),p!==i?(v=Pi(),v!==i?(D=u,p=d(p),u=p):(h=u,u=i)):(h=u,u=i),u}function Nn(){var u,p,v,b,de,wr;return u=h,p=vr(),p!==i?(v=Ze(),v!==i?(b=bi(),b!==i?(de=Ze(),de!==i?(wr=Nn(),wr!==i?(D=u,p=m(p,b,wr),u=p):(h=u,u=i)):(h=u,u=i)):(h=u,u=i)):(h=u,u=i)):(h=u,u=i),u===i&&(u=$n()),u}function $n(){var u,p,v;return u=vr(),u===i&&(u=h,p=vr(),p!==i?(v=_i(),v===i&&(v=null),v!==i?(D=u,p=O(p,v),u=p):(h=u,u=i)):(h=u,u=i)),u}function _i(){var u,p,v;return u=h,p=Ze(),p!==i?(v=$n(),v!==i?(D=u,p=S(v),u=p):(h=u,u=i)):(h=u,u=i),u}function vr(){var u,p,v,b;return u=h,p=wi(),p!==i?(a.charCodeAt(h)===58?(v=y,h++):(v=i,N===0&&V(_)),v!==i?(b=xr(),b!==i?(D=u,p=g(p,b),u=p):(h=u,u=i)):(h=u,u=i)):(h=u,u=i),u===i&&(u=h,p=xr(),p!==i&&(D=u,p=A(p)),u=p),u}function wi(){var u,p,v;if(u=h,p=[],v=zn(),v!==i)for(;v!==i;)p.push(v),v=zn();else p=i;return p!==i&&(D=u,p=M(p)),u=p,u}function xr(){var u,p,v;return u=h,p=Oi(),p!==i?(v=Ai(),v===i&&(v=null),v!==i?(D=u,p=Y(p,v),u=p):(h=u,u=i)):(h=u,u=i),u}function Ai(){var u,p,v;return u=h,p=Ze(),p!==i?(v=xr(),v!==i?(D=u,p=S(v),u=p):(h=u,u=i)):(h=u,u=i),u}function Oi(){var u,p,v,b,de;if(u=h,p=h,N++,v=yr(),N--,v===i?p=void 0:(h=p,p=i),p!==i)if(v=_r(),v!==i){if(b=[],de=kn(),de!==i)for(;de!==i;)b.push(de),de=kn();else b=i;b!==i?(D=u,p=Je(v,b),u=p):(h=u,u=i)}else h=u,u=i;else h=u,u=i;if(u===i){if(u=h,p=h,N++,v=yr(),N--,v===i?p=void 0:(h=p,p=i),p!==i){if(v=[],b=_r(),b!==i)for(;b!==i;)v.push(b),b=_r();else v=i;v!==i?(D=u,p=_e(v),u=p):(h=u,u=i)}else h=u,u=i;if(u===i){if(u=h,p=Ln(),p!==i){for(v=[],b=In();b!==i;)v.push(b),b=In();v!==i?(b=Ln(),b!==i?(D=u,p=me(v),u=p):(h=u,u=i)):(h=u,u=i)}else h=u,u=i;if(u===i)if(u=h,p=Bn(),p!==i){for(v=[],b=Hn();b!==i;)v.push(b),b=Hn();v!==i?(b=Bn(),b!==i?(D=u,p=me(v),u=p):(h=u,u=i)):(h=u,u=i)}else h=u,u=i}}return u}function bi(){var u,p;return u=h,p=yr(),p!==i&&(D=u,p=Zo(p)),u=p,u}function yr(){var u;return a.substr(h,3)===Rn?(u=Rn,h+=3):(u=i,N===0&&V(ei)),u===i&&(a.substr(h,2)===qn?(u=qn,h+=2):(u=i,N===0&&V(ti)),u===i&&(a.substr(h,3)===Fn?(u=Fn,h+=3):(u=i,N===0&&V(ri)))),u}function Ln(){var u;return a.charCodeAt(h)===39?(u=ni,h++):(u=i,N===0&&V(oi)),u}function In(){var u;return ii.test(a.charAt(h))?(u=a.charAt(h),h++):(u=i,N===0&&V(ai)),u}function Bn(){var u;return a.charCodeAt(h)===34?(u=si,h++):(u=i,N===0&&V(fi)),u}function Hn(){var u;return ui.test(a.charAt(h))?(u=a.charAt(h),h++):(u=i,N===0&&V(li)),u}function zn(){var u;return pi.test(a.charAt(h))?(u=a.charAt(h),h++):(u=i,N===0&&V(ci)),u}function kn(){var u;return mi.test(a.charAt(h))?(u=a.charAt(h),h++):(u=i,N===0&&V(di)),u}function _r(){var u;return hi.test(a.charAt(h))?(u=a.charAt(h),h++):(u=i,N===0&&V(gi)),u}function Ze(){var u,p;if(u=[],En.test(a.charAt(h))?(p=a.charAt(h),h++):(p=i,N===0&&V(Tn)),p!==i)for(;p!==i;)u.push(p),En.test(a.charAt(h))?(p=a.charAt(h),h++):(p=i,N===0&&V(Tn));else u=i;return u}function Pi(){var u;return u=Ze(),u===i&&(u=null),u}var Si=s.defaultFieldName||"all_fields";if(Mt=l(),Mt!==i&&h===a.length)return Mt;throw Mt!==i&&h<a.length&&V(vi()),Mn(gr,ae<a.length?a.charAt(ae):null,ae<a.length?Ye(ae,ae+1):Ye(ae,ae))}return{SyntaxError:t,parse:n}}(),cr=_a;var wa=G("raw"),mr=wa;var Aa=function(e,t){if(t)try{return cr.parse(t,{defaultFieldName:e})}catch(n){return console.log(n),new mr(t)}else return{}},Vo=Aa;var Oa=G("special"),Uo=Oa;var ba=["value_boolean","literal","tag","special"],Pa=G("tag",ba,function(){this.serialize=function(){var e=this.serializedChildren();return e.length===0?"":this.value+"("+e.join(" ")+")"}}),Xo=Pa;var Sa=[":","AND","OR","+","-","(",")","*"," ",`
`,"	","\r"],dr=Sa;var Ra=function(e){for(var t=[],n=0,a=null;n<e.length;){var s=e.slice(n),i=c.find(dr,function(l){return new RegExp("^\\"+l).exec(s)});if(i)/\s/.exec(i)&&(a="whitespace"),a=i,n+=i.length;else{i=e.charAt(n),a="string",n++;var f=c.last(t);f&&f.type=="string"&&(i=t.pop().content+i)}t.push({type:a,content:i})}return t},Qo=Ra;var qa=["value_boolean","literal","tag","special"],Fa=Qe("value_boolean",qa),Wo=Fa;var ie={};Object.defineProperty(ie,"Field",{value:ur});Object.defineProperty(ie,"FieldBoolean",{value:Tt});Object.defineProperty(ie,"Literal",{value:lr});Object.defineProperty(ie,"parseField",{value:Vo});Object.defineProperty(ie,"Raw",{value:mr});Object.defineProperty(ie,"Special",{value:Uo});Object.defineProperty(ie,"Tag",{value:Xo});Object.defineProperty(ie,"tokenize",{value:Qo});Object.defineProperty(ie,"tokens",{value:dr});Object.defineProperty(ie,"ValueBoolean",{value:Wo});var ce=ie;var Ea=new ye({url:function(){return I.datastores_url},attempts:function(){return I.init_attempts},failure_message:function(){return k.preset("failed_init")},edit_response:function(){},before_success:function(e){I.default_institution=e.default_institution,I.affiliation=e.affiliation,Xe.array=c.map(e.response,function(t){return new pr(t)})}}).request,Go=Ea;var Ta=function(e,t,n){n===void 0&&(n=function(i){});var a={complete:!1,source:Xe.get(e).get("url")+"/record/"+t,names:[void 0]},s=new je(a);return s.renderFull(n),s},Ko=Ta;var Ca=function(e,t,n){var a={},s=this;this.searches=n,this.uid=e,this.set=function(f){return c.extend(a,f),c.each(n,function(l){l.set(f)}),s};var i=function(f,l){return function(){var d=W(arguments);return Ke(l,d),c.each(n,function(m){m[f].apply(m,d)}),s}};this.run=i("run"),this.nextPage=i("nextPage"),this.prevPage=i("prevPage"),this.setMute=i("setMute",function(f){t=f}),this.getMute=function(){return t},this.setMute(t)},hr=Ca;var Ma=function(e,t){var n=this,a=new hr(null,!0,t);e.set({page:1}).setMute(!1),a.set({page:1}),this.uid=e.uid,this.run=function(s){return e.run(s),a.run(0),n},this.set=function(s){return e.set(s),a.set(c.omit(s,"page","facets")),n},this.nextPage=function(){return e.nextPage(),n},this.prevPage=function(){return e.prevPage(),n},this.switchTo=function(s){if(s!=e){if(e.setMute(!0).set({page:1}),a.searches.push(e),e=void 0,a.searches=c.reject(a.searches,function(i){if(i.uid==s)return e=i,!0}),!e)throw"Could not find a search with a UID of: "+s;n.uid=e.uid,e.setMute(!1)}return n}},jo=Ma;var K={};Object.defineProperty(K,"deepClone",{value:z});Object.defineProperty(K,"escape",{value:Et});Object.defineProperty(K,"FuncBuffer",{value:ue});Object.defineProperty(K,"isDeepMatch",{value:ar});Object.defineProperty(K,"MultiSearch",{value:hr});Object.defineProperty(K,"Paginater",{value:Ge});Object.defineProperty(K,"request",{value:xe});Object.defineProperty(K,"RequestBuffer",{value:ye});Object.defineProperty(K,"safeApply",{value:Ke});Object.defineProperty(K,"safeCall",{value:C});Object.defineProperty(K,"SearchSwitcher",{value:jo});Object.defineProperty(K,"Section",{value:ve});Object.defineProperty(K,"slice",{value:W});var Jo=K;var te={};Object.defineProperty(te,"AllDatastores",{value:Xe});Object.defineProperty(te,"Core",{value:ko});Object.defineProperty(te,"FieldTree",{value:ce});Object.defineProperty(te,"init",{value:Go});Object.defineProperty(te,"Messenger",{value:k});Object.defineProperty(te,"Parser",{value:cr});Object.defineProperty(te,"PreferenceEngine",{value:ir});Object.defineProperty(te,"requestRecord",{value:Ko});Object.defineProperty(te,"Settings",{value:I});Object.defineProperty(te,"Util",{value:Jo});Object.defineProperty(te,"Lipsum",{value:"lorem ipsum dolor sit amet"});var Yo=te;var Da=Yo;
/*! Bundled license information:

reqwest/reqwest.js:
  (*!
    * Reqwest! A general purpose XHR connection manager
    * license MIT (c) Dustin Diaz 2015
    * https://github.com/ded/reqwest
    *)
*/
